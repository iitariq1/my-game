<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ÙŠÙ† Ø¨Ø±Ø§ Ø§Ù„Ø³Ø§Ù„ÙØ©ØŸ</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Cairo', sans-serif;
            background: #0a1a3a;
            min-height: 100vh;
            padding: 10px;
            padding-bottom: 20px;
            direction: rtl;
            color: #fff;
            position: relative;
        }

        /* Stars Background */
        .stars { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0; }
        .star {
            position: absolute; background: white; width: 3px; height: 3px;
            border-radius: 50%; animation: twk 3s ease-in-out infinite;
        }
        @keyframes twk { 0%,100%{opacity:0.15} 50%{opacity:0.8} }

        .container { max-width: 500px; margin: 0 auto; position: relative; z-index: 1; }

        /* Cards - Compact like detective */
        .card {
            background: rgba(12, 28, 60, 0.85);
            border-radius: 15px;
            padding: 18px;
            margin-bottom: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            border: 1px solid rgba(212, 175, 55, 0.15);
            animation: fadeIn 0.35s ease-out;
        }
        @keyframes fadeIn { from{opacity:0;transform:translateY(12px)} to{opacity:1;transform:translateY(0)} }

        /* Headers */
        .header-bar {
            text-align: center;
            padding: 10px 15px;
            background: rgba(10, 26, 58, 0.7);
            border-radius: 12px;
            margin-bottom: 12px;
            border: 1px solid rgba(212, 175, 55, 0.2);
        }

        h1 {
            font-size: 1.3em; font-weight: 800; color: #0a1a3a;
            background: linear-gradient(135deg, #d4af37, #f5e6a3);
            padding: 5px 18px; border-radius: 8px; display: inline-block;
            text-align: center; margin-bottom: 8px;
        }

        h2 {
            font-size: 1em; font-weight: 800; color: #0a1a3a; text-align: center;
            background: linear-gradient(135deg, #d4af37, #f5e6a3);
            padding: 4px 14px; border-radius: 8px; display: inline-block;
            margin-bottom: 10px;
        }

        p { color: #e0e0e0; font-size: 0.85em; margin-bottom: 6px; text-align: center; }

        .emoji { font-size: 2.2em; text-align: center; margin: 8px 0; }

        /* Status boxes */
        .status {
            background: rgba(212, 175, 55, 0.08);
            border: 1px solid rgba(212, 175, 55, 0.2);
            border-radius: 10px;
            padding: 10px 12px;
            margin: 8px 0;
            text-align: center;
        }
        .status.success { background: rgba(46,204,113,0.15); border-color: rgba(46,204,113,0.3); }
        .status.error { background: rgba(231,76,60,0.15); border-color: rgba(231,76,60,0.3); }
        .status p { color: #fff; font-weight: 600; margin: 3px 0; font-size: 0.82em; }

        /* Inputs */
        input[type="text"] {
            width: 100%; padding: 10px 14px; font-size: 15px; font-weight: 700;
            text-align: center; background: rgba(255,255,255,0.06);
            border: 1.5px solid rgba(212, 175, 55, 0.25); border-radius: 10px;
            color: #fff; font-family: 'Cairo', sans-serif; margin-bottom: 8px;
            transition: border-color 0.2s;
        }
        input:focus { outline: none; border-color: #d4af37; box-shadow: 0 0 0 3px rgba(212,175,55,0.15); }
        input::placeholder { color: rgba(255,255,255,0.4); }

        /* Buttons */
        .btn {
            padding: 9px 14px; border: none; border-radius: 8px; font-size: 13px;
            cursor: pointer; font-family: 'Cairo', sans-serif;
            background: linear-gradient(135deg, #d4af37, #b8941e);
            color: #0a1a3a; font-weight: 700; margin: 3px; transition: all 0.15s;
        }
        .btn:hover { opacity: 0.9; }
        .btn:disabled { opacity: 0.4; cursor: not-allowed; }
        .btn:active { transform: scale(0.97); }
        .btn-full { width: 100%; margin: 4px 0; padding: 10px; }
        .btn-gold { background: linear-gradient(135deg, #d4af37, #b8941e); color: #0a1a3a; }
        .btn-purple { background: rgba(212,175,55,0.12); color: #d4af37; border: 1.5px solid rgba(212,175,55,0.35); }
        .btn-success { background: linear-gradient(135deg, #27ae60, #2ecc71); color: #fff; }
        .btn-danger { background: linear-gradient(135deg, #e74c3c, #c0392b); color: #fff; }
        .btn-secondary { background: #4a5568; color: #fff; }
        .btn-small { padding: 5px 8px; font-size: 11px; }
        .btn-green { background: linear-gradient(135deg, #27ae60, #2ecc71); color: white; }

        /* Category Grid - Compact */
        .category-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 6px; margin: 8px 0; }
        .category-btn {
            padding: 9px 6px; font-size: 13px; font-weight: 700;
            border: 1.5px solid rgba(212,175,55,0.15); border-radius: 8px;
            cursor: pointer; font-family: 'Cairo', sans-serif;
            background: rgba(255,255,255,0.04); color: #ccc;
            transition: all 0.2s; text-align: center;
        }
        .category-btn:hover { border-color: rgba(212,175,55,0.5); color: #fff; }
        .category-btn:active { transform: scale(0.97); }
        .category-btn.active {
            background: linear-gradient(135deg, #d4af37, #b8941e);
            color: #0a1a3a; border-color: #d4af37;
            box-shadow: 0 2px 10px rgba(212,175,55,0.3);
        }
        .category-btn-result {
            padding: 9px 6px; font-size: 13px; font-weight: 700;
            border: 1.5px solid rgba(212,175,55,0.15); border-radius: 8px;
            cursor: pointer; font-family: 'Cairo', sans-serif;
            background: rgba(255,255,255,0.04); color: #ccc;
            transition: all 0.2s; text-align: center;
        }
        .category-btn-result:hover { border-color: rgba(212,175,55,0.5); color: #fff; }
        .category-btn-result:active { transform: scale(0.97); }
        .category-btn-result.active {
            background: linear-gradient(135deg, #d4af37, #b8941e);
            color: #0a1a3a; border-color: #d4af37;
        }

        /* Room Code - Compact */
        .room-code {
            background: rgba(212,175,55,0.1); border: 1.5px solid rgba(212,175,55,0.3);
            padding: 12px; border-radius: 12px; text-align: center; margin: 10px 0;
        }
        .room-code-number {
            font-size: 2.2em; font-weight: 900; letter-spacing: 8px;
            color: #0a1a3a; background: linear-gradient(135deg, #d4af37, #f5e6a3);
            padding: 4px 16px; border-radius: 8px; display: inline-block;
        }

        /* Player List */
        .player-list { margin: 8px 0; }
        .player-item {
            background: rgba(255,255,255,0.06); border: 1px solid rgba(212,175,55,0.12);
            border-radius: 8px; padding: 10px 12px; margin: 5px 0;
            display: flex; justify-content: space-between; align-items: center;
        }
        .player-name { font-size: 0.9em; font-weight: 700; color: #fff; }
        .points { font-size: 1em; font-weight: 800; color: #d4af37; }
        .host-badge {
            background: #d4af37; color: #0a1a3a; padding: 2px 8px;
            border-radius: 6px; font-size: 11px; font-weight: 800;
        }

        /* Word Box - Compact */
        .word-box {
            background: linear-gradient(135deg, rgba(212,175,55,0.15), rgba(212,175,55,0.08));
            border: 2px solid rgba(212,175,55,0.4); border-radius: 14px;
            padding: 20px 15px; margin: 12px 0; text-align: center;
        }
        .word-text { font-size: 2em; font-weight: 900; color: #d4af37; }

        /* Impostor Badge */
        .impostor-badge {
            background: rgba(220,38,38,0.2); border: 1.5px solid rgba(220,38,38,0.5);
            border-radius: 10px; padding: 12px; margin-top: 10px;
        }
        .impostor-badge p { color: #fff; font-weight: 700; margin: 4px 0; font-size: 0.85em; }

        /* Vote Grid */
        .vote-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; margin: 10px 0; }
        .vote-card {
            background: rgba(255,255,255,0.05); border: 1.5px solid rgba(212,175,55,0.2);
            border-radius: 12px; padding: 14px 10px; text-align: center;
            cursor: pointer; transition: all 0.2s; min-height: 70px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .vote-card:hover {
            border-color: #d4af37; background: rgba(212,175,55,0.1);
            transform: translateY(-2px); box-shadow: 0 4px 15px rgba(212,175,55,0.2);
        }
        .vote-card.selected {
            background: rgba(212,175,55,0.2); border-color: #d4af37;
            border-width: 2px; box-shadow: 0 0 20px rgba(212,175,55,0.3);
        }

        /* Divider */
        .divider { position: relative; margin: 14px 0; text-align: center; }
        .divider::before {
            content: ''; position: absolute; top: 50%; left: 0; right: 0;
            height: 1px; background: linear-gradient(to right, transparent, rgba(212,175,55,0.4), transparent);
        }
        .divider span {
            position: relative; background: rgba(12, 28, 60, 0.95);
            padding: 0 12px; color: #d4af37; font-weight: 700; font-size: 0.85em;
        }

        /* Winner Announcement */
        .winner-announcement {
            background: linear-gradient(135deg, rgba(255,215,0,0.12), rgba(255,193,7,0.08));
            border: 2px solid rgba(255,215,0,0.4); border-radius: 14px;
            padding: 18px 15px; margin: 12px 0; text-align: center;
            animation: winnerGlow 2s ease-in-out infinite;
        }
        @keyframes winnerGlow {
            0%,100% { box-shadow: 0 4px 20px rgba(255,215,0,0.2); }
            50% { box-shadow: 0 6px 30px rgba(255,215,0,0.4); }
        }
        .winner-announcement .crown { font-size: 2.5em; margin-bottom: 8px; animation: crownFloat 2s ease-in-out infinite; }
        @keyframes crownFloat { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-6px)} }
        .winner-announcement .winner-title { font-size: 1.1em; color: #fbbf24; font-weight: 800; margin-bottom: 4px; }
        .winner-announcement .winner-name-text { font-size: 1.6em; color: #fff; font-weight: 900; margin: 6px 0; }
        .winner-announcement .winner-score { font-size: 0.9em; color: #fef3c7; font-weight: 700; }
        .winner-announcement .congrats { font-size: 0.85em; color: #d4af37; font-weight: 600; margin-top: 6px; }

        .guess-input { margin: 10px 0; }

        /* Hidden */
        .hidden { display: none !important; }

        /* Ramadan badge - smaller */
        .ramadan { font-size: 0.8em; color: #d4af37; font-weight: 600; text-align: center; margin-bottom: 8px; opacity: 0.7; }

        /* ========== Chat System ========== */
        .chat-fab {
            position: fixed; bottom: 20px; left: 15px; width: 48px; height: 48px;
            border-radius: 50%; background: linear-gradient(135deg, #d4af37, #f5e6a3);
            border: none; color: #0a1a3a; font-size: 20px; cursor: pointer; z-index: 1500;
            box-shadow: 0 4px 16px rgba(212,175,55,0.4); display: flex; align-items: center;
            justify-content: center; touch-action: manipulation; will-change: transform;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .chat-fab:hover { transform: scale(1.08); box-shadow: 0 6px 24px rgba(212,175,55,0.6); }
        .chat-fab:active { transform: scale(0.92); }
        .chat-fab.has-unread { animation: chatFabBounce 0.5s; }
        @keyframes chatFabBounce { 0%{transform:scale(1)} 20%{transform:scale(1.2)} 50%{transform:scale(0.92)} 100%{transform:scale(1)} }
        .chat-badge {
            position: absolute; top: -4px; right: -4px; background: #e74c3c; color: #fff;
            font-size: 10px; font-weight: 700; min-width: 18px; height: 18px; border-radius: 9px;
            display: none; align-items: center; justify-content: center; padding: 0 4px;
            font-family: 'Cairo',sans-serif; border: 2px solid #0a1a3a;
        }
        .chat-badge.visible { display: flex; }
        .chat-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0); z-index: 2400; pointer-events: none; transition: background 0.3s; }
        .chat-overlay.active { background: rgba(0,0,0,0.4); pointer-events: auto; }
        .chat-panel {
            position: fixed; bottom: 0; left: 0; right: 0; background: #0c1530; z-index: 2500;
            display: flex; flex-direction: column; overflow: hidden; border-radius: 18px 18px 0 0;
            box-shadow: 0 -6px 30px rgba(0,0,0,0.5); will-change: transform; transform: translateY(100%);
            transition: transform 0.35s cubic-bezier(0.32,0.72,0,1); max-height: 75vh; height: 65vh;
            border-top: 2px solid rgba(212,175,55,0.3);
        }
        .chat-panel.open { transform: translateY(0); }
        .chat-drag-handle { width:100%; display:flex; justify-content:center; padding:8px 0 3px; cursor:grab; flex-shrink:0; touch-action:none; }
        .chat-drag-handle::after { content:''; width:36px; height:3px; background:rgba(255,255,255,0.2); border-radius:2px; }
        .chat-header { display:flex; justify-content:space-between; align-items:center; padding:3px 14px 8px; flex-shrink:0; }
        .chat-header h4 { color:#d4af37; font-size:0.85em; display:flex; align-items:center; gap:6px; margin:0; }
        .chat-header h4 span { font-size:1.1em; }
        .chat-online-dot { width:6px; height:6px; background:#2ecc71; border-radius:50%; display:inline-block; animation:onlinePulse 2s ease-in-out infinite; }
        @keyframes onlinePulse { 0%,100%{opacity:1} 50%{opacity:0.4} }
        .chat-close-btn { background:rgba(255,255,255,0.08); border:none; color:#aaa; width:30px; height:30px; border-radius:50%; font-size:14px; cursor:pointer; display:flex; align-items:center; justify-content:center; }
        .chat-close-btn:hover { background:rgba(255,255,255,0.15); color:#fff; }
        .chat-messages { flex:1; overflow-y:auto; padding:6px 12px; display:flex; flex-direction:column; gap:3px; -webkit-overflow-scrolling:touch; overscroll-behavior:contain; }
        .chat-messages::-webkit-scrollbar { width:2px; }
        .chat-messages::-webkit-scrollbar-thumb { background:rgba(212,175,55,0.2); border-radius:2px; }
        .chat-msg { max-width:80%; padding:7px 11px; border-radius:14px; font-size:0.82em; line-height:1.5; word-wrap:break-word; word-break:break-word; opacity:0; transform:translateY(10px); animation:chatMsgIn 0.25s ease forwards; }
        @keyframes chatMsgIn { to{opacity:1;transform:translateY(0)} }
        .chat-msg.me { align-self:flex-start; background:linear-gradient(135deg,#d4af37,#c9a230); color:#0a1a3a; border-bottom-right-radius:4px; }
        .chat-msg.other { align-self:flex-end; background:rgba(255,255,255,0.07); color:#e0e0e0; border-bottom-left-radius:4px; border:1px solid rgba(255,255,255,0.05); }
        .chat-msg .msg-sender { font-size:0.68em; font-weight:700; margin-bottom:1px; }
        .chat-msg.me .msg-sender { color:rgba(10,26,58,0.6); }
        .chat-msg.other .msg-sender { color:#d4af37; }
        .chat-msg .msg-text { direction:rtl; line-height:1.5; }
        .chat-msg .msg-time { font-size:0.58em; opacity:0.4; margin-top:2px; text-align:left; }
        .chat-msg.system-msg { align-self:center; max-width:90%; background:rgba(212,175,55,0.1); color:#d4af37; text-align:center; font-size:0.75em; padding:4px 12px; border-radius:16px; }
        .chat-msg.grouped { margin-top:-1px; }
        .chat-msg.grouped .msg-sender { display:none; }
        .chat-input-area { display:flex; gap:6px; padding:8px 12px; padding-bottom:max(8px,env(safe-area-inset-bottom,8px)); background:rgba(0,0,0,0.2); border-top:1px solid rgba(212,175,55,0.08); flex-shrink:0; align-items:center; }
        .chat-input-area input { flex:1; padding:9px 13px; border:1.5px solid rgba(212,175,55,0.15); border-radius:20px; background:rgba(255,255,255,0.05); color:#fff; font-size:14px; font-family:'Cairo',sans-serif; outline:none; }
        .chat-input-area input:focus { border-color:rgba(212,175,55,0.5); background:rgba(255,255,255,0.08); }
        .chat-input-area input::placeholder { color:rgba(255,255,255,0.3); }
        .chat-send-btn { width:38px; height:38px; border-radius:50%; background:linear-gradient(135deg,#d4af37,#f5e6a3); border:none; color:#0a1a3a; font-size:16px; cursor:pointer; display:flex; align-items:center; justify-content:center; flex-shrink:0; touch-action:manipulation; transition:transform 0.15s; }
        .chat-send-btn:active { transform:scale(0.88); }
        .chat-send-btn.disabled { opacity:0.35; pointer-events:none; }
        .chat-empty { flex:1; display:flex; align-items:center; justify-content:center; color:rgba(255,255,255,0.15); font-size:0.85em; text-align:center; padding:15px; }
        .chat-empty div { line-height:2; }

        @media (min-width:768px) {
            .chat-fab { bottom:20px; left:20px; width:50px; height:50px; }
            .chat-panel { width:360px; max-width:360px; height:480px; max-height:65vh; left:20px; right:auto; bottom:20px; border-radius:16px; transform:translateY(20px) scale(0.95); opacity:0; pointer-events:none; transition:transform 0.3s cubic-bezier(0.32,0.72,0,1),opacity 0.25s; }
            .chat-panel.open { transform:translateY(0) scale(1); opacity:1; pointer-events:auto; }
            .chat-drag-handle { display:none; }
            .chat-overlay.active { background:rgba(0,0,0,0.15); }
        }
        @media (max-width:380px) {
            .chat-fab { width:42px; height:42px; font-size:18px; }
            .chat-panel { max-height:70vh; height:60vh; }
        }

        /* Kick Button */
        .kick-btn {
            background:rgba(231,76,60,0.12); border:1px solid rgba(231,76,60,0.25); color:#e74c3c;
            font-size:11px; padding:3px 8px; border-radius:6px; cursor:pointer;
            font-family:'Cairo',sans-serif; font-weight:700; transition:all 0.2s; margin-right:6px;
        }
        .kick-btn:hover { background:rgba(231,76,60,0.25); }

        /* Public Room Cards */
        .public-room-card {
            background:rgba(255,255,255,0.05); border:1.5px solid rgba(212,175,55,0.2);
            border-radius:10px; padding:12px; margin:6px 0; cursor:pointer;
            transition:all 0.2s; display:flex; justify-content:space-between; align-items:center;
        }
        .public-room-card:hover { border-color:#d4af37; background:rgba(212,175,55,0.08); transform:translateY(-1px); }
        .public-room-card .room-info { flex:1; }
        .public-room-card .room-info .room-host { color:#d4af37; font-weight:700; font-size:0.85em; }
        .public-room-card .room-info .room-details { color:#999; font-size:0.75em; margin-top:2px; }
        .public-room-card .room-players { background:rgba(46,204,113,0.15); color:#2ecc71; padding:4px 10px; border-radius:8px; font-size:0.8em; font-weight:700; }
        .public-room-card .join-arrow { color:#d4af37; font-size:1.2em; margin-right:8px; }

        /* Info box */
        .info-box {
            background: rgba(0,0,0,0.2); border-right: 3px solid #d4af37;
            padding: 10px 12px; border-radius: 8px; margin: 8px 0;
        }
        .info-box p { text-align: right; font-size: 0.8em; line-height: 1.7; color: #ccc; margin: 0; }
        .info-box strong { color: #d4af37; }

        /* Responsive text */
        @media (max-width: 400px) {
            .card { padding: 14px; }
            h1 { font-size: 1.1em; }
            .word-text { font-size: 1.6em; }
            .room-code-number { font-size: 1.8em; }
        }
    </style>
<!-- Code Protection -->
<script>
(function(){document.addEventListener('contextmenu',function(e){e.preventDefault();return false;});document.addEventListener('keydown',function(e){if(e.key==='F12')return e.preventDefault(),false;if(e.ctrlKey&&e.shiftKey&&['I','i','J','j','C','c'].includes(e.key))return e.preventDefault(),false;if(e.ctrlKey&&['u','U','s','S'].includes(e.key))return e.preventDefault(),false;});(function(){setInterval(function(){(function(){return false;})['constructor']('debugger')();},50);})();Object.defineProperty(window,'console',{get:function(){return{log:function(){},warn:function(){},error:function(){},info:function(){},debug:function(){},clear:function(){},dir:function(){},table:function(){},trace:function(){},assert:function(){},count:function(){},group:function(){},groupEnd:function(){},time:function(){},timeEnd:function(){}}}});document.addEventListener('dragstart',function(e){e.preventDefault();});document.addEventListener('copy',function(e){e.preventDefault();});document.addEventListener('cut',function(e){e.preventDefault();});})();
</script>
<style>*:not(input):not(textarea):not(button){-webkit-user-select:none!important;-moz-user-select:none!important;user-select:none!important;}</style>
</head>
<body>
    <div class="stars" id="stars"></div>

    <div class="container">
        <!-- Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
        <div id="homeScreen" class="card">
            <div class="ramadan">â˜ª Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ… â˜ª</div>
            <div style="text-align:center;">
                <div class="emoji">ğŸ­</div>
                <h1>Ù…ÙŠÙ† Ø¨Ø±Ø§ Ø§Ù„Ø³Ø§Ù„ÙØ©ØŸ</h1>
            </div>

            <div class="info-box">
                <p>
                    <strong>ğŸ“– ÙƒÙŠÙ ØªÙ„Ø¹Ø¨:</strong><br>
                    Ù„Ø¹Ø¨Ø© Ø¬Ù…Ø§Ø¹ÙŠØ©! ÙƒÙ„ Ù„Ø§Ø¹Ø¨ ÙŠØ­ØµÙ„ Ø¹Ù„Ù‰ ÙƒÙ„Ù…Ø© Ù…Ù† Ù†ÙØ³ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ØŒ Ø¥Ù„Ø§ ÙˆØ§Ø­Ø¯... Ù‡Ùˆ "Ø¨Ø±Ø§ Ø§Ù„Ø³Ø§Ù„ÙØ©"!<br>
                    Ø¹Ø¨Ø± Ø¬ÙˆÙ„Ø§Øª Ø§Ù„Ø£Ø³Ø¦Ù„Ø©ØŒ Ø­Ø§ÙˆÙ„ ØªÙƒØªØ´Ù Ù…ÙŠÙ† Ø§Ù„Ù„ÙŠ Ù…Ø§ Ø¹Ù†Ø¯Ù‡ Ù†ÙØ³ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹.<br>
                    <strong>ğŸ¯ Ø§Ù„Ù‡Ø¯Ù:</strong> Ø§ÙƒØªØ´Ù Ø§Ù„Ù„ÙŠ Ø¨Ø±Ø§ Ø§Ù„Ø³Ø§Ù„ÙØ© Ù‚Ø¨Ù„ Ù…Ø§ ÙŠÙƒØªØ´Ù Ù…ÙˆØ¶ÙˆØ¹ÙƒÙ…!
                </p>
            </div>

            <button class="btn btn-full btn-gold" id="goToCreateBtn">ğŸ  Ø¥Ù†Ø´Ø§Ø¡ ØºØ±ÙØ© Ø¬Ø¯ÙŠØ¯Ø©</button>
            <button class="btn btn-full btn-purple" id="goToJoinBtn">ğŸšª Ø§Ù†Ø¶Ù…Ø§Ù… Ù„ØºØ±ÙØ© (Ø¨Ø§Ù„ÙƒÙˆØ¯)</button>
            <div style="margin:6px 0;"><div class="divider"><span>Ø£Ùˆ</span></div></div>
            <button class="btn btn-full btn-success" id="goToPublicBtn">ğŸŒ Ø±ÙˆÙ…Ø§Øª Ø¹Ø§Ù…Ø©</button>
            <button class="btn btn-full btn-green" id="quickJoinBtn">âš¡ Ø§Ù†Ø¶Ù…Ø§Ù… Ø³Ø±ÙŠØ¹</button>
            <button class="btn btn-full btn-secondary" onclick="window.location.href='../index.html'">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©</button>
        </div>

        <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø±ÙˆÙ…Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© -->
        <div id="publicRoomsScreen" class="card hidden">
            <div class="ramadan">â˜ª Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ… â˜ª</div>
            <div style="text-align:center;"><h2>ğŸŒ Ø±ÙˆÙ…Ø§Øª Ø¹Ø§Ù…Ø©</h2></div>
            
            <input type="text" id="publicJoinName" placeholder="Ø§Ø³Ù…Ùƒ Ù„Ù„Ø§Ù†Ø¶Ù…Ø§Ù…" maxlength="15">
            
            <div id="publicRoomsList" style="margin:10px 0;">
                <div class="status"><p>â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø±ÙˆÙ…Ø§Øª...</p></div>
            </div>

            <div id="noPublicRooms" class="status hidden">
                <p>ğŸ˜• Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±ÙˆÙ…Ø§Øª Ø¹Ø§Ù…Ø© Ø­Ø§Ù„ÙŠØ§Ù‹</p>
                <p style="font-size:0.75em;opacity:0.7;">Ø£Ù†Ø´Ø¦ ØºØ±ÙØ© Ø¹Ø§Ù…Ø© ÙˆØ®Ù„Ù‘ Ø§Ù„Ù†Ø§Ø³ ØªÙ†Ø¶Ù…!</p>
            </div>

            <button class="btn btn-full btn-purple" id="refreshPublicBtn">ğŸ”„ ØªØ­Ø¯ÙŠØ«</button>
            <button class="btn btn-full btn-secondary" id="backFromPublic">ğŸ”™ Ø±Ø¬ÙˆØ¹</button>
        </div>

        <!-- Ø´Ø§Ø´Ø© Ø¥Ù†Ø´Ø§Ø¡ ØºØ±ÙØ© -->
        <div id="createRoomScreen" class="card hidden">
            <div class="ramadan">â˜ª Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ… â˜ª</div>
            <h2>Ø¥Ù†Ø´Ø§Ø¡ ØºØ±ÙØ© Ø¬Ø¯ÙŠØ¯Ø©</h2>
            <input type="text" id="hostName" placeholder="Ø§Ø³Ù…Ùƒ" maxlength="15">

            <!-- Ù†ÙˆØ¹ Ø§Ù„ØºØ±ÙØ© -->
            <div style="margin:10px 0;display:flex;gap:6px;">
                <button class="btn btn-full btn-gold" id="roomTypePublic" onclick="setRoomType(true)" style="flex:1;opacity:0.5;">ğŸŒ Ø¹Ø§Ù…Ø©</button>
                <button class="btn btn-full btn-purple" id="roomTypePrivate" onclick="setRoomType(false)" style="flex:1;">ğŸ”’ Ø®Ø§ØµØ©</button>
            </div>

            <div id="categorySection" style="margin:8px 0;">
                <label style="display:block;text-align:center;font-weight:700;color:#d4af37;margin-bottom:6px;font-size:0.85em;">Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø©:</label>
                <div class="category-grid">
                    <button class="category-btn active" data-category="Ø­ÙŠÙˆØ§Ù†Ø§Øª">ğŸ¦ Ø­ÙŠÙˆØ§Ù†Ø§Øª</button>
                    <button class="category-btn" data-category="Ø£ÙƒÙ„">ğŸ• Ø£ÙƒÙ„</button>
                    <button class="category-btn" data-category="Ø£Ù…Ø§ÙƒÙ†">ğŸ–ï¸ Ø£Ù…Ø§ÙƒÙ†</button>
                    <button class="category-btn" data-category="ÙˆØ¸Ø§Ø¦Ù">ğŸ‘¨â€âš•ï¸ ÙˆØ¸Ø§Ø¦Ù</button>
                    <button class="category-btn" data-category="Ù…Ø¯Ù† Ø³Ø¹ÙˆØ¯ÙŠØ©">ğŸ™ï¸ Ù…Ø¯Ù† Ø³Ø¹ÙˆØ¯ÙŠØ©</button>
                    <button class="category-btn" data-category="Ø¯ÙˆÙ„">ğŸŒ Ø¯ÙˆÙ„</button>
                    <button class="category-btn" data-category="Ù…Ø³Ù„Ø³Ù„Ø§Øª">ğŸ“º Ù…Ø³Ù„Ø³Ù„Ø§Øª</button>
                    <button class="category-btn" data-category="Ø£Ø«Ø§Ø«">ğŸ›‹ï¸ Ø£Ø«Ø§Ø«</button>
                    <button class="category-btn" data-category="Ù„Ø§Ø¹Ø¨ÙŠÙ†">âš½ Ù„Ø§Ø¹Ø¨ÙŠÙ†</button>
                    <button class="category-btn" data-category="Ø£Ù†Ø¯ÙŠØ©">ğŸŸï¸ Ø£Ù†Ø¯ÙŠØ©</button>
                </div>
            </div>

            <div style="margin:8px 0;text-align:center;">
                <label style="display:block;font-weight:700;color:#d4af37;margin-bottom:4px;font-size:0.85em;">Ù†Ù‚Ø§Ø· Ø§Ù„ÙÙˆØ²: <span id="winScoreDisplay" style="color:#fbbf24;font-size:1.2em;">5</span></label>
                <div style="display:flex;align-items:center;justify-content:center;gap:10px;">
                    <span style="color:#666;font-size:12px;">2</span>
                    <input type="range" id="winScoreSlider" min="2" max="7" value="5" style="width:160px;accent-color:#d4af37;cursor:pointer;">
                    <span style="color:#666;font-size:12px;">7</span>
                </div>
            </div>

            <button class="btn btn-full btn-success" id="confirmCreateBtn">âœ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØºØ±ÙØ©</button>
            <button class="btn btn-full btn-secondary" id="backFromCreate">ğŸ”™ Ø±Ø¬ÙˆØ¹</button>
        </div>

        <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… -->
        <div id="joinRoomScreen" class="card hidden">
            <div class="ramadan">â˜ª Ø£Ù‡Ù„Ø§Ù‹ ÙˆØ³Ù‡Ù„Ø§Ù‹ â˜ª</div>
            <h2>Ø§Ù†Ø¶Ù…Ø§Ù… Ù„ØºØ±ÙØ©</h2>
            <input type="text" id="joinPlayerName" placeholder="Ø§Ø³Ù…Ùƒ" maxlength="15">
            <input type="text" id="joinRoomCode" placeholder="ÙƒÙˆØ¯ Ø§Ù„ØºØ±ÙØ© (4 Ø£Ø±Ù‚Ø§Ù…)" maxlength="4" style="letter-spacing:5px;font-size:1.2em;">
            <button class="btn btn-full btn-success" id="confirmJoinBtn">âœ… Ø§Ù†Ø¶Ù…Ø§Ù…</button>
            <button class="btn btn-full btn-secondary" id="backFromJoin">ğŸ”™ Ø±Ø¬ÙˆØ¹</button>
        </div>

        <!-- ØºØ±ÙØ© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± -->
        <div id="lobbyScreen" class="card hidden">
            <div class="ramadan">â˜ª Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ… â˜ª</div>
            <h2>ØºØ±ÙØ© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</h2>

            <div class="room-code">
                <p style="font-size:0.8em;margin-bottom:4px;color:#d4af37;">ÙƒÙˆØ¯ Ø§Ù„ØºØ±ÙØ©:</p>
                <div class="room-code-number" id="displayCode">0000</div>
                <br>
                <button class="btn btn-small btn-purple" id="copyBtn" style="margin-top:6px;">ğŸ“‹ Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯</button>
            </div>

            <div id="categorySection">
                <label style="display:block;text-align:center;font-weight:700;color:#d4af37;margin-bottom:6px;font-size:0.85em;">Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø©:</label>
                <div class="category-grid">
                    <button class="category-btn active" data-category="Ø­ÙŠÙˆØ§Ù†Ø§Øª">ğŸ¦ Ø­ÙŠÙˆØ§Ù†Ø§Øª</button>
                    <button class="category-btn" data-category="Ø£ÙƒÙ„">ğŸ• Ø£ÙƒÙ„</button>
                    <button class="category-btn" data-category="Ø£Ù…Ø§ÙƒÙ†">ğŸ–ï¸ Ø£Ù…Ø§ÙƒÙ†</button>
                    <button class="category-btn" data-category="ÙˆØ¸Ø§Ø¦Ù">ğŸ‘¨â€âš•ï¸ ÙˆØ¸Ø§Ø¦Ù</button>
                    <button class="category-btn" data-category="Ù…Ø¯Ù† Ø³Ø¹ÙˆØ¯ÙŠØ©">ğŸ™ï¸ Ù…Ø¯Ù† Ø³Ø¹ÙˆØ¯ÙŠØ©</button>
                    <button class="category-btn" data-category="Ø¯ÙˆÙ„">ğŸŒ Ø¯ÙˆÙ„</button>
                    <button class="category-btn" data-category="Ù…Ø³Ù„Ø³Ù„Ø§Øª">ğŸ“º Ù…Ø³Ù„Ø³Ù„Ø§Øª</button>
                    <button class="category-btn" data-category="Ø£Ø«Ø§Ø«">ğŸ›‹ï¸ Ø£Ø«Ø§Ø«</button>
                    <button class="category-btn" data-category="Ù„Ø§Ø¹Ø¨ÙŠÙ†">âš½ Ù„Ø§Ø¹Ø¨ÙŠÙ†</button>
                    <button class="category-btn" data-category="Ø£Ù†Ø¯ÙŠØ©">ğŸŸï¸ Ø£Ù†Ø¯ÙŠØ©</button>
                </div>
            </div>

            <div class="status">
                <p>Ø§Ù„ÙØ¦Ø©: <span id="displayCategory" style="color:#fbbf24;">Ø­ÙŠÙˆØ§Ù†Ø§Øª</span> Â· Ù†Ù‚Ø§Ø· Ø§Ù„ÙÙˆØ²: <span id="displayWinScore" style="color:#fbbf24;">5</span> ğŸ†</p>
            </div>

            <div style="text-align:center;"><h2>Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† (<span id="playerCount">0</span>)</h2></div>
            <div class="player-list" id="playerList"></div>

            <div id="minWarning" class="status error hidden">
                <p>âš ï¸ ØªØ­ØªØ§Ø¬ 3 Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„</p>
            </div>

            <div id="hostControls" class="hidden">
                <button class="btn btn-full btn-success" id="startBtn">â–¶ï¸ Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¬ÙŠÙ…</button>
            </div>

            <button class="btn btn-full btn-danger" id="leaveBtn">ğŸšª Ù…ØºØ§Ø¯Ø±Ø©</button>
            <button class="btn btn-full btn-secondary" id="backToHomeBtn">ğŸ  Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
        </div>

        <!-- Ø´Ø§Ø´Ø© Ø§Ù„ÙƒÙ„Ù…Ø© -->
        <div id="wordScreen" class="card hidden">
            <div class="ramadan">â˜ª ØªØ¨Ø§Ø±Ùƒ Ø§Ù„Ø±Ø­Ù…Ù† â˜ª</div>
            <div style="text-align:center;"><h2 id="wordTitle">ÙƒÙ„Ù…ØªÙƒ</h2></div>

            <div id="beforeReveal">
                <div class="emoji">ğŸ´</div>
                <p>Ø¬Ø§Ù‡Ø² ØªØ´ÙˆÙ ÙƒÙ„Ù…ØªÙƒØŸ</p>
                <button class="btn btn-full btn-gold" id="revealBtn">ğŸ‘ï¸ Ø§ÙƒØ´Ù</button>
            </div>

            <div id="afterReveal" class="hidden">
                <div class="word-box">
                    <p style="font-size:0.9em;margin-bottom:8px;color:#ccc;">ÙƒÙ„Ù…ØªÙƒ:</p>
                    <div class="word-text" id="myWord">---</div>
                    <div id="impostorBadge" class="impostor-badge hidden">
                        <p style="font-size:1em;margin-bottom:4px;">ğŸ­ Ø£Ù†Øª Ø¨Ø±Ø§ Ø§Ù„Ø³Ø§Ù„ÙØ©!</p>
                        <p style="font-size:0.8em;opacity:0.9;">ğŸ’¡ Ø­Ø§ÙˆÙ„ ØªÙƒØªØ´Ù Ø§Ù„Ø³Ø§Ù„ÙØ© Ù…Ù† ÙƒÙ„Ø§Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†!</p>
                    </div>
                </div>

                <div class="status">
                    <p>ğŸ’¡ ØªÙƒÙ„Ù… Ø¹Ù† ÙƒÙ„Ù…ØªÙƒ Ø¨Ø¯ÙˆÙ† Ù…Ø§ ØªÙ‚ÙˆÙ„Ù‡Ø§!</p>
                </div>

                <div id="hostNext" class="hidden">
                    <button class="btn btn-full btn-success" id="nextPhaseBtn">â¡ï¸ Ø§Ù„ØªØ§Ù„ÙŠ</button>
                </div>
                <div id="waitingHost" class="status hidden">
                    <p>â³ Ø§Ù†ØªØ¸Ø± Ø§Ù„Ù…Ø¶ÙŠÙ...</p>
                </div>
            </div>
        </div>

        <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…Ù†Ø¸Ù…Ø© -->
        <div id="questionsScreen" class="card hidden">
            <div class="ramadan">â˜ª Ø¨Ø³Ù… Ø§Ù„Ù„Ù‡ â˜ª</div>
            <div style="text-align:center;"><h2>Ø¬ÙˆÙ„Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ğŸ—£ï¸</h2></div>

            <div id="currentQuestion" class="word-box" style="margin:10px 0;">
                <p style="font-size:0.85em;color:#ccc;margin-bottom:6px;">Ø§Ù„Ø³Ø¤Ø§Ù„ <span id="questionNum">1</span>:</p>
                <p style="font-size:1.2em;color:#fff;font-weight:800;margin:6px 0;">
                    <span id="askerName" style="color:#ffd700;">Ø£Ø­Ù…Ø¯</span> â†’ <span id="answererName" style="color:#ffd700;">Ø³Ø§Ø±Ø©</span>
                </p>
                <p style="font-size:0.8em;color:#ccc;margin-top:6px;">
                    <span id="askerName2">Ø£Ø­Ù…Ø¯</span> ÙŠØ³Ø£Ù„ <span id="answererName2">Ø³Ø§Ø±Ø©</span> Ø³Ø¤Ø§Ù„ Ø¹Ù† ÙƒÙ„Ù…ØªÙ‡Ø§
                </p>
            </div>

            <div class="status"><p>ğŸ’¡ Ø§Ø³Ø£Ù„ Ø£Ø³Ø¦Ù„Ø© Ø°ÙƒÙŠØ© Ù„ØªÙƒØªØ´Ù Ù…ÙŠÙ† Ø¨Ø±Ø§ Ø§Ù„Ø³Ø§Ù„ÙØ©!</p></div>

            <div id="hostQuestionControls" class="hidden">
                <button class="btn btn-full btn-success" id="nextQuestionBtn">â¡ï¸ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ</button>
            </div>
            <div id="waitQuestionHost" class="status hidden"><p>â³ Ø§Ù†ØªØ¸Ø± Ø§Ù„Ù…Ø¶ÙŠÙ...</p></div>
        </div>

        <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø­Ø±Ø© -->
        <div id="freeQuestionsScreen" class="card hidden">
            <div class="ramadan">â˜ª Ø§Ù„Ù„Ù‡ ÙŠÙˆÙÙ‚ÙƒÙ… â˜ª</div>
            <div style="text-align:center;"><h2>Ø£Ø³Ø¦Ù„Ø© Ø­Ø±Ø© ğŸ’¬</h2></div>

            <div class="word-box" style="margin:10px 0;">
                <p style="font-size:2em;color:#d4af37;font-weight:900;margin:0;">â° <span id="freeTimer">60</span></p>
                <p style="font-size:0.85em;color:#ccc;margin-top:4px;">Ø«Ø§Ù†ÙŠØ© Ù…ØªØ¨Ù‚ÙŠØ©</p>
            </div>

            <div class="status">
                <p>ğŸ’¬ Ø£ÙŠ ÙˆØ§Ø­Ø¯ ÙŠÙ‚Ø¯Ø± ÙŠØ³Ø£Ù„ Ø£ÙŠ ÙˆØ§Ø­Ø¯!</p>
            </div>

            <div id="hostFreeControls" class="hidden">
                <button class="btn btn-full btn-success" id="endFreeQuestionsBtn">âœ… Ø¥Ù†Ù‡Ø§Ø¡ ÙˆØ¨Ø¯Ø¡ Ø§Ù„ØªØµÙˆÙŠØª</button>
            </div>
        </div>

        <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù†Ù‚Ø§Ø´ -->
        <div id="discussScreen" class="card hidden">
            <div class="ramadan">â˜ª Ø§Ù„Ù„Ù‡ ÙŠÙˆÙÙ‚ÙƒÙ… â˜ª</div>
            <div style="text-align:center;"><h2>ÙˆÙ‚Øª Ø§Ù„Ù†Ù‚Ø§Ø´! ğŸ—£ï¸</h2></div>

            <div class="status">
                <p>ğŸ’¬ ÙƒÙ„ ÙˆØ§Ø­Ø¯ ÙŠØªÙƒÙ„Ù… Ø¹Ù† ÙƒÙ„Ù…ØªÙ‡</p>
                <p>ğŸ•µï¸ Ø­Ø§ÙˆÙ„ÙˆØ§ ØªÙƒØªØ´ÙÙˆÙ† Ù…ÙŠÙ† Ø¨Ø±Ø§ Ø§Ù„Ø³Ø§Ù„ÙØ©!</p>
            </div>

            <div class="emoji">ğŸ’­</div>

            <div id="hostDiscuss" class="hidden">
                <button class="btn btn-full btn-success" id="startVoteBtn">ğŸ—³ï¸ Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØµÙˆÙŠØª</button>
            </div>
            <div id="waitDiscuss" class="status hidden"><p>â³ Ø§Ù†ØªØ¸Ø± Ø§Ù„Ù…Ø¶ÙŠÙ ÙŠØ¨Ø¯Ø£ Ø§Ù„ØªØµÙˆÙŠØª...</p></div>
        </div>

        <!-- Ø´Ø§Ø´Ø© Ø§Ù„ØªØµÙˆÙŠØª -->
        <div id="voteScreen" class="card hidden">
            <div class="ramadan">â˜ª Ø¨Ø³Ù… Ø§Ù„Ù„Ù‡ â˜ª</div>
            <div style="text-align:center;"><h2>ØµÙˆÙ‘Øª: Ù…ÙŠÙ† Ø¨Ø±Ø§ Ø§Ù„Ø³Ø§Ù„ÙØ©ØŸ</h2></div>
            <div class="vote-grid" id="voteGrid"></div>
            <div id="voteWaiting" class="status hidden">
                <p>âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ ØµÙˆØªÙƒ!</p>
                <p>â³ ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø¨Ø§Ù‚ÙŠÙ†...</p>
            </div>
        </div>

        <!-- Ø´Ø§Ø´Ø© ØªØ®Ù…ÙŠÙ† Ø§Ù„Ù„ÙŠ Ø¨Ø±Ø§ Ø§Ù„Ø³Ø§Ù„ÙØ© -->
        <div id="guessScreen" class="card hidden">
            <div class="ramadan">Ø§Ù„Ù„Ù‡ ÙŠÙˆÙÙ‚Ùƒ ğŸŒ™</div>
            <div style="text-align:center;"><h2>Ø£Ù†Øª Ø¨Ø±Ø§ Ø§Ù„Ø³Ø§Ù„ÙØ©! ğŸ­</h2></div>
            <div class="status">
                <p>ğŸ’¡ Ø§Ø®ØªØ± Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù…Ù† Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª:</p>
                <p style="font-size:0.78em;opacity:0.8;">Ø¥Ø°Ø§ Ø®Ù…Ù‘Ù†Øª ØµØ­ØŒ ØªÙƒØ³Ø¨ Ù†Ù‚Ø·Ø©! ğŸ¯</p>
            </div>
            <div id="guessOptions" class="vote-grid" style="margin:10px 0;"></div>
            <div id="guessWait" class="status hidden">
                <p>âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ ØªØ®Ù…ÙŠÙ†Ùƒ!</p>
                <p>â³ Ø§Ù†ØªØ¸Ø± Ø§Ù„Ù†ØªØ§Ø¦Ø¬...</p>
            </div>
        </div>

        <!-- Ø´Ø§Ø´Ø© Ø§Ù†ØªØ¸Ø§Ø± ØªØ®Ù…ÙŠÙ† Ø§Ù„Ù„ÙŠ Ø¨Ø±Ø§ Ø§Ù„Ø³Ø§Ù„ÙØ© -->
        <div id="waitingGuessScreen" class="card hidden">
            <div class="ramadan">Ø§Ù†ØªØ¸Ø±ÙˆØ§ ğŸŒ™</div>
            <div class="emoji">â³</div>
            <div style="text-align:center;"><h2>Ø§Ù„Ù„ÙŠ Ø¨Ø±Ø§ Ø§Ù„Ø³Ø§Ù„ÙØ© ÙŠØ®Ù…Ù‘Ù†...</h2></div>
            <div class="word-box">
                <p style="font-size:0.9em;color:#ccc;">Ø§Ù„Ù„ÙŠ Ø¨Ø±Ø§ Ø§Ù„Ø³Ø§Ù„ÙØ©: <span id="impostorNameWait" style="color:#d4af37;">---</span> ğŸ­</p>
            </div>
            <div class="status">
                <p>ğŸ’­ ÙŠØ®ØªØ§Ø± Ù…Ù† 6 Ø®ÙŠØ§Ø±Ø§Øª... Ø¥Ø°Ø§ Ø®Ù…Ù‘Ù† ØµØ­ ÙŠÙƒØ³Ø¨ Ù†Ù‚Ø·Ø©! ğŸ¯</p>
            </div>
        </div>

        <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© -->
        <div id="resultScreen" class="card hidden">
            <div class="ramadan">Ù…Ø§ Ø´Ø§Ø¡ Ø§Ù„Ù„Ù‡ ğŸŒ™</div>
            <div class="emoji" id="resultEmoji">ğŸ‰</div>
            <div style="text-align:center;"><h2 id="resultTitle">Ø§Ù„Ù†ØªÙŠØ¬Ø©</h2></div>

            <div class="word-box">
                <p style="font-size:0.9em;color:#ccc;margin-bottom:8px;">Ø§Ù„Ù„ÙŠ Ø¨Ø±Ø§ Ø§Ù„Ø³Ø§Ù„ÙØ©: <span id="impostorName" style="color:#e74c3c;">---</span> ğŸ­</p>
                <div style="background:rgba(255,255,255,0.08);border-radius:10px;padding:10px;margin-top:8px;">
                    <p style="margin:4px 0;color:#fff;font-size:0.85em;">Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©: <strong id="mainWord" style="color:#2ecc71;">---</strong></p>
                    <p style="margin:4px 0;color:#fff;font-size:0.85em;">ÙƒÙ„Ù…Ø© Ø§Ù„Ù„ÙŠ Ø¨Ø±Ø§ Ø§Ù„Ø³Ø§Ù„ÙØ©: <strong id="impostorWord" style="color:#e74c3c;">---</strong></p>
                </div>
            </div>

            <div id="roundResults"></div>

            <div style="text-align:center;"><h2>Ø§Ù„Ù†Ù‚Ø§Ø· ğŸ†</h2></div>
            <div class="player-list" id="scoreList"></div>

            <div id="winnerAnnounce" class="winner-announcement hidden">
                <div class="crown">ğŸ‘‘</div>
                <div class="winner-title">Ø§Ù„ÙØ§Ø¦Ø²</div>
                <div class="winner-name-text" id="winnerName">---</div>
                <div class="winner-score">ÙˆØµÙ„ Ù„Ù€ <span id="winnerPoints">5</span> Ù†Ù‚Ø§Ø·!</div>
                <div class="congrats">Ù…Ø¨Ø±ÙˆÙƒ! ğŸŠ</div>
            </div>

            <div id="hostResult" class="hidden">
                <button class="btn btn-full btn-success" id="nextRoundBtn">â–¶ï¸ Ø§Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©</button>
                <button class="btn btn-full btn-gold" id="newGameBtn">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨ (ØªØµÙÙŠØ± Ø§Ù„Ù†Ù‚Ø§Ø·)</button>
                <button class="btn btn-full btn-secondary" id="backToMenuBtn">ğŸšª Ø§Ù„Ø®Ø±ÙˆØ¬</button>
            </div>

            <!-- Ù†Ø§ÙØ°Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙØ¦Ø© Ù„Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© -->
            <div id="categoryModal" class="hidden" style="position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.8);z-index:1000;align-items:center;justify-content:center;">
                <div style="background:rgba(12,28,60,0.95);border-radius:14px;padding:20px;max-width:380px;width:90%;border:1.5px solid rgba(212,175,55,0.4);">
                    <h3 style="color:#d4af37;text-align:center;margin-bottom:12px;font-size:1em;">Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø© Ù„Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ğŸ¯</h3>
                    <div class="category-grid" id="categoryModalGrid">
                        <button class="category-btn-result" data-category="Ø­ÙŠÙˆØ§Ù†Ø§Øª">ğŸ¦ Ø­ÙŠÙˆØ§Ù†Ø§Øª</button>
                        <button class="category-btn-result" data-category="Ø£ÙƒÙ„">ğŸ• Ø£ÙƒÙ„</button>
                        <button class="category-btn-result" data-category="Ø£Ù…Ø§ÙƒÙ†">ğŸ–ï¸ Ø£Ù…Ø§ÙƒÙ†</button>
                        <button class="category-btn-result" data-category="ÙˆØ¸Ø§Ø¦Ù">ğŸ‘¨â€âš•ï¸ ÙˆØ¸Ø§Ø¦Ù</button>
                        <button class="category-btn-result" data-category="Ù…Ø¯Ù† Ø³Ø¹ÙˆØ¯ÙŠØ©">ğŸ™ï¸ Ù…Ø¯Ù† Ø³Ø¹ÙˆØ¯ÙŠØ©</button>
                        <button class="category-btn-result" data-category="Ø¯ÙˆÙ„">ğŸŒ Ø¯ÙˆÙ„</button>
                        <button class="category-btn-result" data-category="Ù…Ø³Ù„Ø³Ù„Ø§Øª">ğŸ“º Ù…Ø³Ù„Ø³Ù„Ø§Øª</button>
                        <button class="category-btn-result" data-category="Ø£Ø«Ø§Ø«">ğŸ›‹ï¸ Ø£Ø«Ø§Ø«</button>
                        <button class="category-btn-result" data-category="Ù„Ø§Ø¹Ø¨ÙŠÙ†">âš½ Ù„Ø§Ø¹Ø¨ÙŠÙ†</button>
                        <button class="category-btn-result" data-category="Ø£Ù†Ø¯ÙŠØ©">ğŸŸï¸ Ø£Ù†Ø¯ÙŠØ©</button>
                    </div>
                    <button class="btn btn-full btn-success" id="confirmCategoryBtn">âœ… ØªØ£ÙƒÙŠØ¯</button>
                    <button class="btn btn-full btn-secondary" id="cancelCategoryBtn">âŒ Ø¥Ù„ØºØ§Ø¡</button>
                </div>
            </div>

            <div id="waitResult" class="status hidden"><p>â³ Ø§Ù†ØªØ¸Ø± Ø§Ù„Ù…Ø¶ÙŠÙ...</p></div>

            <button class="btn btn-full btn-danger" id="exitFromResult" style="margin-top:8px;">ğŸšª Ø®Ø±ÙˆØ¬ Ù…Ù† Ø§Ù„ØºØ±ÙØ©</button>
        </div>
    </div>

    <script>
        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ø¬ÙˆÙ…
        const starsEl = document.getElementById('stars');
        for (let i = 0; i < 30; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.animationDelay = Math.random() * 3 + 's';
            starsEl.appendChild(star);
        }

        // ØªÙ‡ÙŠØ¦Ø© Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyDmcYuujBwML0KyNemCopBNSAM9yJOk76w",
            authDomain: "mynbra-a1bbc.firebaseapp.com",
            databaseURL: "https://mynbra-a1bbc-default-rtdb.firebaseio.com",
            projectId: "mynbra-a1bbc",
            storageBucket: "mynbra-a1bbc.firebasestorage.app",
            messagingSenderId: "114341063618",
            appId: "1:114341063618:web:8d1b3e0263490c83e1845b"
        };

        let db = null;
        let roomRef = null;
        let firebaseReady = false;

        // ØªØ­Ù…ÙŠÙ„ Firebase
        setTimeout(() => {
            try {
                if (typeof firebase !== 'undefined') {
                    firebase.initializeApp(firebaseConfig);
                    db = firebase.database();
                    firebaseReady = true;
                    console.log('âœ… Firebase Ø¬Ø§Ù‡Ø²');
                } else {
                    console.log('âš ï¸ Firebase ØºÙŠØ± Ù…ØªÙˆÙØ±');
                }
            } catch (e) {
                console.log('âš ï¸ Firebase:', e.message);
            }
        }, 1000);

        // Ø§Ù„ÙƒÙ„Ù…Ø§Øª
        const wordSets = {
            'Ø­ÙŠÙˆØ§Ù†Ø§Øª': [
                { main: 'Ø£Ø³Ø¯', impostor: 'Ù†Ù…Ø±', options: ['Ù‚Ø·Ø©', 'ÙƒÙ„Ø¨', 'Ø£Ø±Ù†Ø¨', 'Ø£Ø³Ø¯', 'Ø°Ø¦Ø¨', 'Ø«Ø¹Ù„Ø¨'] },
                { main: 'ÙÙŠÙ„', impostor: 'ÙˆØ­ÙŠØ¯ Ø§Ù„Ù‚Ø±Ù†', options: ['Ø­ØµØ§Ù†', 'Ø¬Ù…Ù„', 'Ø²Ø±Ø§ÙØ©', 'ÙÙŠÙ„', 'Ø¨Ù‚Ø±Ø©', 'Ø®Ø±ÙˆÙ'] },
                { main: 'Ø¯ÙˆÙ„ÙÙŠÙ†', impostor: 'Ø­ÙˆØª', options: ['Ø³Ù…ÙƒØ©', 'Ù‚Ø±Ø´', 'Ø£Ø®Ø·Ø¨ÙˆØ·', 'Ø¯ÙˆÙ„ÙÙŠÙ†', 'Ø³Ù„Ø­ÙØ§Ø©', 'ÙÙ‚Ù…Ø©'] },
                { main: 'Ù†Ø³Ø±', impostor: 'ØµÙ‚Ø±', options: ['Ø­Ù…Ø§Ù…Ø©', 'Ø¯Ø¬Ø§Ø¬Ø©', 'Ø¨Ø·Ø©', 'Ù†Ø³Ø±', 'Ø¨Ø¨ØºØ§Ø¡', 'Ø¹ØµÙÙˆØ±'] },
                { main: 'Ù‚Ø±Ø¯', impostor: 'ØºÙˆØ±ÙŠÙ„Ø§', options: ['ÙØ£Ø±', 'Ø£Ø±Ù†Ø¨', 'Ù‚Ø±Ø¯', 'Ø¯Ø¨', 'Ø±Ø§ÙƒÙˆÙ†', 'Ø³Ù†Ø¬Ø§Ø¨'] },
                { main: 'Ø«Ø¹Ø¨Ø§Ù†', impostor: 'Ø³Ø­Ù„ÙŠØ©', options: ['ØªÙ…Ø³Ø§Ø­', 'Ø¶ÙØ¯Ø¹', 'Ø«Ø¹Ø¨Ø§Ù†', 'Ø¹Ù‚Ø±Ø¨', 'Ø³Ù„Ø­ÙØ§Ø©', 'ÙˆØ±Ù„'] }
            ],
            'Ø£ÙƒÙ„': [
                { main: 'Ø¨ÙŠØªØ²Ø§', impostor: 'Ø¨Ø§Ø³ØªØ§', options: ['Ù…Ø¹ÙƒØ±ÙˆÙ†Ø©', 'Ø¨Ø±Ø¬Ø±', 'ÙƒØ¨Ø³Ø©', 'Ø¨ÙŠØªØ²Ø§', 'Ø´Ø§ÙˆØ±Ù…Ø§', 'Ù…Ù†Ø¯ÙŠ'] },
                { main: 'Ø¨Ø±Ø¬Ø±', impostor: 'Ø´Ø§ÙˆØ±Ù…Ø§', options: ['Ø¨ÙŠØªØ²Ø§', 'Ø¨Ø§Ø³ØªØ§', 'ÙƒØ¨Ø³Ø©', 'Ø¨Ø±Ø¬Ø±', 'Ø³Ù†Ø¯ÙˆØªØ´', 'ÙÙ„Ø§ÙÙ„'] },
                { main: 'ÙƒØ¨Ø³Ø©', impostor: 'Ù…Ù†Ø¯ÙŠ', options: ['Ø¨Ø±ÙŠØ§Ù†ÙŠ', 'ÙƒØ¨Ø³Ø©', 'Ù…Ù‚Ù„ÙˆØ¨Ø©', 'Ù…Ø¬Ø¯Ø±Ø©', 'ÙØ±ÙŠÙƒØ©', 'Ù…Ø¶ØºÙˆØ·'] },
                { main: 'ÙƒÙ†Ø§ÙØ©', impostor: 'Ø¨Ø³Ø¨ÙˆØ³Ø©', options: ['Ø¨Ù‚Ù„Ø§ÙˆØ©', 'ÙƒÙ†Ø§ÙØ©', 'Ø¨Ø³Ø¨ÙˆØ³Ø©', 'Ù‡Ø±ÙŠØ³Ø©', 'Ù…Ø¹Ù…ÙˆÙ„', 'ØºØ±ÙŠØ¨Ø©'] },
                { main: 'Ø³ÙˆØ´ÙŠ', impostor: 'Ø³Ø§Ø´ÙŠÙ…ÙŠ', options: ['Ø³Ù…Ùƒ', 'Ø±Ø²', 'Ø³ÙˆØ´ÙŠ', 'Ø±Ø§Ù…Ù†', 'Ù†ÙˆØ¯Ù„Ø²', 'Ø¯Ù…Ø¨Ù„Ù†Ø¬'] },
                { main: 'ÙÙ„Ø§ÙÙ„', impostor: 'Ø³Ù…Ø¨ÙˆØ³Ø©', options: ['ÙƒØ¨Ø©', 'ÙÙ„Ø§ÙÙ„', 'Ø¨Ø±Ø¬Ø±', 'Ø³Ù†Ø¯ÙˆØªØ´', 'ÙØ·ÙŠØ±Ø©', 'Ù…Ø¹Ø¬Ù†Ø§Øª'] }
            ],
            'Ø£Ù…Ø§ÙƒÙ†': [
                { main: 'Ø´Ø§Ø·Ø¦', impostor: 'ØµØ­Ø±Ø§Ø¡', options: ['Ø¨Ø­Ø±', 'Ø¬Ø¨Ù„', 'ØºØ§Ø¨Ø©', 'Ø´Ø§Ø·Ø¦', 'Ù†Ù‡Ø±', 'Ø¨Ø­ÙŠØ±Ø©'] },
                { main: 'Ù…Ø·Ø§Ø±', impostor: 'Ù…Ø­Ø·Ø© Ù‚Ø·Ø§Ø±', options: ['Ù…ÙŠÙ†Ø§Ø¡', 'Ù…Ø·Ø§Ø±', 'Ù…ÙˆÙ‚Ù', 'Ù…Ø­Ø·Ø©', 'Ø¬Ø³Ø±', 'Ù†ÙÙ‚'] },
                { main: 'Ù…Ø¯Ø±Ø³Ø©', impostor: 'Ø¬Ø§Ù…Ø¹Ø©', options: ['Ø±ÙˆØ¶Ø©', 'Ù…Ø¯Ø±Ø³Ø©', 'Ù…Ø¹Ù‡Ø¯', 'ÙƒÙ„ÙŠØ©', 'Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ©', 'Ù…Ø±ÙƒØ²'] },
                { main: 'Ø³ÙˆÙ‚', impostor: 'Ù…ÙˆÙ„', options: ['Ø¯ÙƒØ§Ù†', 'Ù…Ø­Ù„', 'Ø¨Ù‚Ø§Ù„Ø©', 'Ø³ÙˆÙ‚', 'Ù…ØªØ¬Ø±', 'Ù…Ø±ÙƒØ²'] },
                { main: 'Ù…Ø³ØªØ´ÙÙ‰', impostor: 'Ø¹ÙŠØ§Ø¯Ø©', options: ['ØµÙŠØ¯Ù„ÙŠØ©', 'Ù…Ø®ØªØ¨Ø±', 'Ù…Ø³ØªØ´ÙÙ‰', 'Ù…Ø±ÙƒØ²', 'Ù…Ø³ØªÙˆØµÙ', 'Ø·ÙˆØ§Ø±Ø¦'] },
                { main: 'Ù…Ø·Ø¹Ù…', impostor: 'ÙƒØ§ÙÙŠÙ‡', options: ['Ù…Ù‚Ù‡Ù‰', 'Ø¨ÙˆÙÙŠÙ‡', 'Ù…Ø·Ø¹Ù…', 'ÙƒØ§ÙØªÙŠØ±ÙŠØ§', 'ÙÙ†Ø¯Ù‚', 'Ù…Ø®Ø¨Ø²'] }
            ],
            'ÙˆØ¸Ø§Ø¦Ù': [
                { main: 'Ø·Ø¨ÙŠØ¨', impostor: 'Ù…Ù…Ø±Ø¶', options: ['ØµÙŠØ¯Ù„ÙŠ', 'Ù…Ø¹Ø§Ù„Ø¬', 'Ø·Ø¨ÙŠØ¨', 'Ø¬Ø±Ø§Ø­', 'Ù…Ø³Ø§Ø¹Ø¯', 'Ø£Ø®ØµØ§Ø¦ÙŠ'] },
                { main: 'Ù…Ù‡Ù†Ø¯Ø³', impostor: 'Ù…Ø¹Ù…Ø§Ø±', options: ['Ù…ØµÙ…Ù…', 'Ø±Ø³Ø§Ù…', 'Ù…Ù‡Ù†Ø¯Ø³', 'Ù…Ø´Ø±Ù', 'ØªÙ‚Ù†ÙŠ', 'ÙÙ†ÙŠ'] },
                { main: 'Ù…Ø¹Ù„Ù…', impostor: 'Ø£Ø³ØªØ§Ø°', options: ['Ù…Ø¯Ø±Ø³', 'Ù…Ø¹Ù„Ù…', 'Ù…Ø­Ø§Ø¶Ø±', 'Ù…Ø¯Ø±Ø¨', 'Ù…Ø±Ø¨ÙŠ', 'Ù…ÙˆØ¬Ù‡'] },
                { main: 'Ø·Ø¨Ø§Ø®', impostor: 'Ø®Ø¨Ø§Ø²', options: ['Ø´ÙŠÙ', 'Ø·Ø¨Ø§Ø®', 'Ø­Ù„ÙˆØ§Ù†ÙŠ', 'Ø¹Ø§Ù…Ù„', 'Ù…Ø³Ø§Ø¹Ø¯', 'Ù…ØªØ¯Ø±Ø¨'] },
                { main: 'Ù…Ø­Ø§Ù…ÙŠ', impostor: 'Ù‚Ø§Ø¶ÙŠ', options: ['Ù…Ø­Ø§Ù…ÙŠ', 'ÙˆÙƒÙŠÙ„', 'Ù…Ø³ØªØ´Ø§Ø±', 'Ø®Ø¨ÙŠØ±', 'Ù…Ø­Ù‚Ù‚', 'Ù…Ø¯Ø¹ÙŠ'] },
                { main: 'Ù…Ø¨Ø±Ù…Ø¬', impostor: 'Ù…Ø·ÙˆØ±', options: ['Ù…ØµÙ…Ù…', 'Ù…Ø¨Ø±Ù…Ø¬', 'Ù…Ø­Ù„Ù„', 'ØªÙ‚Ù†ÙŠ', 'Ù…Ø¯ÙŠØ±', 'Ù…Ù‡Ù†Ø¯Ø³'] }
            ],
            'Ù…Ø¯Ù† Ø³Ø¹ÙˆØ¯ÙŠØ©': [
  { main: 'Ø§Ù„Ø±ÙŠØ§Ø¶', impostor: 'Ø§Ù„Ø®Ø±Ø¬', options: ['Ø§Ù„Ø±ÙŠØ§Ø¶','Ø§Ù„Ø®Ø±Ø¬','Ø¬Ø¯Ø©','Ù…ÙƒØ©','Ø§Ù„Ø¯Ù…Ø§Ù…','Ø§Ù„Ø·Ø§Ø¦Ù'] },
  { main: 'Ø¬Ø¯Ø©', impostor: 'Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©', options: ['Ø¬Ø¯Ø©','Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©','Ù…ÙƒØ©','Ø§Ù„Ø·Ø§Ø¦Ù','ÙŠÙ†Ø¨Ø¹','Ø§Ù„Ø±ÙŠØ§Ø¶'] },
  { main: 'Ù…ÙƒØ©', impostor: 'Ø¬Ø¯Ø©', options: ['Ù…ÙƒØ©','Ø¬Ø¯Ø©','Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©','Ø§Ù„Ø·Ø§Ø¦Ù','ØªØ¨ÙˆÙƒ','Ù†Ø¬Ø±Ø§Ù†'] },
  { main: 'Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©', impostor: 'ÙŠÙ†Ø¨Ø¹', options: ['Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©','ÙŠÙ†Ø¨Ø¹','Ù…ÙƒØ©','Ø¬Ø¯Ø©','Ø­Ø§Ø¦Ù„','Ø§Ù„Ù‚ØµÙŠÙ…'] },
  { main: 'Ø§Ù„Ø¯Ù…Ø§Ù…', impostor: 'Ø§Ù„Ø®Ø¨Ø±', options: ['Ø§Ù„Ø¯Ù…Ø§Ù…','Ø§Ù„Ø®Ø¨Ø±','Ø§Ù„Ø¬Ø¨ÙŠÙ„','Ø§Ù„Ø£Ø­Ø³Ø§Ø¡','Ø­ÙØ± Ø§Ù„Ø¨Ø§Ø·Ù†','Ø§Ù„Ø±ÙŠØ§Ø¶'] },
  { main: 'Ø§Ù„Ø®Ø¨Ø±', impostor: 'Ø§Ù„Ø¬Ø¨ÙŠÙ„', options: ['Ø§Ù„Ø®Ø¨Ø±','Ø§Ù„Ø¬Ø¨ÙŠÙ„','Ø§Ù„Ø¯Ù…Ø§Ù…','Ø§Ù„Ø£Ø­Ø³Ø§Ø¡','Ø§Ù„Ù‚Ø·ÙŠÙ','Ø¨Ù‚ÙŠÙ‚'] },
  { main: 'Ø§Ù„Ø£Ø­Ø³Ø§Ø¡', impostor: 'Ø¨Ù‚ÙŠÙ‚', options: ['Ø§Ù„Ø£Ø­Ø³Ø§Ø¡','Ø¨Ù‚ÙŠÙ‚','Ø§Ù„Ø¯Ù…Ø§Ù…','Ø§Ù„Ø¬Ø¨ÙŠÙ„','Ø§Ù„Ù‚Ø·ÙŠÙ','Ø­ÙØ± Ø§Ù„Ø¨Ø§Ø·Ù†'] },
  { main: 'Ø§Ù„Ø·Ø§Ø¦Ù', impostor: 'Ø§Ù„Ø¨Ø§Ø­Ø©', options: ['Ø§Ù„Ø·Ø§Ø¦Ù','Ø§Ù„Ø¨Ø§Ø­Ø©','Ø£Ø¨Ù‡Ø§','Ù…ÙƒØ©','Ø§Ù„Ø±ÙŠØ§Ø¶','Ø¬ÙŠØ²Ø§Ù†'] },
  { main: 'Ø£Ø¨Ù‡Ø§', impostor: 'Ø®Ù…ÙŠØ³ Ù…Ø´ÙŠØ·', options: ['Ø£Ø¨Ù‡Ø§','Ø®Ù…ÙŠØ³ Ù…Ø´ÙŠØ·','Ø§Ù„Ø¨Ø§Ø­Ø©','Ù†Ø¬Ø±Ø§Ù†','Ø¬ÙŠØ²Ø§Ù†','Ø§Ù„Ø·Ø§Ø¦Ù'] },
  { main: 'Ø®Ù…ÙŠØ³ Ù…Ø´ÙŠØ·', impostor: 'Ù†Ø¬Ø±Ø§Ù†', options: ['Ø®Ù…ÙŠØ³ Ù…Ø´ÙŠØ·','Ù†Ø¬Ø±Ø§Ù†','Ø£Ø¨Ù‡Ø§','Ø¬ÙŠØ²Ø§Ù†','Ø­Ø§Ø¦Ù„','ØªØ¨ÙˆÙƒ'] },
  { main: 'Ø¬ÙŠØ²Ø§Ù†', impostor: 'Ù†Ø¬Ø±Ø§Ù†', options: ['Ø¬ÙŠØ²Ø§Ù†','Ù†Ø¬Ø±Ø§Ù†','Ø£Ø¨Ù‡Ø§','Ø§Ù„Ø¨Ø§Ø­Ø©','Ø§Ù„Ø·Ø§Ø¦Ù','ØªØ¨ÙˆÙƒ'] },
  { main: 'Ù†Ø¬Ø±Ø§Ù†', impostor: 'Ø³ÙƒØ§ÙƒØ§', options: ['Ù†Ø¬Ø±Ø§Ù†','Ø³ÙƒØ§ÙƒØ§','Ø¬ÙŠØ²Ø§Ù†','ØªØ¨ÙˆÙƒ','Ø­Ø§Ø¦Ù„','Ø§Ù„Ù‚ØµÙŠÙ…'] },
  { main: 'ØªØ¨ÙˆÙƒ', impostor: 'Ø­Ø§Ø¦Ù„', options: ['ØªØ¨ÙˆÙƒ','Ø­Ø§Ø¦Ù„','Ø³ÙƒØ§ÙƒØ§','Ø§Ù„Ù‚ØµÙŠÙ…','Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©','Ø§Ù„Ø·Ø§Ø¦Ù'] },
  { main: 'Ø­Ø§Ø¦Ù„', impostor: 'Ø³ÙƒØ§ÙƒØ§', options: ['Ø­Ø§Ø¦Ù„','Ø³ÙƒØ§ÙƒØ§','ØªØ¨ÙˆÙƒ','Ø§Ù„Ù‚ØµÙŠÙ…','Ø¹Ø±Ø¹Ø±','Ø§Ù„Ø¬ÙˆÙ'] },
  { main: 'Ø³ÙƒØ§ÙƒØ§', impostor: 'Ø¹Ø±Ø¹Ø±', options: ['Ø³ÙƒØ§ÙƒØ§','Ø¹Ø±Ø¹Ø±','Ø­Ø§Ø¦Ù„','ØªØ¨ÙˆÙƒ','Ø§Ù„Ù‚ØµÙŠÙ…','Ø§Ù„Ø±ÙŠØ§Ø¶'] },
  { main: 'Ø¹Ø±Ø¹Ø±', impostor: 'Ø³ÙƒØ§ÙƒØ§', options: ['Ø¹Ø±Ø¹Ø±','Ø³ÙƒØ§ÙƒØ§','Ø­Ø§Ø¦Ù„','ØªØ¨ÙˆÙƒ','Ø§Ù„Ø¯Ù…Ø§Ù…','Ø§Ù„Ø±ÙŠØ§Ø¶'] },
  { main: 'Ø¨Ø±ÙŠØ¯Ø©', impostor: 'Ø¹Ù†ÙŠØ²Ø©', options: ['Ø¨Ø±ÙŠØ¯Ø©','Ø¹Ù†ÙŠØ²Ø©','Ø§Ù„Ø±Ø³','Ø§Ù„Ø±ÙŠØ§Ø¶','Ø­Ø§Ø¦Ù„','ØªØ¨ÙˆÙƒ'] },
  { main: 'Ø¹Ù†ÙŠØ²Ø©', impostor: 'Ø§Ù„Ø±Ø³', options: ['Ø¹Ù†ÙŠØ²Ø©','Ø§Ù„Ø±Ø³','Ø¨Ø±ÙŠØ¯Ø©','Ø­Ø§Ø¦Ù„','Ø§Ù„Ø·Ø§Ø¦Ù','Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©'] },
  { main: 'ÙŠÙ†Ø¨Ø¹', impostor: 'Ø£Ù…Ù„Ø¬', options: ['ÙŠÙ†Ø¨Ø¹','Ø£Ù…Ù„Ø¬','Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©','ØªØ¨ÙˆÙƒ','Ø¬Ø¯Ø©','Ù…ÙƒØ©'] },
  { main: 'Ø£Ù…Ù„Ø¬', impostor: 'ÙŠÙ†Ø¨Ø¹', options: ['Ø£Ù…Ù„Ø¬','ÙŠÙ†Ø¨Ø¹','ØªØ¨ÙˆÙƒ','Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©','Ø¬Ø¯Ø©','Ø§Ù„Ø·Ø§Ø¦Ù'] }
],

'Ø¯ÙˆÙ„': [
  { main: 'Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©', impostor: 'Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª', options: ['Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©','Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª','Ù‚Ø·Ø±','Ø§Ù„ÙƒÙˆÙŠØª','Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†','Ø¹Ù…Ø§Ù†'] },
  { main: 'Ù…ØµØ±', impostor: 'Ø§Ù„Ù…ØºØ±Ø¨', options: ['Ù…ØµØ±','Ø§Ù„Ù…ØºØ±Ø¨','ØªÙˆÙ†Ø³','Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±','Ù„ÙŠØ¨ÙŠØ§','Ø§Ù„Ø³ÙˆØ¯Ø§Ù†'] },
  { main: 'Ø§Ù„Ø£Ø±Ø¯Ù†', impostor: 'Ù„Ø¨Ù†Ø§Ù†', options: ['Ø§Ù„Ø£Ø±Ø¯Ù†','Ù„Ø¨Ù†Ø§Ù†','Ø³ÙˆØ±ÙŠØ§','Ø§Ù„Ø¹Ø±Ø§Ù‚','ÙÙ„Ø³Ø·ÙŠÙ†','Ù…ØµØ±'] },
  { main: 'ØªØ±ÙƒÙŠØ§', impostor: 'Ø§Ù„ÙŠÙˆÙ†Ø§Ù†', options: ['ØªØ±ÙƒÙŠØ§','Ø§Ù„ÙŠÙˆÙ†Ø§Ù†','Ø¨Ù„ØºØ§Ø±ÙŠØ§','Ø¬ÙˆØ±Ø¬ÙŠØ§','Ø£Ø°Ø±Ø¨ÙŠØ¬Ø§Ù†','Ø¥ÙŠØ±Ø§Ù†'] },
  { main: 'ÙØ±Ù†Ø³Ø§', impostor: 'Ø¥ÙŠØ·Ø§Ù„ÙŠØ§', options: ['ÙØ±Ù†Ø³Ø§','Ø¥ÙŠØ·Ø§Ù„ÙŠØ§','Ø¥Ø³Ø¨Ø§Ù†ÙŠØ§','Ø£Ù„Ù…Ø§Ù†ÙŠØ§','Ù‡ÙˆÙ„Ù†Ø¯Ø§','Ø³ÙˆÙŠØ³Ø±Ø§'] },
  { main: 'Ø¨Ø±ÙŠØ·Ø§Ù†ÙŠØ§', impostor: 'Ø£ÙŠØ±Ù„Ù†Ø¯Ø§', options: ['Ø¨Ø±ÙŠØ·Ø§Ù†ÙŠØ§','Ø£ÙŠØ±Ù„Ù†Ø¯Ø§','ÙØ±Ù†Ø³Ø§','Ø¨Ù„Ø¬ÙŠÙƒØ§','Ù‡ÙˆÙ„Ù†Ø¯Ø§','Ø£Ù„Ù…Ø§Ù†ÙŠØ§'] },
  { main: 'Ø£Ù…Ø±ÙŠÙƒØ§', impostor: 'ÙƒÙ†Ø¯Ø§', options: ['Ø£Ù…Ø±ÙŠÙƒØ§','ÙƒÙ†Ø¯Ø§','Ø§Ù„Ù…ÙƒØ³ÙŠÙƒ','Ø§Ù„Ø¨Ø±Ø§Ø²ÙŠÙ„','Ø§Ù„Ø£Ø±Ø¬Ù†ØªÙŠÙ†','ØªØ´ÙŠÙ„ÙŠ'] },
  { main: 'Ø§Ù„Ø¨Ø±Ø§Ø²ÙŠÙ„', impostor: 'Ø§Ù„Ø£Ø±Ø¬Ù†ØªÙŠÙ†', options: ['Ø§Ù„Ø¨Ø±Ø§Ø²ÙŠÙ„','Ø§Ù„Ø£Ø±Ø¬Ù†ØªÙŠÙ†','Ø£Ù…Ø±ÙŠÙƒØ§','ÙƒÙ†Ø¯Ø§','Ø¥Ø³Ø¨Ø§Ù†ÙŠØ§','Ø§Ù„Ø¨Ø±ØªØºØ§Ù„'] },
  { main: 'Ø§Ù„ÙŠØ§Ø¨Ø§Ù†', impostor: 'ÙƒÙˆØ±ÙŠØ§ Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ©', options: ['Ø§Ù„ÙŠØ§Ø¨Ø§Ù†','ÙƒÙˆØ±ÙŠØ§ Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ©','Ø§Ù„ØµÙŠÙ†','Ø§Ù„Ù‡Ù†Ø¯','ØªØ§ÙŠÙ„Ù†Ø¯','Ø³Ù†ØºØ§ÙÙˆØ±Ø©'] },
  { main: 'Ø§Ù„ØµÙŠÙ†', impostor: 'Ø§Ù„Ù‡Ù†Ø¯', options: ['Ø§Ù„ØµÙŠÙ†','Ø§Ù„Ù‡Ù†Ø¯','Ø§Ù„ÙŠØ§Ø¨Ø§Ù†','ÙƒÙˆØ±ÙŠØ§ Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ©','ÙÙŠØªÙ†Ø§Ù…','Ù…Ø§Ù„ÙŠØ²ÙŠØ§'] },
  { main: 'Ø£Ø³ØªØ±Ø§Ù„ÙŠØ§', impostor: 'Ù†ÙŠÙˆØ²ÙŠÙ„Ù†Ø¯Ø§', options: ['Ø£Ø³ØªØ±Ø§Ù„ÙŠØ§','Ù†ÙŠÙˆØ²ÙŠÙ„Ù†Ø¯Ø§','Ø¨Ø±ÙŠØ·Ø§Ù†ÙŠØ§','ÙƒÙ†Ø¯Ø§','Ø£Ù…Ø±ÙŠÙƒØ§','Ø§Ù„ÙŠØ§Ø¨Ø§Ù†'] },
  { main: 'Ø±ÙˆØ³ÙŠØ§', impostor: 'Ø£ÙˆÙƒØ±Ø§Ù†ÙŠØ§', options: ['Ø±ÙˆØ³ÙŠØ§','Ø£ÙˆÙƒØ±Ø§Ù†ÙŠØ§','Ø¨ÙˆÙ„Ù†Ø¯Ø§','Ø£Ù„Ù…Ø§Ù†ÙŠØ§','ØªØ±ÙƒÙŠØ§','Ø±ÙˆÙ…Ø§Ù†ÙŠØ§'] },
  { main: 'Ø¥ÙŠØ±Ø§Ù†', impostor: 'Ø§Ù„Ø¹Ø±Ø§Ù‚', options: ['Ø¥ÙŠØ±Ø§Ù†','Ø§Ù„Ø¹Ø±Ø§Ù‚','ØªØ±ÙƒÙŠØ§','Ø³ÙˆØ±ÙŠØ§','Ø§Ù„Ø£Ø±Ø¯Ù†','Ø§Ù„ÙƒÙˆÙŠØª'] },
  { main: 'Ø¨Ø§ÙƒØ³ØªØ§Ù†', impostor: 'Ø£ÙØºØ§Ù†Ø³ØªØ§Ù†', options: ['Ø¨Ø§ÙƒØ³ØªØ§Ù†','Ø£ÙØºØ§Ù†Ø³ØªØ§Ù†','Ø§Ù„Ù‡Ù†Ø¯','Ø§Ù„ØµÙŠÙ†','Ø¥ÙŠØ±Ø§Ù†','ØªØ±ÙƒÙŠØ§'] },
  { main: 'Ø¥Ù†Ø¯ÙˆÙ†ÙŠØ³ÙŠØ§', impostor: 'Ù…Ø§Ù„ÙŠØ²ÙŠØ§', options: ['Ø¥Ù†Ø¯ÙˆÙ†ÙŠØ³ÙŠØ§','Ù…Ø§Ù„ÙŠØ²ÙŠØ§','Ø³Ù†ØºØ§ÙÙˆØ±Ø©','ØªØ§ÙŠÙ„Ù†Ø¯','Ø§Ù„ÙÙ„Ø¨ÙŠÙ†','ÙÙŠØªÙ†Ø§Ù…'] },
  { main: 'Ø¥Ø³Ø¨Ø§Ù†ÙŠØ§', impostor: 'Ø§Ù„Ø¨Ø±ØªØºØ§Ù„', options: ['Ø¥Ø³Ø¨Ø§Ù†ÙŠØ§','Ø§Ù„Ø¨Ø±ØªØºØ§Ù„','ÙØ±Ù†Ø³Ø§','Ø¥ÙŠØ·Ø§Ù„ÙŠØ§','Ø£Ù„Ù…Ø§Ù†ÙŠØ§','Ù‡ÙˆÙ„Ù†Ø¯Ø§'] },
  { main: 'Ø§Ù„Ø³ÙˆÙŠØ¯', impostor: 'Ø§Ù„Ù†Ø±ÙˆÙŠØ¬', options: ['Ø§Ù„Ø³ÙˆÙŠØ¯','Ø§Ù„Ù†Ø±ÙˆÙŠØ¬','ÙÙ†Ù„Ù†Ø¯Ø§','Ø§Ù„Ø¯Ù†Ù…Ø§Ø±Ùƒ','Ø£Ù„Ù…Ø§Ù†ÙŠØ§','Ù‡ÙˆÙ„Ù†Ø¯Ø§'] },
  { main: 'Ø³ÙˆÙŠØ³Ø±Ø§', impostor: 'Ø§Ù„Ù†Ù…Ø³Ø§', options: ['Ø³ÙˆÙŠØ³Ø±Ø§','Ø§Ù„Ù†Ù…Ø³Ø§','Ø£Ù„Ù…Ø§Ù†ÙŠØ§','ÙØ±Ù†Ø³Ø§','Ø¥ÙŠØ·Ø§Ù„ÙŠØ§','Ø¨Ù„Ø¬ÙŠÙƒØ§'] },
  { main: 'Ø¬Ù†ÙˆØ¨ Ø£ÙØ±ÙŠÙ‚ÙŠØ§', impostor: 'Ù†ÙŠØ¬ÙŠØ±ÙŠØ§', options: ['Ø¬Ù†ÙˆØ¨ Ø£ÙØ±ÙŠÙ‚ÙŠØ§','Ù†ÙŠØ¬ÙŠØ±ÙŠØ§','Ù…ØµØ±','Ø§Ù„Ù…ØºØ±Ø¨','ÙƒÙŠÙ†ÙŠØ§','Ø¥Ø«ÙŠÙˆØ¨ÙŠØ§'] },
  { main: 'Ø§Ù„Ø£Ø±Ø¬Ù†ØªÙŠÙ†', impostor: 'ØªØ´ÙŠÙ„ÙŠ', options: ['Ø§Ù„Ø£Ø±Ø¬Ù†ØªÙŠÙ†','ØªØ´ÙŠÙ„ÙŠ','Ø§Ù„Ø¨Ø±Ø§Ø²ÙŠÙ„','Ø¨ÙŠØ±Ùˆ','ÙƒÙˆÙ„ÙˆÙ…Ø¨ÙŠØ§','Ø£ÙˆØ±ÙˆØ¬ÙˆØ§ÙŠ'] }
],

'Ø£Ø«Ø§Ø«': [
  { main: 'ÙƒÙ†Ø¨Ø©', impostor: 'ÙƒØ±Ø³ÙŠ', options: ['ÙƒÙ†Ø¨Ø©','ÙƒØ±Ø³ÙŠ','Ø·Ø§ÙˆÙ„Ø©','Ø³Ø±ÙŠØ±','Ø¯ÙˆÙ„Ø§Ø¨','Ù…ÙƒØªØ¨'] },
  { main: 'Ø³Ø±ÙŠØ±', impostor: 'ÙƒÙ†Ø¨Ø©', options: ['Ø³Ø±ÙŠØ±','ÙƒÙ†Ø¨Ø©','ÙƒØ±Ø³ÙŠ','ÙƒÙˆÙ…ÙˆØ¯','ØªØ³Ø±ÙŠØ­Ø©','Ø¯ÙˆÙ„Ø§Ø¨'] },
  { main: 'Ø¯ÙˆÙ„Ø§Ø¨', impostor: 'Ø®Ø²Ø§Ù†Ø©', options: ['Ø¯ÙˆÙ„Ø§Ø¨','Ø®Ø²Ø§Ù†Ø©','Ù…ÙƒØªØ¨Ø©','ØªØ³Ø±ÙŠØ­Ø©','Ø³Ø±ÙŠØ±','ÙƒØ±Ø³ÙŠ'] },
  { main: 'Ø·Ø§ÙˆÙ„Ø©', impostor: 'Ù…ÙƒØªØ¨', options: ['Ø·Ø§ÙˆÙ„Ø©','Ù…ÙƒØªØ¨','ÙƒØ±Ø³ÙŠ','ÙƒÙ†Ø¨Ø©','Ù…ÙƒØªØ¨Ø©','ØªÙ„ÙØ§Ø²'] },
  { main: 'Ù…ÙƒØªØ¨Ø©', impostor: 'Ø±Ù', options: ['Ù…ÙƒØªØ¨Ø©','Ø±Ù','Ø¯ÙˆÙ„Ø§Ø¨','Ø·Ø§ÙˆÙ„Ø©','Ù…ÙƒØªØ¨','ÙƒØ±Ø³ÙŠ'] },
  { main: 'ØªØ³Ø±ÙŠØ­Ø©', impostor: 'ÙƒÙˆÙ…ÙˆØ¯', options: ['ØªØ³Ø±ÙŠØ­Ø©','ÙƒÙˆÙ…ÙˆØ¯','Ø³Ø±ÙŠØ±','Ø¯ÙˆÙ„Ø§Ø¨','ÙƒØ±Ø³ÙŠ','Ù…Ø±Ø¢Ø©'] },
  { main: 'Ù…ÙƒØªØ¨', impostor: 'Ø·Ø§ÙˆÙ„Ø©', options: ['Ù…ÙƒØªØ¨','Ø·Ø§ÙˆÙ„Ø©','ÙƒØ±Ø³ÙŠ','Ù…ÙƒØªØ¨Ø©','Ø±Ù','Ø£Ø±ÙŠÙƒØ©'] },
  { main: 'ÙƒØ±Ø³ÙŠ', impostor: 'Ù…Ù‚Ø¹Ø¯', options: ['ÙƒØ±Ø³ÙŠ','Ù…Ù‚Ø¹Ø¯','ÙƒÙ†Ø¨Ø©','Ø·Ø§ÙˆÙ„Ø©','Ù…ÙƒØªØ¨','Ø³Ø±ÙŠØ±'] },
  { main: 'Ø³Ø¬Ø§Ø¯Ø©', impostor: 'Ù…ÙˆÙƒÙŠØª', options: ['Ø³Ø¬Ø§Ø¯Ø©','Ù…ÙˆÙƒÙŠØª','Ø³ØªØ§Ø±Ø©','Ø·Ø§ÙˆÙ„Ø©','ÙƒÙ†Ø¨Ø©','ÙƒØ±Ø³ÙŠ'] },
  { main: 'Ø³ØªØ§Ø±Ø©', impostor: 'Ø´Ø¨Ù‘Ø§Ùƒ', options: ['Ø³ØªØ§Ø±Ø©','Ø´Ø¨Ù‘Ø§Ùƒ','Ø³Ø¬Ø§Ø¯Ø©','ÙƒÙ†Ø¨Ø©','Ø·Ø§ÙˆÙ„Ø©','Ù…ÙƒØªØ¨Ø©'] },
  { main: 'Ù…Ø±Ø¢Ø©', impostor: 'Ù„ÙˆØ­Ø©', options: ['Ù…Ø±Ø¢Ø©','Ù„ÙˆØ­Ø©','ØªØ³Ø±ÙŠØ­Ø©','ÙƒÙˆÙ…ÙˆØ¯','ÙƒÙ†Ø¨Ø©','Ø·Ø§ÙˆÙ„Ø©'] },
  { main: 'ÙƒÙˆÙ…ÙˆØ¯', impostor: 'ØªØ³Ø±ÙŠØ­Ø©', options: ['ÙƒÙˆÙ…ÙˆØ¯','ØªØ³Ø±ÙŠØ­Ø©','Ø³Ø±ÙŠØ±','Ø¯ÙˆÙ„Ø§Ø¨','Ù…Ø±Ø¢Ø©','ÙƒØ±Ø³ÙŠ'] },
  { main: 'Ø¥Ø¶Ø§Ø¡Ø© Ø£Ø±Ø¶ÙŠØ©', impostor: 'Ù…ØµØ¨Ø§Ø­', options: ['Ø¥Ø¶Ø§Ø¡Ø© Ø£Ø±Ø¶ÙŠØ©','Ù…ØµØ¨Ø§Ø­','Ø«Ø±ÙŠØ§','Ø£Ø¨Ø§Ø¬ÙˆØ±Ø©','Ø·Ø§ÙˆÙ„Ø©','ÙƒÙ†Ø¨Ø©'] },
  { main: 'Ø£Ø¨Ø§Ø¬ÙˆØ±Ø©', impostor: 'Ù…ØµØ¨Ø§Ø­', options: ['Ø£Ø¨Ø§Ø¬ÙˆØ±Ø©','Ù…ØµØ¨Ø§Ø­','Ø¥Ø¶Ø§Ø¡Ø© Ø£Ø±Ø¶ÙŠØ©','Ø«Ø±ÙŠØ§','ÙƒØ±Ø³ÙŠ','Ù…ÙƒØªØ¨'] },
  { main: 'Ø«Ø±ÙŠØ§', impostor: 'Ù…ØµØ¨Ø§Ø­', options: ['Ø«Ø±ÙŠØ§','Ù…ØµØ¨Ø§Ø­','Ø£Ø¨Ø§Ø¬ÙˆØ±Ø©','Ø¥Ø¶Ø§Ø¡Ø© Ø£Ø±Ø¶ÙŠØ©','Ø³ØªØ§Ø±Ø©','Ø³Ø¬Ø§Ø¯Ø©'] },
  { main: 'Ø±Ù', impostor: 'Ù…ÙƒØªØ¨Ø©', options: ['Ø±Ù','Ù…ÙƒØªØ¨Ø©','Ø¯ÙˆÙ„Ø§Ø¨','Ø·Ø§ÙˆÙ„Ø©','Ù…ÙƒØªØ¨','ÙƒØ±Ø³ÙŠ'] },
  { main: 'Ø·Ø§ÙˆÙ„Ø© Ù‚Ù‡ÙˆØ©', impostor: 'Ø·Ø§ÙˆÙ„Ø© Ø¬Ø§Ù†Ø¨ÙŠØ©', options: ['Ø·Ø§ÙˆÙ„Ø© Ù‚Ù‡ÙˆØ©','Ø·Ø§ÙˆÙ„Ø© Ø¬Ø§Ù†Ø¨ÙŠØ©','ÙƒÙ†Ø¨Ø©','ÙƒØ±Ø³ÙŠ','Ø³Ø¬Ø§Ø¯Ø©','Ù…ÙƒØªØ¨Ø©'] },
  { main: 'Ø·Ø§ÙˆÙ„Ø© Ø¬Ø§Ù†Ø¨ÙŠØ©', impostor: 'Ø·Ø§ÙˆÙ„Ø© Ù‚Ù‡ÙˆØ©', options: ['Ø·Ø§ÙˆÙ„Ø© Ø¬Ø§Ù†Ø¨ÙŠØ©','Ø·Ø§ÙˆÙ„Ø© Ù‚Ù‡ÙˆØ©','ÙƒÙ†Ø¨Ø©','ÙƒØ±Ø³ÙŠ','Ø£Ø¨Ø§Ø¬ÙˆØ±Ø©','Ø³Ø¬Ø§Ø¯Ø©'] },
  { main: 'ØµÙ†Ø¯ÙˆÙ‚ ØªØ®Ø²ÙŠÙ†', impostor: 'Ø³Ù„Ø©', options: ['ØµÙ†Ø¯ÙˆÙ‚ ØªØ®Ø²ÙŠÙ†','Ø³Ù„Ø©','Ø¯ÙˆÙ„Ø§Ø¨','Ø±Ù','Ù…ÙƒØªØ¨Ø©','Ø·Ø§ÙˆÙ„Ø©'] },
  { main: 'Ù„ÙˆØ­Ø© Ø¬Ø¯Ø§Ø±ÙŠØ©', impostor: 'Ù…Ø±Ø¢Ø©', options: ['Ù„ÙˆØ­Ø© Ø¬Ø¯Ø§Ø±ÙŠØ©','Ù…Ø±Ø¢Ø©','Ø³ØªØ§Ø±Ø©','Ø³Ø¬Ø§Ø¯Ø©','ÙƒÙ†Ø¨Ø©','Ø·Ø§ÙˆÙ„Ø©'] }
],

'Ù…Ø³Ù„Ø³Ù„Ø§Øª': [
  { main: 'Ø¨Ø§Ø¨ Ø§Ù„Ø­Ø§Ø±Ø©', impostor: 'Ø¶ÙŠØ¹Ø© Ø¶Ø§ÙŠØ¹Ø©', options: ['Ø¨Ø§Ø¨ Ø§Ù„Ø­Ø§Ø±Ø©','Ø¶ÙŠØ¹Ø© Ø¶Ø§ÙŠØ¹Ø©','Ø§Ù„Ø¹Ø§ØµÙˆÙ','Ø·Ø§Ø´ Ù…Ø§ Ø·Ø§Ø´','Ø§Ù„Ù‡ÙŠØ¨Ø©','Ø±Ø´Ø§Ø´'] },
  { main: 'Ø·Ø§Ø´ Ù…Ø§ Ø·Ø§Ø´', impostor: 'Ø³ÙŠÙ„ÙÙŠ', options: ['Ø·Ø§Ø´ Ù…Ø§ Ø·Ø§Ø´','Ø³ÙŠÙ„ÙÙŠ','Ù…Ø®Ø±Ø¬ 7','Ø´Ø¨Ø§Ø¨ Ø§Ù„Ø¨ÙˆÙ…Ø¨','Ø§Ù„Ø¹Ø§ØµÙˆÙ','Ø±Ø´Ø§Ø´'] },
  { main: 'Ø§Ù„Ø¹Ø§ØµÙˆÙ', impostor: 'Ø´Ø¨Ø§Ø¨ Ø§Ù„Ø¨ÙˆÙ…Ø¨', options: ['Ø§Ù„Ø¹Ø§ØµÙˆÙ','Ø´Ø¨Ø§Ø¨ Ø§Ù„Ø¨ÙˆÙ…Ø¨','Ù…Ø®Ø±Ø¬ 7','Ø·Ø§Ø´ Ù…Ø§ Ø·Ø§Ø´','Ø¨Ø§Ø¨ Ø§Ù„Ø­Ø§Ø±Ø©','Ø§Ù„Ù‡ÙŠØ¨Ø©'] },
  { main: 'Ø±Ø´Ø§Ø´', impostor: 'Ø§Ù„Ù‡ÙŠØ¨Ø©', options: ['Ø±Ø´Ø§Ø´','Ø§Ù„Ù‡ÙŠØ¨Ø©','Ø§Ù„Ø¹Ø§ØµÙˆÙ','Ø¨Ø§Ø¨ Ø§Ù„Ø­Ø§Ø±Ø©','ÙØ±ÙŠÙ†Ø¯Ø²','Ù„Ø§ÙƒØ§Ø³Ø§ Ø¯ÙŠ Ø¨Ø§Ø¨ÙŠÙ„'] },
  { main: 'Ø§Ù„Ù‡ÙŠØ¨Ø©', impostor: 'Ø¨Ø§Ø¨ Ø§Ù„Ø­Ø§Ø±Ø©', options: ['Ø§Ù„Ù‡ÙŠØ¨Ø©','Ø¨Ø§Ø¨ Ø§Ù„Ø­Ø§Ø±Ø©','Ø±Ø´Ø§Ø´','Ø§Ù„Ø¹Ø§ØµÙˆÙ','Ø¨Ø±Ù‘ÙŠÙƒÙ†Ù‚ Ø¨Ø§Ø¯','Ø¯Ø§Ø±Ùƒ'] },
  { main: 'Ù„Ø¹Ø¨Ø© Ø§Ù„Ø­Ø¨Ø§Ø±', impostor: 'Ù„Ø§ÙƒØ§Ø³Ø§ Ø¯ÙŠ Ø¨Ø§Ø¨ÙŠÙ„', options: ['Ù„Ø¹Ø¨Ø© Ø§Ù„Ø­Ø¨Ø§Ø±','Ù„Ø§ÙƒØ§Ø³Ø§ Ø¯ÙŠ Ø¨Ø§Ø¨ÙŠÙ„','Ø¯Ø§Ø±Ùƒ','Ø´ÙŠØ±Ù„ÙˆÙƒ','ÙØ±ÙŠÙ†Ø¯Ø²','Ø¨Ø±ÙŠÙƒÙ†Ù‚ Ø¨Ø§Ø¯'] },
  { main: 'ÙØ±ÙŠÙ†Ø¯Ø²', impostor: 'Ù‡Ø§Ùˆ Ø¢ÙŠ Ù…Øª ÙŠÙˆØ± Ù…Ø§Ø°Ø±', options: ['ÙØ±ÙŠÙ†Ø¯Ø²','Ù‡Ø§Ùˆ Ø¢ÙŠ Ù…Øª ÙŠÙˆØ± Ù…Ø§Ø°Ø±','Ø°Ø§ Ø£ÙˆÙÙŠØ³','Ø´ÙŠØ±Ù„ÙˆÙƒ','Ø¯Ø§Ø±Ùƒ','Ø¨Ø±ÙŠÙƒÙ†Ù‚ Ø¨Ø§Ø¯'] },
  { main: 'Ø°Ø§ Ø£ÙˆÙÙŠØ³', impostor: 'Ø¨Ø§Ø±ÙƒØ³ Ø¢Ù†Ø¯ Ø±ÙŠÙƒ', options: ['Ø°Ø§ Ø£ÙˆÙÙŠØ³','Ø¨Ø§Ø±ÙƒØ³ Ø¢Ù†Ø¯ Ø±ÙŠÙƒ','ÙØ±ÙŠÙ†Ø¯Ø²','Ù…ÙˆØ¯Ø±Ù† ÙØ§Ù…ÙŠÙ„ÙŠ','Ø¨ÙŠØº Ø¨Ø§Ù†Øº','Ø´ÙŠØ±Ù„ÙˆÙƒ'] },
  { main: 'Ø¨Ø±ÙŠÙƒÙ†Ù‚ Ø¨Ø§Ø¯', impostor: 'Ø¨ÙŠØªØ± ÙƒÙˆÙ„ Ø³ÙˆÙ„', options: ['Ø¨Ø±ÙŠÙƒÙ†Ù‚ Ø¨Ø§Ø¯','Ø¨ÙŠØªØ± ÙƒÙˆÙ„ Ø³ÙˆÙ„','Ø¯Ø§Ø±Ùƒ','Ø´ÙŠØ±Ù„ÙˆÙƒ','Ù„Ø§ÙˆØ³Øª','ÙØ§ÙŠÙƒÙ†ØºØ²'] },
  { main: 'Ø¯Ø§Ø±Ùƒ', impostor: 'Ù„Ø§ÙˆØ³Øª', options: ['Ø¯Ø§Ø±Ùƒ','Ù„Ø§ÙˆØ³Øª','Ø´ÙŠØ±Ù„ÙˆÙƒ','Ù„Ø§ÙƒØ§Ø³Ø§ Ø¯ÙŠ Ø¨Ø§Ø¨ÙŠÙ„','Ù„Ø¹Ø¨Ø© Ø§Ù„Ø­Ø¨Ø§Ø±','Ø¨ÙŠÙƒÙŠ Ø¨Ù„Ø§ÙŠÙ†Ø¯Ø±Ø²'] },
  { main: 'Ø´ÙŠØ±Ù„ÙˆÙƒ', impostor: 'Ø¯ÙƒØªÙˆØ± Ù‡Ø§ÙˆØ³', options: ['Ø´ÙŠØ±Ù„ÙˆÙƒ','Ø¯ÙƒØªÙˆØ± Ù‡Ø§ÙˆØ³','Ø¯Ø§Ø±Ùƒ','ÙØ±ÙŠÙ†Ø¯Ø²','Ø°Ø§ Ø£ÙˆÙÙŠØ³','Ø¨ÙŠØº Ø¨Ø§Ù†Øº'] },
  { main: 'Ø¨ÙŠÙƒÙŠ Ø¨Ù„Ø§ÙŠÙ†Ø¯Ø±Ø²', impostor: 'Ù†Ø§Ø±ÙƒÙˆØ³', options: ['Ø¨ÙŠÙƒÙŠ Ø¨Ù„Ø§ÙŠÙ†Ø¯Ø±Ø²','Ù†Ø§Ø±ÙƒÙˆØ³','Ù„Ø§ÙƒØ§Ø³Ø§ Ø¯ÙŠ Ø¨Ø§Ø¨ÙŠÙ„','Ø¨Ø±ÙŠÙƒÙ†Ù‚ Ø¨Ø§Ø¯','Ø¯Ø§Ø±Ùƒ','ÙØ§ÙŠÙƒÙ†ØºØ²'] },
  { main: 'Ù†Ø§Ø±ÙƒÙˆØ³', impostor: 'Ù„Ø§ÙƒØ§Ø³Ø§ Ø¯ÙŠ Ø¨Ø§Ø¨ÙŠÙ„', options: ['Ù†Ø§Ø±ÙƒÙˆØ³','Ù„Ø§ÙƒØ§Ø³Ø§ Ø¯ÙŠ Ø¨Ø§Ø¨ÙŠÙ„','Ø¨ÙŠÙƒÙŠ Ø¨Ù„Ø§ÙŠÙ†Ø¯Ø±Ø²','Ø¨Ø±ÙŠÙƒÙ†Ù‚ Ø¨Ø§Ø¯','Ø´ÙŠØ±Ù„ÙˆÙƒ','Ø¯Ø§Ø±Ùƒ'] },
  { main: 'ÙØ§ÙŠÙƒÙ†ØºØ²', impostor: 'Ù‚ÙŠØ§Ù…Ø© Ø£Ø±Ø·ØºØ±Ù„', options: ['ÙØ§ÙŠÙƒÙ†ØºØ²','Ù‚ÙŠØ§Ù…Ø© Ø£Ø±Ø·ØºØ±Ù„','Ø§Ù„Ù…Ø¤Ø³Ø³ Ø¹Ø«Ù…Ø§Ù†','Ø¨ÙŠÙƒÙŠ Ø¨Ù„Ø§ÙŠÙ†Ø¯Ø±Ø²','Ø¯Ø§Ø±Ùƒ','Ø´ÙŠØ±Ù„ÙˆÙƒ'] },
  { main: 'Ù‚ÙŠØ§Ù…Ø© Ø£Ø±Ø·ØºØ±Ù„', impostor: 'Ø§Ù„Ù…Ø¤Ø³Ø³ Ø¹Ø«Ù…Ø§Ù†', options: ['Ù‚ÙŠØ§Ù…Ø© Ø£Ø±Ø·ØºØ±Ù„','Ø§Ù„Ù…Ø¤Ø³Ø³ Ø¹Ø«Ù…Ø§Ù†','ÙØ§ÙŠÙƒÙ†ØºØ²','Ø¨Ø§Ø¨ Ø§Ù„Ø­Ø§Ø±Ø©','Ø§Ù„Ù‡ÙŠØ¨Ø©','Ø±Ø´Ø§Ø´'] },
  { main: 'Ø§Ù„Ù…Ø¤Ø³Ø³ Ø¹Ø«Ù…Ø§Ù†', impostor: 'Ù‚ÙŠØ§Ù…Ø© Ø£Ø±Ø·ØºØ±Ù„', options: ['Ø§Ù„Ù…Ø¤Ø³Ø³ Ø¹Ø«Ù…Ø§Ù†','Ù‚ÙŠØ§Ù…Ø© Ø£Ø±Ø·ØºØ±Ù„','ÙØ§ÙŠÙƒÙ†ØºØ²','Ø´ÙŠØ±Ù„ÙˆÙƒ','Ø¯Ø§Ø±Ùƒ','Ù„Ø§ÙƒØ§Ø³Ø§ Ø¯ÙŠ Ø¨Ø§Ø¨ÙŠÙ„'] },
  { main: 'Ù…ÙˆØ¯Ø±Ù† ÙØ§Ù…ÙŠÙ„ÙŠ', impostor: 'Ø¨ÙŠØº Ø¨Ø§Ù†Øº', options: ['Ù…ÙˆØ¯Ø±Ù† ÙØ§Ù…ÙŠÙ„ÙŠ','Ø¨ÙŠØº Ø¨Ø§Ù†Øº','ÙØ±ÙŠÙ†Ø¯Ø²','Ø°Ø§ Ø£ÙˆÙÙŠØ³','Ù‡Ø§Ùˆ Ø¢ÙŠ Ù…Øª ÙŠÙˆØ± Ù…Ø§Ø°Ø±','Ø´ÙŠØ±Ù„ÙˆÙƒ'] },
  { main: 'Ø¨ÙŠØº Ø¨Ø§Ù†Øº', impostor: 'Ù…ÙˆØ¯Ø±Ù† ÙØ§Ù…ÙŠÙ„ÙŠ', options: ['Ø¨ÙŠØº Ø¨Ø§Ù†Øº','Ù…ÙˆØ¯Ø±Ù† ÙØ§Ù…ÙŠÙ„ÙŠ','ÙØ±ÙŠÙ†Ø¯Ø²','Ø°Ø§ Ø£ÙˆÙÙŠØ³','Ø³ÙŠÙ„ÙÙŠ','Ø·Ø§Ø´ Ù…Ø§ Ø·Ø§Ø´'] },
  { main: 'Ù„Ø§ ÙƒØ§Ø³Ø§ Ø¯ÙŠ Ø¨Ø§Ø¨ÙŠÙ„', impostor: 'Ù„Ø¹Ø¨Ø© Ø§Ù„Ø­Ø¨Ø§Ø±', options: ['Ù„Ø§ÙƒØ§Ø³Ø§ Ø¯ÙŠ Ø¨Ø§Ø¨ÙŠÙ„','Ù„Ø¹Ø¨Ø© Ø§Ù„Ø­Ø¨Ø§Ø±','Ù†Ø§Ø±ÙƒÙˆØ³','Ø¨ÙŠÙƒÙŠ Ø¨Ù„Ø§ÙŠÙ†Ø¯Ø±Ø²','Ø¯Ø§Ø±Ùƒ','Ø´ÙŠØ±Ù„ÙˆÙƒ'] },
  { main: 'Ù„Ø§ÙˆØ³Øª', impostor: 'Ø¯Ø§Ø±Ùƒ', options: ['Ù„Ø§ÙˆØ³Øª','Ø¯Ø§Ø±Ùƒ','Ø´ÙŠØ±Ù„ÙˆÙƒ','Ø¨Ø±ÙŠÙƒÙ†Ù‚ Ø¨Ø§Ø¯','Ù†Ø§Ø±ÙƒÙˆØ³','Ù„Ø§ÙƒØ§Ø³Ø§ Ø¯ÙŠ Ø¨Ø§Ø¨ÙŠÙ„'] }
],
        'Ù„Ø§Ø¹Ø¨ÙŠÙ†': [
  { main: 'ÙƒØ±ÙŠØ³ØªÙŠØ§Ù†Ùˆ Ø±ÙˆÙ†Ø§Ù„Ø¯Ùˆ', impostor: 'ÙƒØ±ÙŠÙ… Ø¨Ù†Ø²ÙŠÙ…Ø§', options: ['ÙƒØ±ÙŠØ³ØªÙŠØ§Ù†Ùˆ Ø±ÙˆÙ†Ø§Ù„Ø¯Ùˆ','ÙƒØ±ÙŠÙ… Ø¨Ù†Ø²ÙŠÙ…Ø§','Ù„ÙŠÙˆÙ†ÙŠÙ„ Ù…ÙŠØ³ÙŠ','Ù†ÙŠÙ…Ø§Ø±','Ù…Ø¨Ø§Ø¨ÙŠ','Ù…Ø­Ù…Ø¯ ØµÙ„Ø§Ø­'] },
  { main: 'Ù„ÙŠÙˆÙ†ÙŠÙ„ Ù…ÙŠØ³ÙŠ', impostor: 'Ù†ÙŠÙ…Ø§Ø±', options: ['Ù„ÙŠÙˆÙ†ÙŠÙ„ Ù…ÙŠØ³ÙŠ','Ù†ÙŠÙ…Ø§Ø±','Ù…Ø¨Ø§Ø¨ÙŠ','Ø±ÙˆÙ†Ø§Ù„Ø¯Ùˆ','Ø³ÙˆØ§Ø±ÙŠØ²','Ù‡Ø§Ù„Ø§Ù†Ø¯'] },
  { main: 'Ù…Ø­Ù…Ø¯ ØµÙ„Ø§Ø­', impostor: 'Ø³Ø§Ø¯ÙŠÙˆ Ù…Ø§Ù†ÙŠ', options: ['Ù…Ø­Ù…Ø¯ ØµÙ„Ø§Ø­','Ø³Ø§Ø¯ÙŠÙˆ Ù…Ø§Ù†ÙŠ','Ø±ÙŠØ§Ø¶ Ù…Ø­Ø±Ø²','Ù…Ø¨Ø§Ø¨ÙŠ','Ø¨Ù†Ø²ÙŠÙ…Ø§','ÙÙŠÙ†ÙŠØ³ÙŠÙˆØ³'] },
  { main: 'ÙƒÙŠÙ„ÙŠØ§Ù† Ù…Ø¨Ø§Ø¨ÙŠ', impostor: 'ÙÙŠÙ†ÙŠØ³ÙŠÙˆØ³ Ø¬ÙˆÙ†ÙŠÙˆØ±', options: ['ÙƒÙŠÙ„ÙŠØ§Ù† Ù…Ø¨Ø§Ø¨ÙŠ','ÙÙŠÙ†ÙŠØ³ÙŠÙˆØ³ Ø¬ÙˆÙ†ÙŠÙˆØ±','Ù‡Ø§Ù„Ø§Ù†Ø¯','Ù†ÙŠÙ…Ø§Ø±','Ù…ÙŠØ³ÙŠ','Ø±ÙˆÙ†Ø§Ù„Ø¯Ùˆ'] },
  { main: 'Ø¥ÙŠØ±Ù„ÙŠÙ†Øº Ù‡Ø§Ù„Ø§Ù†Ø¯', impostor: 'Ù‡Ø§Ø±ÙŠ ÙƒÙŠÙ†', options: ['Ø¥ÙŠØ±Ù„ÙŠÙ†Øº Ù‡Ø§Ù„Ø§Ù†Ø¯','Ù‡Ø§Ø±ÙŠ ÙƒÙŠÙ†','Ù…Ø¨Ø§Ø¨ÙŠ','Ù…ÙŠØ³ÙŠ','Ø¨Ù†Ø²ÙŠÙ…Ø§','Ù„ÙŠÙØ§Ù†Ø¯ÙˆÙØ³ÙƒÙŠ'] },
  { main: 'ÙƒØ±ÙŠÙ… Ø¨Ù†Ø²ÙŠÙ…Ø§', impostor: 'Ø±ÙˆÙ†Ø§Ù„Ø¯Ùˆ', options: ['ÙƒØ±ÙŠÙ… Ø¨Ù†Ø²ÙŠÙ…Ø§','Ø±ÙˆÙ†Ø§Ù„Ø¯Ùˆ','Ù…ÙŠØ³ÙŠ','Ù‡Ø§Ù„Ø§Ù†Ø¯','Ù…ÙˆØ¯Ø±ÙŠØªØ´','ÙÙŠÙ†ÙŠØ³ÙŠÙˆØ³'] },
  { main: 'Ù†ÙŠÙ…Ø§Ø±', impostor: 'Ù…Ø¨Ø§Ø¨ÙŠ', options: ['Ù†ÙŠÙ…Ø§Ø±','Ù…Ø¨Ø§Ø¨ÙŠ','Ù…ÙŠØ³ÙŠ','Ø±ÙˆÙ†Ø§Ù„Ø¯Ùˆ','Ø±Ø§ÙÙŠÙ†ÙŠØ§','ÙÙŠÙ†ÙŠØ³ÙŠÙˆØ³'] },
  { main: 'Ø±ÙŠØ§Ø¶ Ù…Ø­Ø±Ø²', impostor: 'Ù…Ø­Ù…Ø¯ ØµÙ„Ø§Ø­', options: ['Ø±ÙŠØ§Ø¶ Ù…Ø­Ø±Ø²','Ù…Ø­Ù…Ø¯ ØµÙ„Ø§Ø­','Ù…Ø§Ù†ÙŠ','Ø¨Ù†Ø²ÙŠÙ…Ø§','Ù…Ø¨Ø§Ø¨ÙŠ','Ù†ÙŠÙ…Ø§Ø±'] },
  { main: 'Ø³Ø§Ø¯ÙŠÙˆ Ù…Ø§Ù†ÙŠ', impostor: 'Ù…Ø­Ù…Ø¯ ØµÙ„Ø§Ø­', options: ['Ø³Ø§Ø¯ÙŠÙˆ Ù…Ø§Ù†ÙŠ','Ù…Ø­Ù…Ø¯ ØµÙ„Ø§Ø­','Ø±ÙŠØ§Ø¶ Ù…Ø­Ø±Ø²','Ø±ÙˆÙ†Ø§Ù„Ø¯Ùˆ','Ø¨Ù†Ø²ÙŠÙ…Ø§','Ù…ÙŠØ³ÙŠ'] },
  { main: 'Ù„ÙˆÙƒØ§ Ù…ÙˆØ¯Ø±ÙŠØªØ´', impostor: 'ØªÙˆÙ†ÙŠ ÙƒØ±ÙˆØ³', options: ['Ù„ÙˆÙƒØ§ Ù…ÙˆØ¯Ø±ÙŠØªØ´','ØªÙˆÙ†ÙŠ ÙƒØ±ÙˆØ³','Ø¯ÙŠ Ø¨Ø±ÙˆÙŠÙ†','Ø¨ÙŠÙ„ÙŠÙ†ØºÙ‡Ø§Ù…','ÙƒØ§Ø³ÙŠÙ…ÙŠØ±Ùˆ','ØªØ´ÙˆØ§Ù…ÙŠÙ†ÙŠ'] },
  { main: 'Ø¬ÙˆØ¯ Ø¨ÙŠÙ„ÙŠÙ†ØºÙ‡Ø§Ù…', impostor: 'ÙƒØ§Ù…Ø§ÙÙŠÙ†ØºØ§', options: ['Ø¬ÙˆØ¯ Ø¨ÙŠÙ„ÙŠÙ†ØºÙ‡Ø§Ù…','ÙƒØ§Ù…Ø§ÙÙŠÙ†ØºØ§','ØªØ´ÙˆØ§Ù…ÙŠÙ†ÙŠ','Ù…ÙˆØ¯Ø±ÙŠØªØ´','Ø¯ÙŠ Ø¨Ø±ÙˆÙŠÙ†','ÙƒØ±ÙˆØ³'] },
  { main: 'ÙƒÙŠÙÙŠÙ† Ø¯ÙŠ Ø¨Ø±ÙˆÙŠÙ†', impostor: 'Ø¨Ø±Ù†Ø§Ø±Ø¯Ùˆ Ø³ÙŠÙ„ÙØ§', options: ['ÙƒÙŠÙÙŠÙ† Ø¯ÙŠ Ø¨Ø±ÙˆÙŠÙ†','Ø¨Ø±Ù†Ø§Ø±Ø¯Ùˆ Ø³ÙŠÙ„ÙØ§','ÙÙˆØ¯ÙŠÙ†','Ù‡Ø§Ù„Ø§Ù†Ø¯','Ù…ÙˆØ¯Ø±ÙŠØªØ´','ÙƒØ±ÙˆØ³'] },
  { main: 'Ø±ÙˆØ¨Ø±Øª Ù„ÙŠÙØ§Ù†Ø¯ÙˆÙØ³ÙƒÙŠ', impostor: 'Ù‡Ø§Ù„Ø§Ù†Ø¯', options: ['Ø±ÙˆØ¨Ø±Øª Ù„ÙŠÙØ§Ù†Ø¯ÙˆÙØ³ÙƒÙŠ','Ù‡Ø§Ù„Ø§Ù†Ø¯','Ù…Ø¨Ø§Ø¨ÙŠ','Ø¨Ù†Ø²ÙŠÙ…Ø§','Ù…ÙŠØ³ÙŠ','Ø³ÙˆØ§Ø±ÙŠØ²'] },
  { main: 'Ù„ÙˆÙŠØ³ Ø³ÙˆØ§Ø±ÙŠØ²', impostor: 'ÙƒØ§Ú¤Ø§Ù†ÙŠ', options: ['Ù„ÙˆÙŠØ³ Ø³ÙˆØ§Ø±ÙŠØ²','ÙƒØ§Ú¤Ø§Ù†ÙŠ','Ù…ÙŠØ³ÙŠ','Ù†ÙŠÙ…Ø§Ø±','Ø±ÙˆÙ†Ø§Ù„Ø¯Ùˆ','Ù‡Ø§Ù„Ø§Ù†Ø¯'] },
  { main: 'ÙÙŠÙ†ÙŠØ³ÙŠÙˆØ³ Ø¬ÙˆÙ†ÙŠÙˆØ±', impostor: 'Ø±ÙˆØ¯Ø±ÙŠØºÙˆ', options: ['ÙÙŠÙ†ÙŠØ³ÙŠÙˆØ³ Ø¬ÙˆÙ†ÙŠÙˆØ±','Ø±ÙˆØ¯Ø±ÙŠØºÙˆ','Ù…Ø¨Ø§Ø¨ÙŠ','Ù†ÙŠÙ…Ø§Ø±','Ø¨Ù†Ø²ÙŠÙ…Ø§','Ù…ÙŠØ³ÙŠ'] },
  { main: 'Ø±ÙˆØ¯Ø±ÙŠØºÙˆ', impostor: 'ÙÙŠÙ†ÙŠØ³ÙŠÙˆØ³ Ø¬ÙˆÙ†ÙŠÙˆØ±', options: ['Ø±ÙˆØ¯Ø±ÙŠØºÙˆ','ÙÙŠÙ†ÙŠØ³ÙŠÙˆØ³ Ø¬ÙˆÙ†ÙŠÙˆØ±','Ø¨ÙŠÙ„ÙŠÙ†ØºÙ‡Ø§Ù…','Ù‡Ø§Ù„Ø§Ù†Ø¯','Ù…Ø¨Ø§Ø¨ÙŠ','Ù…ÙˆØ¯Ø±ÙŠØªØ´'] },
  { main: 'Ù‡Ø§Ø±ÙŠ ÙƒÙŠÙ†', impostor: 'Ø³ÙˆÙ† Ù‡ÙŠÙˆÙ†Øº Ù…ÙŠÙ†', options: ['Ù‡Ø§Ø±ÙŠ ÙƒÙŠÙ†','Ø³ÙˆÙ† Ù‡ÙŠÙˆÙ†Øº Ù…ÙŠÙ†','Ù‡Ø§Ù„Ø§Ù†Ø¯','Ù„ÙŠÙØ§Ù†Ø¯ÙˆÙØ³ÙƒÙŠ','Ù…Ø¨Ø§Ø¨ÙŠ','Ø±ÙˆÙ†Ø§Ù„Ø¯Ùˆ'] },
  { main: 'Ø³ÙˆÙ† Ù‡ÙŠÙˆÙ†Øº Ù…ÙŠÙ†', impostor: 'Ù‡Ø§Ø±ÙŠ ÙƒÙŠÙ†', options: ['Ø³ÙˆÙ† Ù‡ÙŠÙˆÙ†Øº Ù…ÙŠÙ†','Ù‡Ø§Ø±ÙŠ ÙƒÙŠÙ†','Ù…Ø¨Ø§Ø¨ÙŠ','Ù†ÙŠÙ…Ø§Ø±','Ù…ÙŠØ³ÙŠ','Ù‡Ø§Ù„Ø§Ù†Ø¯'] },
  { main: 'Ø£Ø´Ø±Ù Ø­ÙƒÙŠÙ…ÙŠ', impostor: 'ÙƒØ§Ù†Ø³ÙŠÙ„Ùˆ', options: ['Ø£Ø´Ø±Ù Ø­ÙƒÙŠÙ…ÙŠ','ÙƒØ§Ù†Ø³ÙŠÙ„Ùˆ','Ø£Ø±Ù†ÙˆÙ„Ø¯','ÙƒØ§Ø±ÙØ§Ø®Ø§Ù„','ÙˆÙˆÙƒØ±','Ø£Ù„Ø§Ø¨Ø§'] },
  { main: 'ÙÙŠØ±Ø¬ÙŠÙ„ ÙØ§Ù† Ø¯Ø§ÙŠÙƒ', impostor: 'Ø±ÙˆØ¨Ù† Ø¯ÙŠØ§Ø²', options: ['ÙÙŠØ±Ø¬ÙŠÙ„ ÙØ§Ù† Ø¯Ø§ÙŠÙƒ','Ø±ÙˆØ¨Ù† Ø¯ÙŠØ§Ø²','Ø±Ø§Ù…ÙˆØ³','Ø¨ÙŠØ¨ÙŠ','Ø£Ù„Ø§Ø¨Ø§','Ù…Ø§Ø±ÙƒÙŠÙ†ÙŠÙˆØ³'] }
],
'Ø£Ù†Ø¯ÙŠØ©': [
  { main: 'Ø§Ù„Ù†ØµØ±', impostor: 'Ø§Ù„Ù‡Ù„Ø§Ù„', options: ['Ø§Ù„Ù†ØµØ±','Ø§Ù„Ù‡Ù„Ø§Ù„','Ø§Ù„Ø§ØªØ­Ø§Ø¯','Ø§Ù„Ø£Ù‡Ù„ÙŠ','Ø§Ù„Ø´Ø¨Ø§Ø¨','Ø§Ù„Ø§ØªÙØ§Ù‚'] },
  { main: 'Ø§Ù„Ù‡Ù„Ø§Ù„', impostor: 'Ø§Ù„Ù†ØµØ±', options: ['Ø§Ù„Ù‡Ù„Ø§Ù„','Ø§Ù„Ù†ØµØ±','Ø§Ù„Ø§ØªØ­Ø§Ø¯','Ø§Ù„Ø£Ù‡Ù„ÙŠ','Ø§Ù„Ø´Ø¨Ø§Ø¨','Ø§Ù„ÙÙŠØ­Ø§Ø¡'] },
  { main: 'Ø§Ù„Ø§ØªØ­Ø§Ø¯', impostor: 'Ø§Ù„Ø£Ù‡Ù„ÙŠ', options: ['Ø§Ù„Ø§ØªØ­Ø§Ø¯','Ø§Ù„Ø£Ù‡Ù„ÙŠ','Ø§Ù„Ù†ØµØ±','Ø§Ù„Ù‡Ù„Ø§Ù„','Ø§Ù„Ø·Ø§Ø¦ÙŠ','Ø§Ù„ØªØ¹Ø§ÙˆÙ†'] },
  { main: 'Ø§Ù„Ø£Ù‡Ù„ÙŠ', impostor: 'Ø§Ù„Ø§ØªØ­Ø§Ø¯', options: ['Ø§Ù„Ø£Ù‡Ù„ÙŠ','Ø§Ù„Ø§ØªØ­Ø§Ø¯','Ø§Ù„Ù‡Ù„Ø§Ù„','Ø§Ù„Ù†ØµØ±','Ø§Ù„Ø´Ø¨Ø§Ø¨','Ø§Ù„ÙØªØ­'] },
  { main: 'Ø§Ù„Ø´Ø¨Ø§Ø¨', impostor: 'Ø§Ù„Ø§ØªÙØ§Ù‚', options: ['Ø§Ù„Ø´Ø¨Ø§Ø¨','Ø§Ù„Ø§ØªÙØ§Ù‚','Ø§Ù„Ù†ØµØ±','Ø§Ù„Ù‡Ù„Ø§Ù„','Ø§Ù„Ø±ÙŠØ§Ø¶','Ø§Ù„ÙÙŠØµÙ„ÙŠ'] },
  { main: 'Ø±ÙŠØ§Ù„ Ù…Ø¯Ø±ÙŠØ¯', impostor: 'Ø¨Ø±Ø´Ù„ÙˆÙ†Ø©', options: ['Ø±ÙŠØ§Ù„ Ù…Ø¯Ø±ÙŠØ¯','Ø¨Ø±Ø´Ù„ÙˆÙ†Ø©','Ø£ØªÙ„ØªÙŠÙƒÙˆ Ù…Ø¯Ø±ÙŠØ¯','ÙØ§Ù„Ù†Ø³ÙŠØ§','Ø¥Ø´Ø¨ÙŠÙ„ÙŠØ©','Ø¨Ø§ÙŠØ±Ù† Ù…ÙŠÙˆÙ†Ø®'] },
  { main: 'Ø¨Ø±Ø´Ù„ÙˆÙ†Ø©', impostor: 'Ø±ÙŠØ§Ù„ Ù…Ø¯Ø±ÙŠØ¯', options: ['Ø¨Ø±Ø´Ù„ÙˆÙ†Ø©','Ø±ÙŠØ§Ù„ Ù…Ø¯Ø±ÙŠØ¯','Ø£ØªÙ„ØªÙŠÙƒÙˆ Ù…Ø¯Ø±ÙŠØ¯','Ø¥Ø´Ø¨ÙŠÙ„ÙŠØ©','ÙØ§Ù„Ù†Ø³ÙŠØ§','Ø¨Ø§Ø±ÙŠØ³ Ø³Ø§Ù† Ø¬ÙŠØ±Ù…Ø§Ù†'] },
  { main: 'Ù…Ø§Ù†Ø´Ø³ØªØ± Ø³ÙŠØªÙŠ', impostor: 'Ù…Ø§Ù†Ø´Ø³ØªØ± ÙŠÙˆÙ†Ø§ÙŠØªØ¯', options: ['Ù…Ø§Ù†Ø´Ø³ØªØ± Ø³ÙŠØªÙŠ','Ù…Ø§Ù†Ø´Ø³ØªØ± ÙŠÙˆÙ†Ø§ÙŠØªØ¯','Ù„ÙŠÙØ±Ø¨ÙˆÙ„','Ø£Ø±Ø³Ù†Ø§Ù„','ØªØ´ÙŠÙ„Ø³ÙŠ','ØªÙˆØªÙ†Ù‡Ø§Ù…'] },
  { main: 'Ù„ÙŠÙØ±Ø¨ÙˆÙ„', impostor: 'Ù…Ø§Ù†Ø´Ø³ØªØ± ÙŠÙˆÙ†Ø§ÙŠØªØ¯', options: ['Ù„ÙŠÙØ±Ø¨ÙˆÙ„','Ù…Ø§Ù†Ø´Ø³ØªØ± ÙŠÙˆÙ†Ø§ÙŠØªØ¯','Ø£Ø±Ø³Ù†Ø§Ù„','ØªØ´ÙŠÙ„Ø³ÙŠ','Ù…Ø§Ù†Ø´Ø³ØªØ± Ø³ÙŠØªÙŠ','ØªÙˆØªÙ†Ù‡Ø§Ù…'] },
  { main: 'Ø¨Ø§ÙŠØ±Ù† Ù…ÙŠÙˆÙ†Ø®', impostor: 'Ø¨ÙˆØ±ÙˆØ³ÙŠØ§ Ø¯ÙˆØ±ØªÙ…ÙˆÙ†Ø¯', options: ['Ø¨Ø§ÙŠØ±Ù† Ù…ÙŠÙˆÙ†Ø®','Ø¨ÙˆØ±ÙˆØ³ÙŠØ§ Ø¯ÙˆØ±ØªÙ…ÙˆÙ†Ø¯','Ù„Ø§ÙŠØ¨Ø²ÙŠØº','Ù„ÙŠÙØ±ÙƒÙˆØ²Ù†','Ø±ÙŠØ§Ù„ Ù…Ø¯Ø±ÙŠØ¯','Ø¨Ø±Ø´Ù„ÙˆÙ†Ø©'] },
  { main: 'Ø¨Ø§Ø±ÙŠØ³ Ø³Ø§Ù† Ø¬ÙŠØ±Ù…Ø§Ù†', impostor: 'Ù…Ø§Ø±Ø³ÙŠÙ„ÙŠØ§', options: ['Ø¨Ø§Ø±ÙŠØ³ Ø³Ø§Ù† Ø¬ÙŠØ±Ù…Ø§Ù†','Ù…Ø§Ø±Ø³ÙŠÙ„ÙŠØ§','Ù„ÙŠÙˆÙ†','Ù…ÙˆÙ†Ø§ÙƒÙˆ','Ø¨Ø±Ø´Ù„ÙˆÙ†Ø©','Ø±ÙŠØ§Ù„ Ù…Ø¯Ø±ÙŠØ¯'] },
  { main: 'ÙŠÙˆÙÙ†ØªÙˆØ³', impostor: 'Ù…ÙŠÙ„Ø§Ù†', options: ['ÙŠÙˆÙÙ†ØªÙˆØ³','Ù…ÙŠÙ„Ø§Ù†','Ø¥Ù†ØªØ±','Ù†Ø§Ø¨ÙˆÙ„ÙŠ','Ø±ÙˆÙ…Ø§','Ù„Ø§ØªØ³ÙŠÙˆ'] },
  { main: 'Ø¥Ù†ØªØ±', impostor: 'Ù…ÙŠÙ„Ø§Ù†', options: ['Ø¥Ù†ØªØ±','Ù…ÙŠÙ„Ø§Ù†','ÙŠÙˆÙÙ†ØªÙˆØ³','Ù†Ø§Ø¨ÙˆÙ„ÙŠ','Ø±ÙˆÙ…Ø§','Ù„Ø§ØªØ³ÙŠÙˆ'] },
  { main: 'Ù†Ø§Ø¨ÙˆÙ„ÙŠ', impostor: 'Ø±ÙˆÙ…Ø§', options: ['Ù†Ø§Ø¨ÙˆÙ„ÙŠ','Ø±ÙˆÙ…Ø§','Ù…ÙŠÙ„Ø§Ù†','Ø¥Ù†ØªØ±','ÙŠÙˆÙÙ†ØªÙˆØ³','Ù„Ø§ØªØ³ÙŠÙˆ'] },
  { main: 'Ø£Ø±Ø³Ù†Ø§Ù„', impostor: 'ØªØ´ÙŠÙ„Ø³ÙŠ', options: ['Ø£Ø±Ø³Ù†Ø§Ù„','ØªØ´ÙŠÙ„Ø³ÙŠ','Ù„ÙŠÙØ±Ø¨ÙˆÙ„','Ù…Ø§Ù†Ø´Ø³ØªØ± Ø³ÙŠØªÙŠ','ØªÙˆØªÙ†Ù‡Ø§Ù…','Ù…Ø§Ù†Ø´Ø³ØªØ± ÙŠÙˆÙ†Ø§ÙŠØªØ¯'] },
  { main: 'ØªØ´ÙŠÙ„Ø³ÙŠ', impostor: 'Ø£Ø±Ø³Ù†Ø§Ù„', options: ['ØªØ´ÙŠÙ„Ø³ÙŠ','Ø£Ø±Ø³Ù†Ø§Ù„','Ù„ÙŠÙØ±Ø¨ÙˆÙ„','Ù…Ø§Ù†Ø´Ø³ØªØ± ÙŠÙˆÙ†Ø§ÙŠØªØ¯','Ù…Ø§Ù†Ø´Ø³ØªØ± Ø³ÙŠØªÙŠ','ØªÙˆØªÙ†Ù‡Ø§Ù…'] },
  { main: 'ØªÙˆØªÙ†Ù‡Ø§Ù…', impostor: 'Ø£Ø±Ø³Ù†Ø§Ù„', options: ['ØªÙˆØªÙ†Ù‡Ø§Ù…','Ø£Ø±Ø³Ù†Ø§Ù„','ØªØ´ÙŠÙ„Ø³ÙŠ','Ù„ÙŠÙØ±Ø¨ÙˆÙ„','Ù…Ø§Ù†Ø´Ø³ØªØ± Ø³ÙŠØªÙŠ','Ù…Ø§Ù†Ø´Ø³ØªØ± ÙŠÙˆÙ†Ø§ÙŠØªØ¯'] },
  { main: 'Ø£ØªÙ„ØªÙŠÙƒÙˆ Ù…Ø¯Ø±ÙŠØ¯', impostor: 'Ø±ÙŠØ§Ù„ Ù…Ø¯Ø±ÙŠØ¯', options: ['Ø£ØªÙ„ØªÙŠÙƒÙˆ Ù…Ø¯Ø±ÙŠØ¯','Ø±ÙŠØ§Ù„ Ù…Ø¯Ø±ÙŠØ¯','Ø¨Ø±Ø´Ù„ÙˆÙ†Ø©','Ø¥Ø´Ø¨ÙŠÙ„ÙŠØ©','ÙØ§Ù„Ù†Ø³ÙŠØ§','Ø¨Ø§ÙŠØ±Ù† Ù…ÙŠÙˆÙ†Ø®'] },
  { main: 'Ø¨ÙˆØ±ÙˆØ³ÙŠØ§ Ø¯ÙˆØ±ØªÙ…ÙˆÙ†Ø¯', impostor: 'Ø¨Ø§ÙŠØ±Ù† Ù…ÙŠÙˆÙ†Ø®', options: ['Ø¨ÙˆØ±ÙˆØ³ÙŠØ§ Ø¯ÙˆØ±ØªÙ…ÙˆÙ†Ø¯','Ø¨Ø§ÙŠØ±Ù† Ù…ÙŠÙˆÙ†Ø®','Ù„Ø§ÙŠØ¨Ø²ÙŠØº','Ù„ÙŠÙØ±ÙƒÙˆØ²Ù†','Ø±ÙŠØ§Ù„ Ù…Ø¯Ø±ÙŠØ¯','Ø¨Ø±Ø´Ù„ÙˆÙ†Ø©'] },
  { main: 'Ø§Ù„Ù‡Ù„Ø§Ù„ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ', impostor: 'Ø§Ù„Ù†ØµØ±', options: ['Ø§Ù„Ù‡Ù„Ø§Ù„ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ','Ø§Ù„Ù†ØµØ±','Ø§Ù„Ø§ØªØ­Ø§Ø¯','Ø§Ù„Ø£Ù‡Ù„ÙŠ','Ø§Ù„Ø´Ø¨Ø§Ø¨','Ø§Ù„ØªØ¹Ø§ÙˆÙ†'] }
]
        

        };

        // Ø­Ø§Ù„Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©
        let state = {
            roomCode: '',
            playerId: '',
            playerName: '',
            isHost: false,
            category: 'Ø­ÙŠÙˆØ§Ù†Ø§Øª',
            roomData: null
        };
        
        // Ù…ØªØºÙŠØ± Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„ÙØ¦Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© Ù…Ø¤Ù‚ØªØ§Ù‹
        let selectedCategory = 'Ø­ÙŠÙˆØ§Ù†Ø§Øª';
        let selectedCategoryForNextRound = 'Ø­ÙŠÙˆØ§Ù†Ø§Øª';
        let lastScoredRound = null;

        // Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙ†Ù‚Ù„ Ù„Ù„Ø´Ø§Ø´Ø§Øª
        document.getElementById('goToCreateBtn').addEventListener('click', () => {
            showScreen('createRoomScreen');
        });

        document.getElementById('goToJoinBtn').addEventListener('click', () => {
            showScreen('joinRoomScreen');
        });

        document.getElementById('backFromCreate').addEventListener('click', () => {
            showScreen('homeScreen');
        });

        document.getElementById('backFromJoin').addEventListener('click', () => {
            showScreen('homeScreen');
        });

        // ========== Public Rooms System ==========
        let isPublicRoom = false;

        function setRoomType(isPublic) {
            isPublicRoom = isPublic;
            document.getElementById('roomTypePublic').style.opacity = isPublic ? '1' : '0.5';
            document.getElementById('roomTypePrivate').style.opacity = isPublic ? '0.5' : '1';
        }

        document.getElementById('goToPublicBtn').addEventListener('click', () => {
            showScreen('publicRoomsScreen');
            loadPublicRooms();
        });

        document.getElementById('backFromPublic').addEventListener('click', () => {
            showScreen('homeScreen');
        });

        document.getElementById('refreshPublicBtn').addEventListener('click', () => {
            loadPublicRooms();
        });

        async function loadPublicRooms() {
            const listEl = document.getElementById('publicRoomsList');
            const noRoomsEl = document.getElementById('noPublicRooms');
            listEl.innerHTML = '<div class="status"><p>â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø«...</p></div>';
            noRoomsEl.classList.add('hidden');

            try {
                const snap = await db.ref('publicRooms/menBra').once('value');
                const rooms = snap.val();
                listEl.innerHTML = '';

                if (!rooms || Object.keys(rooms).length === 0) {
                    noRoomsEl.classList.remove('hidden');
                    return;
                }

                let found = 0;
                for (const [code, info] of Object.entries(rooms)) {
                    // Verify room still exists and is in lobby
                    const roomSnap = await db.ref('rooms/' + code).once('value');
                    if (!roomSnap.exists()) {
                        db.ref('publicRooms/menBra/' + code).remove();
                        continue;
                    }
                    const roomData = roomSnap.val();
                    if (roomData.state !== 'lobby') continue;

                    const playerCount = roomData.players ? Object.keys(roomData.players).length : 0;
                    const hostName = info.hostName || 'Ù…Ø¶ÙŠÙ';
                    const category = roomData.category || '---';

                    const card = document.createElement('div');
                    card.className = 'public-room-card';
                    card.innerHTML = `
                        <span class="join-arrow">â†</span>
                        <div class="room-info">
                            <div class="room-host">ğŸ® ØºØ±ÙØ© ${hostName}</div>
                            <div class="room-details">Ø§Ù„ÙØ¦Ø©: ${category} Â· Ø§Ù„ÙƒÙˆØ¯: ${code}</div>
                        </div>
                        <div class="room-players">ğŸ‘¥ ${playerCount}</div>
                    `;
                    card.addEventListener('click', () => joinPublicRoom(code));
                    listEl.appendChild(card);
                    found++;
                }

                if (found === 0) {
                    noRoomsEl.classList.remove('hidden');
                }
            } catch (e) {
                listEl.innerHTML = '<div class="status error"><p>âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±ÙˆÙ…Ø§Øª</p></div>';
            }
        }

        async function joinPublicRoom(code) {
            const name = document.getElementById('publicJoinName').value.trim();
            if (!name) { alert('Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø£ÙˆÙ„Ø§Ù‹!'); return; }
            if (!db) { alert('ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±...'); return; }

            try {
                const snapshot = await db.ref('rooms/' + code).once('value');
                if (!snapshot.exists()) { alert('Ø§Ù„ØºØ±ÙØ© Ù„Ù… ØªØ¹Ø¯ Ù…ÙˆØ¬ÙˆØ¯Ø©!'); loadPublicRooms(); return; }
                const roomData = snapshot.val();
                if (roomData.state !== 'lobby') { alert('Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¨Ø¯Ø£Øª Ø¨Ø§Ù„ÙØ¹Ù„!'); loadPublicRooms(); return; }

                const playerId = Date.now().toString();
                await db.ref('rooms/' + code + '/players/' + playerId).set({ name, ready: false });
                await db.ref('rooms/' + code + '/scores/' + playerId).set(0);

                state.roomCode = code;
                state.playerId = playerId;
                state.playerName = name;
                state.isHost = false;

                listenToRoom();
                showScreen('lobbyScreen');
                saveSession();
                initChat();
            } catch (e) {
                alert('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…: ' + e.message);
            }
        }

        // Quick Join
        document.getElementById('quickJoinBtn').addEventListener('click', async () => {
            const quickBtn = document.getElementById('quickJoinBtn');
            quickBtn.disabled = true;
            quickBtn.textContent = 'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø«...';

            try {
                const snap = await db.ref('publicRooms/menBra').once('value');
                const rooms = snap.val();

                if (!rooms) {
                    alert('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±ÙˆÙ…Ø§Øª Ø¹Ø§Ù…Ø© Ø­Ø§Ù„ÙŠØ§Ù‹. Ø£Ù†Ø´Ø¦ ØºØ±ÙØ© Ø¹Ø§Ù…Ø©!');
                    quickBtn.disabled = false;
                    quickBtn.textContent = 'âš¡ Ø§Ù†Ø¶Ù…Ø§Ù… Ø³Ø±ÙŠØ¹';
                    return;
                }

                // Find first available room
                let foundCode = null;
                for (const [code, info] of Object.entries(rooms)) {
                    const roomSnap = await db.ref('rooms/' + code).once('value');
                    if (roomSnap.exists() && roomSnap.val().state === 'lobby') {
                        foundCode = code;
                        break;
                    } else {
                        db.ref('publicRooms/menBra/' + code).remove();
                    }
                }

                if (!foundCode) {
                    alert('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±ÙˆÙ…Ø§Øª Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹!');
                    quickBtn.disabled = false;
                    quickBtn.textContent = 'âš¡ Ø§Ù†Ø¶Ù…Ø§Ù… Ø³Ø±ÙŠØ¹';
                    return;
                }

                // Need a name - show a prompt
                const name = prompt('Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ:');
                if (!name || !name.trim()) {
                    quickBtn.disabled = false;
                    quickBtn.textContent = 'âš¡ Ø§Ù†Ø¶Ù…Ø§Ù… Ø³Ø±ÙŠØ¹';
                    return;
                }

                const playerId = Date.now().toString();
                await db.ref('rooms/' + foundCode + '/players/' + playerId).set({ name: name.trim(), ready: false });
                await db.ref('rooms/' + foundCode + '/scores/' + playerId).set(0);

                state.roomCode = foundCode;
                state.playerId = playerId;
                state.playerName = name.trim();
                state.isHost = false;

                listenToRoom();
                showScreen('lobbyScreen');
                saveSession();
                initChat();
            } catch (e) {
                alert('Ø®Ø·Ø£: ' + e.message);
            }
            quickBtn.disabled = false;
            quickBtn.textContent = 'âš¡ Ø§Ù†Ø¶Ù…Ø§Ù… Ø³Ø±ÙŠØ¹';
        });

        // Ø£Ø²Ø±Ø§Ø± Ø§Ù„ÙØ¦Ø§Øª ÙÙŠ Ø´Ø§Ø´Ø© Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡
        document.querySelectorAll('#createRoomScreen .category-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('#createRoomScreen .category-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                selectedCategory = this.dataset.category;
            });
        });

        document.getElementById('winScoreSlider').addEventListener('input', function(e) {
            document.getElementById('winScoreDisplay').textContent = e.target.value;
        });

        // Ø²Ø± ØªØ£ÙƒÙŠØ¯ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØºØ±ÙØ©
        document.getElementById('confirmCreateBtn').addEventListener('click', async (e) => {
            e.preventDefault();
            const createBtn = document.getElementById('confirmCreateBtn');
            if (createBtn.disabled) return;
            
            const name = document.getElementById('hostName').value.trim();
            if (!name) {
                alert('Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø£ÙˆÙ„Ø§Ù‹!');
                return;
            }

            if (!db) {
                alert('âš ï¸ Ù„Ù„Ø¹Ø¨ Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†:\n\n1. Ø§Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù Ø¹Ù„Ù‰ Ù…ÙˆÙ‚Ø¹ (Netlify)\n2. Ø§ÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø· Ù…Ù† Ø§Ù„Ù…ØªØµÙØ­\n\nØ§Ù„Ø¢Ù† Ø§Ù„Ù…Ù„Ù Ù…ÙØªÙˆØ­ Ù…Ø­Ù„ÙŠØ§Ù‹ âŒ');
                return;
            }

            createBtn.disabled = true;
            createBtn.textContent = 'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡...';

            const code = Math.floor(1000 + Math.random() * 9000).toString();
            const playerId = Date.now().toString();

            const winScore = parseInt(document.getElementById('winScoreSlider').value) || 5;

            const room = {
                code,
                host: playerId,
                category: selectedCategory,
                winScore: winScore,
                state: 'lobby',
                isPublic: isPublicRoom,
                players: {},
                scores: {},
                currentRound: null
            };

            room.players[playerId] = { name, ready: false };
            room.scores[playerId] = 0;

            try {
                await db.ref(`rooms/${code}`).set(room);
                
                // Register in public rooms index
                if (isPublicRoom) {
                    await db.ref('publicRooms/menBra/' + code).set({
                        hostName: name,
                        category: selectedCategory,
                        created: Date.now()
                    });
                }
                console.log('âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØºØ±ÙØ©:', code);
                
                state.roomCode = code;
                state.playerId = playerId;
                state.playerName = name;
                state.isHost = true;
                state.category = selectedCategory;

                listenToRoom();
                showScreen('lobbyScreen');
                saveSession();
                initChat();
            } catch (e) {
                console.error('âŒ Ø®Ø·Ø£:', e);
                alert('Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØºØ±ÙØ©!\n\n' + e.message);
                createBtn.disabled = false;
                createBtn.textContent = 'âœ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØºØ±ÙØ©';
            }
        });

        // Ø²Ø± ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…
        document.getElementById('confirmJoinBtn').addEventListener('click', async () => {
            const joinBtn = document.getElementById('confirmJoinBtn');
            if (joinBtn.disabled) return;
            
            const name = document.getElementById('joinPlayerName').value.trim();
            const code = document.getElementById('joinRoomCode').value.trim();

            if (!name || !code) {
                alert('Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ ÙˆÙƒÙˆØ¯ Ø§Ù„ØºØ±ÙØ©!');
                return;
            }

            if (!db) {
                alert('ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±... Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„');
                return;
            }

            joinBtn.disabled = true;
            joinBtn.textContent = 'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…...';

            try {
                const snapshot = await db.ref(`rooms/${code}`).once('value');
                if (!snapshot.exists()) {
                    alert('Ø§Ù„ØºØ±ÙØ© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©!');
                    joinBtn.disabled = false;
                    joinBtn.textContent = 'âœ… Ø§Ù†Ø¶Ù…Ø§Ù…';
                    return;
                }

                const playerId = Date.now().toString();
                await db.ref(`rooms/${code}/players/${playerId}`).set({ name, ready: false });
                await db.ref(`rooms/${code}/scores/${playerId}`).set(0);

                state.roomCode = code;
                state.playerId = playerId;
                state.playerName = name;
                state.isHost = false;

                listenToRoom();
                showScreen('lobbyScreen');
                saveSession();
                initChat();
            } catch (e) {
                alert('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…: ' + e.message);
                joinBtn.disabled = false;
                joinBtn.textContent = 'âœ… Ø§Ù†Ø¶Ù…Ø§Ù…';
            }
        });

        function listenToRoom() {
            roomRef = db.ref(`rooms/${state.roomCode}`);
            roomRef.on('value', (snapshot) => {
                state.roomData = snapshot.val();
                updateUI();
            });
        }

        function updateUI() {
            if (!state.roomData) return;

            // Check if player was kicked/removed
            if (state.roomData.players && !state.roomData.players[state.playerId]) {
                if (roomRef) { roomRef.off(); roomRef = null; }
                clearSession();
                destroyChat();
                alert('ØªÙ… Ø·Ø±Ø¯Ùƒ Ù…Ù† Ø§Ù„ØºØ±ÙØ©! ğŸš«');
                state = { roomCode: '', playerId: '', playerName: '', isHost: false, category: 'Ø­ÙŠÙˆØ§Ù†Ø§Øª', roomData: null };
                showScreen('homeScreen');
                return;
            }
            // If room was deleted
            if (!state.roomData.players) {
                if (roomRef) { roomRef.off(); roomRef = null; }
                clearSession();
                destroyChat();
                state = { roomCode: '', playerId: '', playerName: '', isHost: false, category: 'Ø­ÙŠÙˆØ§Ù†Ø§Øª', roomData: null };
                showScreen('homeScreen');
                return;
            }

            const currentState = state.roomData.state;

            if (currentState === 'lobby') {
                showScreen('lobbyScreen');
                // ØªÙ†Ø¸ÙŠÙ Ø§Ø³Ù… Ø§Ù„ÙØ¦Ø© Ø¥Ø°Ø§ ÙÙŠÙ‡ Ù†Ù‚Ø·ØªÙŠÙ† Ø²ÙŠØ§Ø¯Ø©
                if (state.isHost && state.roomData.category && state.roomData.category.endsWith(':')) {
                    var cleanCat = state.roomData.category.replace(/:$/, '');
                    roomRef.update({ category: cleanCat });
                }
                updateLobby();
            } else if (currentState === 'revealing') {
                showWordScreen();
            } else if (currentState === 'questions') {
                showQuestionsScreen();
            } else if (currentState === 'freeQuestions') {
                showFreeQuestionsScreen();
            } else if (currentState === 'discussing') {
                showScreen('discussScreen');
                document.getElementById('hostDiscuss').classList.toggle('hidden', !state.isHost);
                document.getElementById('waitDiscuss').classList.toggle('hidden', state.isHost);
            } else if (currentState === 'voting') {
                if (state.roomData && state.roomData.players) {
                    console.log('ğŸ—³ï¸ Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© Ø§Ù„ØªØµÙˆÙŠØª - Ø¹Ø¯Ø¯ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†:', Object.keys(state.roomData.players).length);
                    showVoteScreen();
                    
                    if (state.isHost) {
                        const round = state.roomData.currentRound;
                        const players = Object.keys(state.roomData.players);
                        const votes = round.votes || {};
                        const voteCount = Object.keys(votes).length;
                        
                        console.log(`ğŸ“Š Ø§Ù„Ø£ØµÙˆØ§Øª: ${voteCount}/${players.length}`);
                        
                        if (voteCount >= players.length) {
                            console.log('âœ… Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† ØµÙˆÙ‘ØªÙˆØ§ - Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ø´Ø§Ø´Ø© Ø§Ù„ØªØ®Ù…ÙŠÙ†');
                            setTimeout(() => {
                                roomRef.update({ state: 'waitingGuess' });
                            }, 1000);
                        }
                    }
                } else {
                    console.error('âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ø§Ø¹Ø¨ÙŠÙ†!');
                }
            } else if (currentState === 'waitingGuess') {
                const round = state.roomData.currentRound;
                const players = state.roomData.players;
                
                if (state.playerId === round.impostorId) {
                    console.log('ğŸ¯ Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ®Ù…ÙŠÙ† Ù„Ù„Ù…ØªØ·ÙÙ„');
                    showGuessScreen();
                } else {
                    console.log('â³ Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±');
                    showScreen('waitingGuessScreen');
                    document.getElementById('impostorNameWait').textContent = players[round.impostorId].name;
                    
                    if (state.isHost) {
                        if (round.impostorGuessReady || round.impostorGuess) {
                            console.log('ğŸ  Ø§Ù„Ù‡ÙˆØ³Øª ÙŠÙ„Ø§Ø­Ø¸ Ø£Ù† Ø§Ù„Ù„ÙŠ Ø¨Ø±Ø§ Ø§Ù„Ø³Ø§Ù„ÙØ© Ø®Ù…Ù‘Ù† - ÙŠÙ†ØªÙ‚Ù„ Ù„Ù„Ù†ØªØ§Ø¦Ø¬');
                            setTimeout(() => {
                                roomRef.update({ state: 'results' });
                            }, 1500);
                        }
                    }
                }
            } else if (currentState === 'results') {
                showResults();
            }
        }

        function updateLobby() {
            document.getElementById('displayCode').textContent = state.roomCode;
            document.getElementById('displayCategory').textContent = state.roomData.category;
            document.getElementById('displayWinScore').textContent = state.roomData.winScore || 5;

            const players = Object.values(state.roomData.players || {});
            document.getElementById('playerCount').textContent = players.length;

            const list = document.getElementById('playerList');
            list.innerHTML = '';
            Object.entries(state.roomData.players || {}).forEach(([id, player]) => {
                const div = document.createElement('div');
                div.className = 'player-item';
                const score = (state.roomData.scores && state.roomData.scores[id]) || 0;
                const isHostPlayer = id === state.roomData.host;
                const kickBtn = (state.isHost && !isHostPlayer) ? `<button class="kick-btn" onclick="kickPlayer('${id}')">âŒ Ø·Ø±Ø¯</button>` : '';
                div.innerHTML = `
                    <div style="display:flex;align-items:center;gap:8px;">
                        <span class="player-name">ğŸ‘¤ ${player.name}</span>
                        ${isHostPlayer ? '<span class="host-badge">Ù…Ø¶ÙŠÙ</span>' : ''}
                        ${kickBtn}
                    </div>
                    <span class="points">${score} ğŸ†</span>
                `;
                list.appendChild(div);
            });

            document.getElementById('minWarning').classList.toggle('hidden', players.length >= 3);
            document.getElementById('hostControls').classList.toggle('hidden', !state.isHost);
            
            const categorySection = document.getElementById('categorySection');
            if (categorySection) {
                categorySection.style.display = state.isHost ? 'block' : 'none';
            }

            document.querySelectorAll('#lobbyScreen .category-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.category === state.roomData.category);
            });
        }

        document.addEventListener('click', async (e) => {
            if (e.target.closest('.category-btn') && state.isHost && state.roomData) {
                const btn = e.target.closest('.category-btn');
                const category = btn.dataset.category;
                
                document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                
                await roomRef.update({ category });
            }
        });

        document.getElementById('copyBtn').addEventListener('click', () => {
            navigator.clipboard.writeText(state.roomCode);
            alert('ØªÙ… Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯! ğŸ“‹');
        });

        document.getElementById('startBtn').addEventListener('click', async () => {
            const players = Object.keys(state.roomData.players);
            if (players.length < 3) {
                alert('ØªØ­ØªØ§Ø¬ 3 Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„!');
                return;
            }

            const category = state.roomData.category;
            const words = wordSets[category];
            if (!words || words.length === 0) {
                alert('Ø®Ø·Ø£: Ù„Ø§ ØªÙˆØ¬Ø¯ ÙƒÙ„Ù…Ø§Øª Ù„Ù‡Ø°Ù‡ Ø§Ù„ÙØ¦Ø©! Ø§Ø®ØªØ± ÙØ¦Ø© Ø«Ø§Ù†ÙŠØ©.');
                return;
            }
            const selected = words[Math.floor(Math.random() * words.length)];
            const impostorIdx = Math.floor(Math.random() * players.length);
            const impostorId = players[impostorIdx];

            const round = {
                mainWord: selected.main,
                impostorWord: selected.impostor,
                impostorId,
                playerWords: {},
                votes: {},
                impostorGuess: null
            };

            players.forEach((id, idx) => {
                round.playerWords[id] = {
                    word: idx === impostorIdx ? selected.impostor : selected.main,
                    isImpostor: idx === impostorIdx
                };
            });

            await roomRef.update({
                state: 'revealing',
                currentRound: round
            });
            // Remove from public rooms listing when game starts
            db.ref('publicRooms/menBra/' + state.roomCode).remove();
        });

        function showWordScreen() {
            showScreen('wordScreen');
            document.getElementById('beforeReveal').classList.remove('hidden');
            document.getElementById('afterReveal').classList.add('hidden');
        }

        document.getElementById('revealBtn').addEventListener('click', () => {
            const round = state.roomData.currentRound;
            const myData = round.playerWords[state.playerId];

            document.getElementById('myWord').textContent = myData.word;
            document.getElementById('impostorBadge').classList.toggle('hidden', !myData.isImpostor);
            document.getElementById('beforeReveal').classList.add('hidden');
            document.getElementById('afterReveal').classList.remove('hidden');

            document.getElementById('hostNext').classList.toggle('hidden', !state.isHost);
            document.getElementById('waitingHost').classList.toggle('hidden', state.isHost);
        });

        document.getElementById('nextPhaseBtn').addEventListener('click', async () => {
            console.log('ğŸ¯ Ø¨Ø¯Ø¡ Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…Ù†Ø¸Ù…Ø©');
            
            const playerIds = Object.keys(state.roomData.players);
            
            function shuffle(array) {
                const shuffled = [...array];
                for (let i = shuffled.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
                }
                return shuffled;
            }
            
            const shuffledAskers = shuffle(playerIds);
            const shuffledAnswerers = shuffle(playerIds);
            
            const questions = [];
            for (let i = 0; i < shuffledAskers.length; i++) {
                let answererIndex = i;
                if (shuffledAskers[i] === shuffledAnswerers[answererIndex]) {
                    answererIndex = (i + 1) % shuffledAnswerers.length;
                }
                
                questions.push({
                    asker: shuffledAskers[i],
                    answerer: shuffledAnswerers[answererIndex]
                });
            }

            console.log('ğŸ“‹ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡', questions.length, 'Ø³Ø¤Ø§Ù„');
            
            await roomRef.update({ 
                state: 'questions',
                'currentRound/questions': questions,
                'currentRound/currentQuestionIndex': 0
            });
        });

        document.getElementById('nextQuestionBtn').addEventListener('click', async () => {
            console.log('â¡ï¸ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ');
            const round = state.roomData.currentRound;
            const currentIndex = round.currentQuestionIndex || 0;
            const nextIndex = currentIndex + 1;
            
            await roomRef.update({
                'currentRound/currentQuestionIndex': nextIndex
            });
        });

        document.getElementById('endFreeQuestionsBtn').addEventListener('click', async () => {
            console.log('âœ… Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø­Ø±Ø© ÙˆØ§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„ØªØµÙˆÙŠØª');
            await roomRef.update({ state: 'voting' });
        });

        document.getElementById('startVoteBtn').addEventListener('click', async () => {
            await roomRef.update({ state: 'voting' });
        });

        function showVoteScreen() {
            console.log('ğŸ“Š Ø¨Ø¯Ø¡ Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© Ø§Ù„ØªØµÙˆÙŠØª');
            showScreen('voteScreen');
            
            const round = state.roomData.currentRound;
            const players = state.roomData.players;

            console.log('ğŸ‘¥ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙƒØ§Ù…Ù„Ø©:', {players, round, myId: state.playerId});

            if (round.votes && round.votes[state.playerId]) {
                console.log('âœ… Ø§Ù„Ù„Ø§Ø¹Ø¨ ØµÙˆÙ‘Øª Ø¨Ø§Ù„ÙØ¹Ù„');
                document.getElementById('voteWaiting').classList.remove('hidden');
                document.getElementById('voteGrid').innerHTML = '';
                return;
            }

            const grid = document.getElementById('voteGrid');
            grid.innerHTML = '';
            document.getElementById('voteWaiting').classList.add('hidden');

            let count = 0;

            Object.entries(players).forEach(([playerId, playerData]) => {
                if (playerId !== state.playerId) {
                    console.log(`â• Ø¥Ø¶Ø§ÙØ©: ${playerData.name}`);
                    
                    const card = document.createElement('div');
                    card.setAttribute('style', `
                        background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%) !important;
                        border: 5px solid #d97706 !important;
                        border-radius: 20px !important;
                        padding: 30px 20px !important;
                        margin: 10px !important;
                        text-align: center !important;
                        cursor: pointer !important;
                        transition: all 0.3s ease !important;
                        box-shadow: 0 10px 30px rgba(0,0,0,0.4), inset 0 2px 10px rgba(255,255,255,0.3) !important;
                        min-height: 180px !important;
                        display: flex !important;
                        flex-direction: column !important;
                        align-items: center !important;
                        justify-content: center !important;
                        position: relative !important;
                    `);
                    
                    card.innerHTML = `
                        <div style="
                            font-size: 60px !important;
                            margin-bottom: 20px !important;
                            user-select: none !important;
                            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3)) !important;
                        ">ğŸ‘¤</div>
                        <div style="
                            font-size: 28px !important;
                            font-weight: 900 !important;
                            color: #1f2937 !important;
                            text-shadow: 
                                1px 1px 0 #fff,
                                -1px -1px 0 #fff,
                                1px -1px 0 #fff,
                                -1px 1px 0 #fff,
                                0 2px 4px rgba(255,255,255,0.8) !important;
                            background: #ffffff !important;
                            padding: 15px 25px !important;
                            border-radius: 15px !important;
                            border: 3px solid #1f2937 !important;
                            min-width: 140px !important;
                            font-family: 'Cairo', sans-serif !important;
                            box-shadow: 0 4px 15px rgba(0,0,0,0.2) !important;
                            letter-spacing: 0.5px !important;
                        ">${playerData.name}</div>
                    `;
                    
                    card.onmouseover = function() {
                        this.style.transform = 'translateY(-8px) scale(1.05)';
                        this.style.boxShadow = '0 20px 45px rgba(251, 191, 36, 0.6), inset 0 2px 10px rgba(255,255,255,0.4)';
                        this.style.borderColor = '#b45309';
                    };
                    
                    card.onmouseout = function() {
                        this.style.transform = 'translateY(0) scale(1)';
                        this.style.boxShadow = '0 10px 30px rgba(0,0,0,0.4), inset 0 2px 10px rgba(255,255,255,0.3)';
                        this.style.borderColor = '#d97706';
                    };
                    
                    card.onclick = () => {
                        console.log(`ğŸ—³ï¸ Ø§Ù„ØªØµÙˆÙŠØª Ø¹Ù„Ù‰: ${playerData.name}`);
                        card.style.background = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';
                        card.style.borderColor = '#047857';
                        vote(playerId);
                    };
                    
                    grid.appendChild(card);
                    count++;
                }
            });

            console.log(`âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© ${count} Ø¨Ø·Ø§Ù‚Ø©`);
            
            if (count === 0) {
                console.error('âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨Ø·Ø§Ù‚Ø§Øª!');
                grid.innerHTML = '<p style="color: white; font-size: 24px; text-align: center; padding: 40px;">Ø®Ø·Ø£: Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª</p>';
            }
        }

        async function vote(votedId) {
            console.log('ğŸ—³ï¸ Ø§Ù„ØªØµÙˆÙŠØª Ø¹Ù„Ù‰:', votedId);
            await roomRef.child(`currentRound/votes/${state.playerId}`).set(votedId);
            document.getElementById('voteWaiting').classList.remove('hidden');
            console.log('âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØª');
        }
        
        function showGuessScreen() {
            console.log('ğŸ¯ Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ®Ù…ÙŠÙ† Ù„Ù„Ù…ØªØ·ÙÙ„');
            showScreen('guessScreen');
            
            const round = state.roomData.currentRound;
            const category = state.roomData.category;
            
            console.log('ğŸ“‚ Ø§Ù„ÙØ¦Ø©:', category);
            console.log('ğŸ“ Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©:', round.mainWord);
            
            const usedWordSet = wordSets[category].find(set => 
                set.main === round.mainWord
            );
            
            console.log('ğŸ” Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„ÙƒÙ„Ù…Ø§Øª:', usedWordSet);
            
            if (!usedWordSet || !usedWordSet.options) {
                console.error('âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø®ÙŠØ§Ø±Ø§Øª Ù„Ù„ÙƒÙ„Ù…Ø©');
                alert('Ø®Ø·Ø£: Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø®ÙŠØ§Ø±Ø§Øª!');
                return;
            }
            
            console.log('âœ… Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª:', usedWordSet.options);
            
            const optionsDiv = document.getElementById('guessOptions');
            optionsDiv.innerHTML = '';
            optionsDiv.style.display = 'grid';
            
            usedWordSet.options.forEach((option, index) => {
                console.log(`â• Ø¥Ø¶Ø§ÙØ© Ø®ÙŠØ§Ø± ${index + 1}:`, option);
                
                const card = document.createElement('div');
                card.className = 'vote-card';
                card.textContent = option;
                
                card.style.cursor = 'pointer';
                card.style.fontSize = '28px';
                card.style.fontWeight = '900';
                card.style.padding = '40px 20px';
                card.style.background = 'linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)';
                card.style.border = '5px solid #d97706';
                card.style.borderRadius = '20px';
                card.style.color = '#1f2937';
                card.style.textShadow = '1px 1px 2px rgba(255,255,255,0.5)';
                card.style.minHeight = '120px';
                card.style.display = 'flex';
                card.style.alignItems = 'center';
                card.style.justifyContent = 'center';
                card.style.transition = 'all 0.3s';
                
                card.addEventListener('click', async function() {
                    if (round.impostorGuess) {
                        console.log('âš ï¸ ØªÙ… Ø§Ù„ØªØ®Ù…ÙŠÙ† Ø¨Ø§Ù„ÙØ¹Ù„');
                        return;
                    }
                    
                    console.log('ğŸ¯ ØªÙ… Ø§Ø®ØªÙŠØ§Ø±:', option);
                    
                    document.querySelectorAll('#guessOptions .vote-card').forEach(c => {
                        c.classList.remove('selected');
                        c.style.background = 'linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)';
                        c.style.borderColor = '#d97706';
                        c.style.transform = 'scale(1)';
                    });
                    
                    this.classList.add('selected');
                    this.style.background = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';
                    this.style.borderColor = '#047857';
                    this.style.transform = 'scale(1.05)';
                    
                    console.log('ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªØ®Ù…ÙŠÙ† Ø¥Ù„Ù‰ Firebase:', option);
                    await roomRef.child('currentRound/impostorGuess').set(option);
                    
                    document.getElementById('guessWait').classList.remove('hidden');
                    document.getElementById('guessOptions').style.display = 'none';
                    
                    console.log('âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªØ®Ù…ÙŠÙ† Ø¨Ù†Ø¬Ø§Ø­');
                    
                    if (state.isHost) {
                        console.log('ğŸ  Ø§Ù„Ù„ÙŠ Ø¨Ø±Ø§ Ø§Ù„Ø³Ø§Ù„ÙØ© Ù‡Ùˆ Ø§Ù„Ù‡ÙˆØ³Øª - ÙŠÙ†ØªÙ‚Ù„ Ù„Ù„Ù†ØªØ§Ø¦Ø¬...');
                        setTimeout(() => {
                            roomRef.update({ state: 'results' });
                        }, 1500);
                    } else {
                        console.log('ğŸ“¢ Ø§Ù„Ù„ÙŠ Ø¨Ø±Ø§ Ø§Ù„Ø³Ø§Ù„ÙØ© Ù„ÙŠØ³ Ø§Ù„Ù‡ÙˆØ³Øª - ÙˆØ¶Ø¹ Ø¹Ù„Ø§Ù…Ø© Ù„Ù„Ø§Ù†ØªÙ‚Ø§Ù„...');
                        await roomRef.child('currentRound/impostorGuessReady').set(true);
                    }
                });
                
                optionsDiv.appendChild(card);
            });
            
            console.log(`âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© ${usedWordSet.options.length} Ø®ÙŠØ§Ø± Ø¨Ù†Ø¬Ø§Ø­`);
            
            if (round.impostorGuess) {
                console.log('â„¹ï¸ Ø§Ù„Ù„ÙŠ Ø¨Ø±Ø§ Ø§Ù„Ø³Ø§Ù„ÙØ© Ø®Ù…Ù‘Ù† Ø¨Ø§Ù„ÙØ¹Ù„:', round.impostorGuess);
                document.getElementById('guessWait').classList.remove('hidden');
                document.getElementById('guessOptions').style.display = 'none';
            }
        }

        function showQuestionsScreen() {
            console.log('ğŸ“ Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…Ù†Ø¸Ù…Ø©');
            showScreen('questionsScreen');
            
            const round = state.roomData.currentRound;
            const players = state.roomData.players;
            const questions = round.questions || [];
            const currentIndex = round.currentQuestionIndex || 0;
            
            if (currentIndex >= questions.length) {
                console.log('âœ… Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…Ù†Ø¸Ù…Ø©');
                if (state.isHost) {
                    roomRef.update({ 
                        state: 'freeQuestions',
                        'currentRound/freeQuestionsStartTime': Date.now()
                    });
                }
                return;
            }
            
            const currentQ = questions[currentIndex];
            const askerName = players[currentQ.asker]?.name || 'Ù„Ø§Ø¹Ø¨';
            const answererName = players[currentQ.answerer]?.name || 'Ù„Ø§Ø¹Ø¨';
            
            document.getElementById('questionNum').textContent = currentIndex + 1;
            document.getElementById('askerName').textContent = askerName;
            document.getElementById('answererName').textContent = answererName;
            document.getElementById('askerName2').textContent = askerName;
            document.getElementById('answererName2').textContent = answererName;
            
            document.getElementById('hostQuestionControls').classList.toggle('hidden', !state.isHost);
            document.getElementById('waitQuestionHost').classList.toggle('hidden', state.isHost);
        }

        function showFreeQuestionsScreen() {
            console.log('ğŸ’¬ Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø­Ø±Ø©');
            showScreen('freeQuestionsScreen');
            
            const round = state.roomData.currentRound;
            const startTime = round.freeQuestionsStartTime || Date.now();
            const duration = 60;
            
            const updateTimer = () => {
                const elapsed = Math.floor((Date.now() - startTime) / 1000);
                const remaining = Math.max(0, duration - elapsed);
                
                const timerEl = document.getElementById('freeTimer');
                if (timerEl) {
                    timerEl.textContent = remaining;
                }
                
                if (remaining === 0 && state.isHost) {
                    roomRef.update({ state: 'voting' });
                    return;
                }
                
                if (state.roomData && state.roomData.state === 'freeQuestions') {
                    setTimeout(updateTimer, 1000);
                }
            };
            
            updateTimer();
            
            document.getElementById('hostFreeControls').classList.toggle('hidden', !state.isHost);
        }

        function showResults() {
            showScreen('resultScreen');

            const round = state.roomData.currentRound;
            const players = state.roomData.players;
            
            // âœ¨ Ø¥ØµÙ„Ø§Ø­: ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ÙØ¦Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© Ù„Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©
            selectedCategoryForNextRound = state.roomData.category || 'Ø­ÙŠÙˆØ§Ù†Ø§Øª';

            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£ØµÙˆØ§Øª
            const voteCount = {};
            Object.values(round.votes).forEach(v => {
                voteCount[v] = (voteCount[v] || 0) + 1;
            });

            const mostVoted = Object.keys(voteCount).reduce((a, b) => 
                voteCount[a] > voteCount[b] ? a : b
            );

            const impostorCaught = mostVoted === round.impostorId;
            const impostorGuessCorrect = round.impostorGuess === round.mainWord;

            // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
            document.getElementById('resultEmoji').textContent = impostorCaught ? 'ğŸ‰' : 'ğŸ˜±';
            document.getElementById('resultTitle').textContent = 
                impostorCaught ? 'Ø§Ù„Ù„Ø§Ø¹Ø¨ÙˆÙ† ÙØ§Ø²ÙˆØ§!' : 'Ø§Ù„Ù„ÙŠ Ø¨Ø±Ø§ Ø§Ù„Ø³Ø§Ù„ÙØ© Ù†Ø¬Ø§!';
            document.getElementById('impostorName').textContent = players[round.impostorId].name;
            document.getElementById('mainWord').textContent = round.mainWord;
            document.getElementById('impostorWord').textContent = round.impostorWord;

            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø§Ù„Ù„ÙŠ ØµÙˆØªÙˆØ§ ØµØ­
            const correctVoters = [];
            Object.entries(round.votes).forEach(([voterId, votedId]) => {
                if (votedId === round.impostorId) {
                    correctVoters.push(players[voterId].name);
                }
            });

            // Ø¹Ø±Ø¶ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¬ÙˆÙ„Ø©
            const resultsDiv = document.getElementById('roundResults');
            resultsDiv.innerHTML = '<div class="status" style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; margin: 20px 0;">';
            resultsDiv.innerHTML += '<h3 style="color: #ffffff; margin-bottom: 15px; font-size: 20px;">ğŸ“Š Ù†ØªØ§Ø¦Ø¬ Ù‡Ø°Ù‡ Ø§Ù„Ø¬ÙˆÙ„Ø©:</h3>';

            if (impostorCaught) {
                resultsDiv.innerHTML += '<p style="color: #2ecc71; font-weight: 700; font-size: 18px; margin: 10px 0;">âœ… Ø§Ù„Ø£ØºÙ„Ø¨ÙŠØ© Ø§ÙƒØªØ´ÙÙˆØ§ Ø§Ù„Ù„ÙŠ Ø¨Ø±Ø§ Ø§Ù„Ø³Ø§Ù„ÙØ©!</p>';
            } else {
                resultsDiv.innerHTML += '<p style="color: #e74c3c; font-weight: 700; font-size: 18px; margin: 10px 0;">âŒ Ø§Ù„Ù„ÙŠ Ø¨Ø±Ø§ Ø§Ù„Ø³Ø§Ù„ÙØ© Ù†Ø¬Ø§ Ù…Ù† Ø§Ù„Ø£ØºÙ„Ø¨ÙŠØ©!</p>';
            }

            // Ø¹Ø±Ø¶ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø§Ù„Ù„ÙŠ ØµÙˆØªÙˆØ§ ØµØ­ ÙˆØ­ØµÙ„ÙˆØ§ Ù†Ù‚Ø§Ø·
            if (correctVoters.length > 0) {
                resultsDiv.innerHTML += '<p style="color: #2ecc71; font-weight: 700; font-size: 16px; margin: 10px 0;">ğŸ¯ ØµÙˆÙ‘ØªÙˆØ§ ØµØ­ ÙˆØ­ØµÙ„ÙˆØ§ Ù†Ù‚Ø·Ø©: <strong>' + correctVoters.join('ØŒ ') + '</strong></p>';
            } else {
                resultsDiv.innerHTML += '<p style="color: #ffa500; font-weight: 700; font-size: 16px; margin: 10px 0;">ğŸ˜… Ù…Ø§ Ø£Ø­Ø¯ ØµÙˆÙ‘Øª ØµØ­!</p>';
            }

            if (impostorGuessCorrect) {
                resultsDiv.innerHTML += '<p style="color: #d4af37; font-weight: 700; font-size: 18px; margin: 10px 0;">ğŸ¯ Ø§Ù„Ù„ÙŠ Ø¨Ø±Ø§ Ø§Ù„Ø³Ø§Ù„ÙØ© Ø®Ù…Ù‘Ù† Ø§Ù„ÙƒÙ„Ù…Ø© ØµØ­: <strong>' + round.impostorGuess + '</strong> - Ù†Ù‚Ø·Ø© Ù„Ù‡!</p>';
            } else if (round.impostorGuess) {
                resultsDiv.innerHTML += '<p style="color: #e74c3c; font-weight: 700; font-size: 18px; margin: 10px 0;">âŒ Ø§Ù„Ù„ÙŠ Ø¨Ø±Ø§ Ø§Ù„Ø³Ø§Ù„ÙØ© Ø®Ù…Ù‘Ù† ØºÙ„Ø·: <strong>' + round.impostorGuess + '</strong> (Ø§Ù„ØµØ­ÙŠØ­Ø©: <strong>' + round.mainWord + '</strong>)</p>';
            }
            
            resultsDiv.innerHTML += '</div>';

            // âœ¨ Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ù‚Ø§Ø· - Ù†Ù‚Ø·Ø© Ù„ÙƒÙ„ Ù…Ù† ØµÙˆÙ‘Øª ØµØ­ (Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø· Ù„ÙƒÙ„ Ø¬ÙˆÙ„Ø©)
            var roundId = round.impostorId + '_' + round.mainWord;
            if (state.isHost && lastScoredRound !== roundId) {
                lastScoredRound = roundId;
                const newScores = { ...state.roomData.scores };

                // Ù†Ù‚Ø·Ø© Ù„ÙƒÙ„ Ù„Ø§Ø¹Ø¨ ØµÙˆÙ‘Øª Ø¹Ù„Ù‰ Ø§Ù„Ù„ÙŠ Ø¨Ø±Ø§ Ø§Ù„Ø³Ø§Ù„ÙØ© (Ø¨ØºØ¶ Ø§Ù„Ù†Ø¸Ø± Ø¹Ù† Ø§Ù„Ø£ØºÙ„Ø¨ÙŠØ©)
                Object.entries(round.votes).forEach(([voterId, votedId]) => {
                    if (votedId === round.impostorId) {
                        newScores[voterId] = (newScores[voterId] || 0) + 1;
                        console.log(`âœ… ${players[voterId].name} Ø­ØµÙ„ Ø¹Ù„Ù‰ Ù†Ù‚Ø·Ø© (ØµÙˆÙ‘Øª ØµØ­)`);
                    }
                });

                // Ù†Ù‚Ø·Ø© Ù„Ù„ÙŠ Ø¨Ø±Ø§ Ø§Ù„Ø³Ø§Ù„ÙØ© Ø¥Ø°Ø§ Ø®Ù…Ù‘Ù† Ø§Ù„ÙƒÙ„Ù…Ø© ØµØ­ (Ù…Ø³ØªÙ‚Ù„ Ø¹Ù† ØªØµÙˆÙŠØª Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†)
                if (impostorGuessCorrect) {
                    newScores[round.impostorId] = (newScores[round.impostorId] || 0) + 1;
                    console.log(`âœ… ${players[round.impostorId].name} (Ø§Ù„Ù…ØªØ·ÙÙ„) Ø­ØµÙ„ Ø¹Ù„Ù‰ Ù†Ù‚Ø·Ø© (Ø®Ù…Ù‘Ù† ØµØ­)`);
                }

                roomRef.child('scores').set(newScores);
            }

            // Ø¹Ø±Ø¶ Ø§Ù„Ù†Ù‚Ø§Ø·
            const scoreList = document.getElementById('scoreList');
            scoreList.innerHTML = '';
            const scores = state.roomData.scores;
            const sortedScores = Object.entries(scores).sort((a, b) => b[1] - a[1]);

            sortedScores.forEach(([id, score]) => {
                const div = document.createElement('div');
                div.className = 'player-item';
                div.innerHTML = `
                    <span class="player-name">ğŸ‘¤ ${players[id].name}</span>
                    <span class="points">${score} ğŸ†</span>
                `;
                scoreList.appendChild(div);
            });

            // ÙØ­Øµ Ø§Ù„ÙØ§Ø¦Ø²
            var winScore = state.roomData.winScore || 5;
            var winner = sortedScores.find(function(entry) { return entry[1] >= winScore; });
            if (winner) {
                document.getElementById('winnerAnnounce').classList.remove('hidden');
                document.getElementById('winnerName').textContent = players[winner[0]].name;
                document.getElementById('winnerPoints').textContent = winner[1];
                document.getElementById('nextRoundBtn').style.display = 'none';
            } else {
                document.getElementById('winnerAnnounce').classList.add('hidden');
                document.getElementById('nextRoundBtn').style.display = '';
            }

            document.getElementById('hostResult').classList.toggle('hidden', !state.isHost);
        }

        // Ø£Ø²Ø±Ø§Ø± Ø§Ù„ÙØ¦Ø§Øª ÙÙŠ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
        document.addEventListener('click', (e) => {
            if (e.target.closest('.category-btn-result')) {
                const btn = e.target.closest('.category-btn-result');
                selectedCategoryForNextRound = btn.dataset.category;
                
                document.querySelectorAll('#categoryModalGrid .category-btn-result').forEach(b => 
                    b.classList.remove('active')
                );
                btn.classList.add('active');
                
                console.log('ğŸ“‚ ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙØ¦Ø© Ù„Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:', selectedCategoryForNextRound);
            }
        });

        // Ù…ØªØºÙŠØ± Ù„ØªØ­Ø¯ÙŠØ¯ Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© (Ø¬ÙˆÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø© Ø£Ùˆ Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©)
        let isNewGameReset = false;

        // Ø²Ø± Ø§Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ© - ÙŠØ±Ø¬Ø¹ Ù„Ù„ÙˆØ¨ÙŠ Ù…Ø¨Ø§Ø´Ø±Ø©
        document.getElementById('nextRoundBtn').addEventListener('click', function() {
            lastScoredRound = null;
            if (!roomRef) { alert('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„'); return; }
            roomRef.update({
                state: 'lobby',
                currentRound: null
            });
        });

        // Ø²Ø± ØªØ£ÙƒÙŠØ¯ Ø§Ù„ÙØ¦Ø© ÙˆØ¨Ø¯Ø¡ Ø§Ù„Ø¬ÙˆÙ„Ø©
        document.getElementById('confirmCategoryBtn').addEventListener('click', async () => {
            lastScoredRound = null;
            console.log('ğŸ® Ø¨Ø¯Ø¡ Ø¬ÙˆÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù…Ø¹ Ø§Ù„ÙØ¦Ø©:', selectedCategoryForNextRound);
            
            if (!selectedCategoryForNextRound) {
                selectedCategoryForNextRound = state.roomData.category || 'Ø­ÙŠÙˆØ§Ù†Ø§Øª';
            }
            
            try {
                if (isNewGameReset) {
                    // Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù…Ø¹ ØµÙØ± Ø§Ù„Ù†Ù‚Ø§Ø·
                    const scores = {};
                    Object.keys(state.roomData.players).forEach(id => {
                        scores[id] = 0;
                    });
                    
                    await roomRef.update({
                        category: selectedCategoryForNextRound,
                        state: 'lobby',
                        currentRound: null,
                        scores
                    });
                    console.log('âœ… ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¨Ù†Ø¬Ø§Ø­');
                } else {
                    // Ø¬ÙˆÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø© ÙÙ‚Ø·
                    await roomRef.update({
                        category: selectedCategoryForNextRound,
                        state: 'lobby',
                        currentRound: null
                    });
                    console.log('âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØºØ±ÙØ© Ø¨Ù†Ø¬Ø§Ø­');
                }
                
                document.getElementById('categoryModal').classList.add('hidden');
                document.getElementById('categoryModal').style.display = 'none';
            } catch (e) {
                console.error('âŒ Ø®Ø·Ø£:', e);
                alert('Ø­Ø¯Ø« Ø®Ø·Ø£! Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
            }
        });

        // Ø²Ø± Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù†Ø§ÙØ°Ø©
        document.getElementById('cancelCategoryBtn').addEventListener('click', () => {
            document.getElementById('categoryModal').classList.add('hidden');
            document.getElementById('categoryModal').style.display = 'none';
        });

        // âœ¨ Ø¥ØµÙ„Ø§Ø­: Ø²Ø± Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© - ÙŠÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙØ¦Ø© Ø£ÙŠØ¶Ø§Ù‹
        document.getElementById('newGameBtn').addEventListener('click', () => {
            isNewGameReset = true;
            document.getElementById('categoryModal').classList.remove('hidden');
            document.getElementById('categoryModal').style.display = 'flex';
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ¦Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© ÙÙŠ Ø§Ù„Ù†Ø§ÙØ°Ø©
            document.querySelectorAll('#categoryModalGrid .category-btn-result').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.category === (selectedCategoryForNextRound || state.roomData.category || 'Ø­ÙŠÙˆØ§Ù†Ø§Øª'));
            });
        });

        // âœ¨ Ø²Ø± Ø¬Ø¯ÙŠØ¯: Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
        document.getElementById('backToMenuBtn').addEventListener('click', async () => {
            console.log('ğŸ  Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©');
            
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©ØŸ Ø³ÙŠØªÙ… Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©.')) {
                try {
                    if (roomRef) {
                        if (state.isHost) {
                            await roomRef.remove();
                        } else {
                            await roomRef.child(`players/${state.playerId}`).remove();
                            await roomRef.child(`scores/${state.playerId}`).remove();
                        }
                        roomRef.off();
                        roomRef = null;
                    }
                    
                    state = {
                        roomCode: '',
                        playerId: '',
                        playerName: '',
                        isHost: false,
                        category: 'Ø­ÙŠÙˆØ§Ù†Ø§Øª',
                        roomData: null
                    };
                    
                    showScreen('homeScreen');
                } catch (e) {
                    console.error('âŒ Ø®Ø·Ø£:', e);
                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£! Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
                }
            }
        });

        document.getElementById('exitFromResult').addEventListener('click', async () => {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ')) {
                try {
                    if (roomRef) {
                        if (state.isHost) {
                            await roomRef.remove();
                        } else {
                            await roomRef.child(`players/${state.playerId}`).remove();
                            await roomRef.child(`scores/${state.playerId}`).remove();
                        }
                        roomRef.off();
                        roomRef = null;
                    }
                    clearSession();
                    destroyChat();
                    state = { roomCode: '', playerId: '', playerName: '', isHost: false, category: 'Ø­ÙŠÙˆØ§Ù†Ø§Øª', roomData: null };
                    showScreen('homeScreen');
                } catch (e) {
                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£! Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
                }
            }
        });

        document.getElementById('leaveBtn').addEventListener('click', async () => {
            if (roomRef) {
                if (state.isHost) {
                    await roomRef.remove();
                } else {
                    await roomRef.child(`players/${state.playerId}`).remove();
                    await roomRef.child(`scores/${state.playerId}`).remove();
                }
                roomRef.off();
            }
            clearSession();
            destroyChat();
            state = {
                roomCode: '',
                playerId: '',
                playerName: '',
                isHost: false,
                category: 'Ø­ÙŠÙˆØ§Ù†Ø§Øª',
                roomData: null
            };
            showScreen('homeScreen');
        });

        document.getElementById('backToHomeBtn').addEventListener('click', async () => {
            if (roomRef) {
                if (state.isHost) {
                    await roomRef.remove();
                } else {
                    await roomRef.child(`players/${state.playerId}`).remove();
                    await roomRef.child(`scores/${state.playerId}`).remove();
                }
                roomRef.off();
                roomRef = null;
            }
            clearSession();
            destroyChat();
            state = {
                roomCode: '',
                playerId: '',
                playerName: '',
                isHost: false,
                category: 'Ø­ÙŠÙˆØ§Ù†Ø§Øª',
                roomData: null
            };
            showScreen('homeScreen');
        });

        function showScreen(id) {
            document.querySelectorAll('.card').forEach(c => c.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
        }

        // ========== Session Persistence (F5 Protection) ==========
        function saveSession() {
            try {
                sessionStorage.setItem('menBra', JSON.stringify({
                    roomCode: state.roomCode,
                    playerId: state.playerId,
                    playerName: state.playerName,
                    isHost: state.isHost,
                    category: state.category
                }));
            } catch (e) {}
        }

        function loadSession() {
            try {
                var s = JSON.parse(sessionStorage.getItem('menBra'));
                if (s && s.roomCode && s.playerId) {
                    state.roomCode = s.roomCode;
                    state.playerId = s.playerId;
                    state.playerName = s.playerName;
                    state.isHost = s.isHost;
                    state.category = s.category || 'Ø­ÙŠÙˆØ§Ù†Ø§Øª';
                    return true;
                }
            } catch(e) {}
            return false;
        }

        function clearSession() {
            sessionStorage.removeItem('menBra');
        }

        // ========== Kick Player ==========
        async function kickPlayer(playerId) {
            if (!state.isHost || !state.roomCode) return;
            if (!confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø·Ø±Ø¯ Ù‡Ø°Ø§ Ø§Ù„Ù„Ø§Ø¹Ø¨ØŸ')) return;
            try {
                await db.ref('rooms/' + state.roomCode + '/players/' + playerId).remove();
                await db.ref('rooms/' + state.roomCode + '/scores/' + playerId).remove();
            } catch(e) {}
        }

        // ========== Session Restore on Page Load ==========
        (function() {
            if (loadSession()) {
                var checkReady = setInterval(function() {
                    if (!db || typeof initChat === 'undefined') return;
                    clearInterval(checkReady);
                    
                    db.ref('rooms/' + state.roomCode).once('value').then(function(snap) {
                        if (snap.exists()) {
                            var d = snap.val();
                            if (d.players && d.players[state.playerId]) {
                                state.isHost = (d.host === state.playerId);
                                state.roomData = d;
                                
                                roomRef = db.ref('rooms/' + state.roomCode);
                                roomRef.on('value', function(snapshot) {
                                    state.roomData = snapshot.val();
                                    updateUI();
                                });
                                
                                initChat();
                                saveSession();
                            } else {
                                clearSession();
                                showScreen('homeScreen');
                            }
                        } else {
                            clearSession();
                            showScreen('homeScreen');
                        }
                    }).catch(function() {
                        clearSession();
                        showScreen('homeScreen');
                    });
                }, 100);
            }
        })();

    </script>

    <!-- Chat Overlay -->
    <div class="chat-overlay" id="chatOverlay" onclick="toggleChat()"></div>
    <button class="chat-fab hidden" id="chatFab" onclick="toggleChat()">
        ğŸ’¬
        <div class="chat-badge" id="chatBadge">0</div>
    </button>
    <div class="chat-panel" id="chatPanel">
        <div class="chat-drag-handle" id="chatDragHandle"></div>
        <div class="chat-header">
            <h4><span>ğŸ’¬</span> <span class="chat-online-dot"></span>Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†</h4>
            <button class="chat-close-btn" onclick="toggleChat()">âœ•</button>
        </div>
        <div class="chat-messages" id="chatMessages">
            <div class="chat-empty" id="chatEmpty"><div>ğŸ’¬<br>Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ù…Ø¹ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†</div></div>
        </div>
        <div class="chat-input-area">
            <input type="text" id="chatInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø©..." maxlength="200" autocomplete="off" enterkeyhint="send">
            <button class="chat-send-btn" id="chatSendBtn" onclick="sendChatMessage()">â¤</button>
        </div>
    </div>

    <script>
        // ========== Chat System ==========
        var chatRef = null;
        var chatOpen = false;
        var chatUnread = 0;
        var chatInitialized = false;
        var lastSenderId = null;
        var chatDragging = false;
        var chatDragStartY = 0;
        var chatDragCurrentY = 0;

        function initChat() {
            if (!state.roomCode || chatInitialized) return;
            chatInitialized = true;
            document.getElementById('chatFab').classList.remove('hidden');
            chatRef = db.ref('rooms/' + state.roomCode + '/chat');
            chatRef.on('child_added', function(snap) {
                var msg = snap.val();
                renderChatMessage(msg);
                if (!chatOpen) {
                    chatUnread++;
                    updateChatBadge();
                    var fab = document.getElementById('chatFab');
                    fab.classList.remove('has-unread');
                    void fab.offsetWidth;
                    fab.classList.add('has-unread');
                }
                scrollChatToBottom();
            });
            setupChatDrag();
            setupKeyboardHandling();
        }

        function destroyChat() {
            if (chatRef) chatRef.off();
            chatRef = null;
            chatInitialized = false;
            chatOpen = false;
            chatUnread = 0;
            lastSenderId = null;
            var fab = document.getElementById('chatFab');
            if (fab) fab.classList.add('hidden');
            var panel = document.getElementById('chatPanel');
            if (panel) panel.classList.remove('open');
            var overlay = document.getElementById('chatOverlay');
            if (overlay) overlay.classList.remove('active');
            var msgs = document.getElementById('chatMessages');
            if (msgs) msgs.innerHTML = '<div class="chat-empty" id="chatEmpty"><div>ğŸ’¬<br>Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ù…Ø¹ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†</div></div>';
            updateChatBadge();
        }

        function toggleChat() {
            chatOpen = !chatOpen;
            var panel = document.getElementById('chatPanel');
            var overlay = document.getElementById('chatOverlay');
            var fab = document.getElementById('chatFab');
            if (chatOpen) {
                panel.classList.add('open');
                overlay.classList.add('active');
                fab.style.opacity = '0';
                fab.style.pointerEvents = 'none';
                chatUnread = 0;
                updateChatBadge();
                setTimeout(function() {
                    if (window.innerWidth >= 768) document.getElementById('chatInput').focus();
                }, 350);
                scrollChatToBottom();
            } else {
                panel.classList.remove('open');
                overlay.classList.remove('active');
                fab.style.opacity = '1';
                fab.style.pointerEvents = 'auto';
                document.getElementById('chatInput').blur();
            }
        }

        function scrollChatToBottom() {
            var c = document.getElementById('chatMessages');
            requestAnimationFrame(function() { c.scrollTop = c.scrollHeight; });
        }

        function updateChatBadge() {
            var badge = document.getElementById('chatBadge');
            if (!badge) return;
            if (chatUnread > 0) {
                badge.textContent = chatUnread > 99 ? '99+' : chatUnread;
                badge.classList.add('visible');
            } else {
                badge.classList.remove('visible');
            }
        }

        function sendChatMessage() {
            var input = document.getElementById('chatInput');
            var text = input.value.trim();
            if (!text || !state.roomCode || !state.playerName || !chatRef) return;
            var empty = document.getElementById('chatEmpty');
            if (empty) empty.style.display = 'none';
            chatRef.push({
                senderId: state.playerId,
                senderName: state.playerName,
                text: text,
                time: Date.now()
            });
            input.value = '';
            updateSendBtnState();
            if (window.innerWidth >= 768) input.focus();
        }

        function renderChatMessage(msg) {
            var container = document.getElementById('chatMessages');
            var empty = document.getElementById('chatEmpty');
            if (empty) empty.style.display = 'none';
            var div = document.createElement('div');
            var isMe = msg.senderId === state.playerId;
            var isSystem = msg.type === 'system';
            if (isSystem) {
                div.className = 'chat-msg system-msg';
                div.textContent = msg.text;
                lastSenderId = null;
            } else {
                var isGrouped = lastSenderId === msg.senderId;
                div.className = 'chat-msg ' + (isMe ? 'me' : 'other') + (isGrouped ? ' grouped' : '');
                var time = new Date(msg.time);
                var hours = time.getHours();
                var minutes = time.getMinutes();
                var ampm = hours >= 12 ? 'Ù…' : 'Øµ';
                hours = hours % 12 || 12;
                var timeStr = hours + ':' + (minutes < 10 ? '0' : '') + minutes + ' ' + ampm;
                var d2 = document.createElement('div');
                d2.appendChild(document.createTextNode(msg.senderName));
                var safeName = d2.innerHTML;
                var d3 = document.createElement('div');
                d3.appendChild(document.createTextNode(msg.text));
                var safeText = d3.innerHTML;
                div.innerHTML = '<div class="msg-sender">' + safeName + '</div>' +
                    '<div class="msg-text">' + safeText + '</div>' +
                    '<div class="msg-time">' + timeStr + '</div>';
                lastSenderId = msg.senderId;
            }
            container.appendChild(div);
        }

        function updateSendBtnState() {
            var btn = document.getElementById('chatSendBtn');
            var input = document.getElementById('chatInput');
            if (!btn || !input) return;
            if (input.value.trim().length > 0) btn.classList.remove('disabled');
            else btn.classList.add('disabled');
        }

        function setupChatDrag() {
            var handle = document.getElementById('chatDragHandle');
            var panel = document.getElementById('chatPanel');
            if (!handle) return;
            handle.addEventListener('touchstart', function(e) {
                chatDragging = true;
                chatDragStartY = e.touches[0].clientY;
                panel.style.transition = 'none';
            }, { passive: true });
            document.addEventListener('touchmove', function(e) {
                if (!chatDragging) return;
                chatDragCurrentY = e.touches[0].clientY;
                var delta = chatDragCurrentY - chatDragStartY;
                if (delta > 0) panel.style.transform = 'translateY(' + delta + 'px)';
            }, { passive: true });
            document.addEventListener('touchend', function() {
                if (!chatDragging) return;
                chatDragging = false;
                panel.style.transition = '';
                var delta = chatDragCurrentY - chatDragStartY;
                if (delta > 100) { toggleChat(); }
                else { panel.style.transform = ''; if (chatOpen) panel.style.transform = 'translateY(0)'; }
            }, { passive: true });
        }

        function setupKeyboardHandling() {
            if (window.visualViewport) {
                window.visualViewport.addEventListener('resize', function() {
                    if (chatOpen) {
                        var panel = document.getElementById('chatPanel');
                        var viewportH = window.visualViewport.height;
                        var windowH = window.innerHeight;
                        var kbH = windowH - viewportH;
                        if (kbH > 100) { panel.style.bottom = kbH + 'px'; panel.style.maxHeight = (viewportH - 20) + 'px'; }
                        else { panel.style.bottom = '0'; panel.style.maxHeight = ''; }
                        scrollChatToBottom();
                    }
                });
            }
        }

        document.getElementById('chatInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') { e.preventDefault(); sendChatMessage(); }
        });
        document.getElementById('chatInput').addEventListener('input', function() { updateSendBtnState(); });
        document.addEventListener('keydown', function(e) { if (e.key === 'Escape' && chatOpen) toggleChat(); });
        updateSendBtnState();
    </script>
</body>
</html>
