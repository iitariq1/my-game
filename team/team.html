<!DOCTYPE html>

<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„Ø¹Ø¨Ø© Ø§Ù„ÙƒÙ†Ø¨Ø© - Ø£Ø³Ø¦Ù„Ø© ÙˆØ£Ø¬ÙˆØ¨Ø©</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #1a0b2e 0%, #3d2463 50%, #1a0b2e 100%);
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
        position: relative;
        overflow-x: hidden;
    }

    /* Ramadan decorations */
    body::before {
        content: 'ğŸŒ™âœ¨ğŸ•Œâœ¨â­âœ¨ğŸŒ™âœ¨ğŸ•Œâœ¨â­';
        position: fixed;
        top: 10px;
        left: 0;
        right: 0;
        text-align: center;
        font-size: 1.5em;
        z-index: 0;
        opacity: 0.6;
        animation: twinkle 3s ease-in-out infinite;
    }

    body::after {
        content: 'â­âœ¨ğŸŒ™âœ¨ğŸ•Œâœ¨â­âœ¨ğŸŒ™âœ¨ğŸ•Œ';
        position: fixed;
        bottom: 10px;
        left: 0;
        right: 0;
        text-align: center;
        font-size: 1.5em;
        z-index: 0;
        opacity: 0.6;
        animation: twinkle 3s ease-in-out infinite 1.5s;
    }

    @keyframes twinkle {
        0%, 100% { opacity: 0.4; }
        50% { opacity: 0.8; }
    }

    .container {
        background: linear-gradient(135deg, #2d1b4e 0%, #4a2c6f 100%);
        border-radius: 25px;
        box-shadow: 0 20px 60px rgba(0,0,0,0.5), 0 0 30px rgba(212, 175, 55, 0.3);
        max-width: 500px;
        width: 100%;
        padding: 40px;
        position: relative;
        z-index: 1;
        border: 3px solid #d4af37;
    }

    .host-container {
        max-width: 1400px;
        background: linear-gradient(135deg, #2d1b4e 0%, #4a2c6f 100%);
    }

    h1 {
        text-align: center;
        background: linear-gradient(135deg, #ffd700 0%, #ffed4e 50%, #ffd700 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 30px;
        font-size: 2.5em;
        text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        animation: glow 2s ease-in-out infinite;
    }

    @keyframes glow {
        0%, 100% { filter: brightness(1); }
        50% { filter: brightness(1.3); }
    }

    .screen {
        display: none;
    }

    .screen.active {
        display: block;
    }

    .input-group {
        margin-bottom: 20px;
    }

    .input-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: bold;
        color: #ffd700;
    }

    .input-group input, .input-group select {
        width: 100%;
        padding: 15px;
        border: 2px solid #d4af37;
        border-radius: 10px;
        font-size: 16px;
        transition: border-color 0.3s;
        background: rgba(255, 255, 255, 0.95);
    }

    .input-group input:focus, .input-group select:focus {
        outline: none;
        border-color: #ffd700;
        box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
    }

    .btn {
        width: 100%;
        padding: 15px;
        background: linear-gradient(135deg, #d4af37 0%, #aa8929 100%);
        color: #1a0b2e;
        border: none;
        border-radius: 10px;
        font-size: 1.2em;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s;
        margin-top: 10px;
        box-shadow: 0 5px 15px rgba(212, 175, 55, 0.4);
    }

    .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(212, 175, 55, 0.6);
    }

    .btn:active {
        transform: translateY(0);
    }

    .btn.secondary {
        background: linear-gradient(135deg, #6a4c93 0%, #533a71 100%);
        color: #ffd700;
    }

    .btn.success {
        background: linear-gradient(135deg, #00a86b 0%, #008c59 100%);
        color: white;
    }

    .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }

    .room-code {
        text-align: center;
        padding: 25px;
        background: linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(170, 137, 41, 0.2) 100%);
        border-radius: 20px;
        margin: 20px 0;
        border: 2px solid #d4af37;
    }

    .room-code h2 {
        color: #ffd700;
        font-size: 1.3em;
        margin-bottom: 10px;
    }

    .code {
        font-size: 3em;
        font-weight: bold;
        color: #ffd700;
        letter-spacing: 10px;
        font-family: monospace;
        text-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
    }

    .players-list {
        background: linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(170, 137, 41, 0.15) 100%);
        border-radius: 20px;
        padding: 20px;
        margin: 20px 0;
        border: 2px solid rgba(212, 175, 55, 0.5);
    }

    .players-list h3 {
        color: #ffd700;
        margin-bottom: 15px;
    }

    .player-item {
        background: rgba(255, 255, 255, 0.95);
        padding: 12px 15px;
        margin-bottom: 10px;
        border-radius: 10px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        border: 1px solid #d4af37;
    }

    .player-name {
        font-weight: bold;
        color: #2d1b4e;
    }

    .team-badge {
        padding: 5px 15px;
        border-radius: 20px;
        font-size: 0.9em;
        font-weight: bold;
        color: white;
    }

    .team-badge.team1 {
        background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
    }

    .team-badge.team2 {
        background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
    }

    .host-badge {
        background: linear-gradient(135deg, #ffd700 0%, #aa8929 100%);
        padding: 5px 15px;
        border-radius: 20px;
        font-size: 0.85em;
        color: #1a0b2e;
        font-weight: bold;
    }

    /* Host Screen Styles */
    .score-display {
        display: grid;
        grid-template-columns: 1fr auto 1fr;
        gap: 20px;
        margin-bottom: 30px;
        align-items: center;
    }

    .team-score {
        text-align: center;
        padding: 20px;
        background: linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(170, 137, 41, 0.2) 100%);
        border-radius: 20px;
        border: 2px solid #d4af37;
    }

    .team-score h3 {
        font-size: 1.5em;
        margin-bottom: 10px;
        color: #ffd700;
    }

    .team-score .score {
        font-size: 2.5em;
        font-weight: bold;
        background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    /* Center Couch Display */
    .center-couch {
        padding: 30px;
        background: linear-gradient(135deg, rgba(212, 175, 55, 0.3) 0%, rgba(170, 137, 41, 0.3) 100%);
        border-radius: 25px;
        border: 3px solid #ffd700;
        box-shadow: 0 0 30px rgba(255, 215, 0, 0.4);
        min-width: 300px;
    }

    .center-couch h3 {
        text-align: center;
        color: #ffd700;
        font-size: 1.8em;
        margin-bottom: 20px;
        text-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
    }

    .couch-seats-display {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }

    .couch-team-section {
        background: rgba(255, 255, 255, 0.1);
        padding: 15px;
        border-radius: 15px;
        border: 2px solid rgba(212, 175, 55, 0.5);
    }

    .couch-team-section h4 {
        color: #ffd700;
        margin-bottom: 10px;
        font-size: 1.2em;
        text-align: center;
    }

    .couch-player {
        background: linear-gradient(135deg, #ffd700 0%, #d4af37 100%);
        padding: 10px 15px;
        margin-bottom: 8px;
        border-radius: 10px;
        text-align: center;
        font-weight: bold;
        color: #1a0b2e;
        box-shadow: 0 3px 10px rgba(212, 175, 55, 0.5);
        animation: slideIn 0.5s ease-out;
    }

    @keyframes slideIn {
        from {
            opacity: 0;
            transform: translateX(-20px);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    .couch-empty {
        text-align: center;
        color: rgba(255, 215, 0, 0.5);
        font-style: italic;
        padding: 10px;
    }

    .question-display {
        background: linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(170, 137, 41, 0.2) 100%);
        padding: 30px;
        border-radius: 20px;
        margin-bottom: 20px;
        min-height: 150px;
        border: 2px solid #d4af37;
    }

    .question-text {
        font-size: 1.8em;
        color: #ffd700;
        text-align: center;
        margin-bottom: 20px;
        text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    }

    .timer-display {
        text-align: center;
        font-size: 5em;
        font-weight: bold;
        background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin: 20px 0;
        text-shadow: 0 0 30px rgba(255, 215, 0, 0.8);
    }

    .timer-display.warning {
        background: linear-gradient(135deg, #ff4444 0%, #cc0000 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        animation: pulse 0.5s infinite;
    }

    @keyframes pulse {
        0%, 100% { 
            opacity: 1;
            transform: scale(1);
        }
        50% { 
            opacity: 0.7;
            transform: scale(1.1);
        }
    }

    .options-display {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
        margin-top: 20px;
    }

    .option-box {
        background: rgba(255, 255, 255, 0.95);
        padding: 25px;
        border-radius: 15px;
        border: 3px solid #d4af37;
        text-align: center;
        font-size: 1.2em;
        font-weight: bold;
        color: #2d1b4e;
        transition: all 0.3s;
    }

    .option-box.correct {
        background: linear-gradient(135deg, #00a86b 0%, #008c59 100%);
        color: white;
        border-color: #00a86b;
        animation: correctPulse 0.5s ease-out;
    }

    .option-box.incorrect {
        background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        color: white;
        border-color: #e74c3c;
        animation: shake 0.5s ease-out;
    }

    @keyframes correctPulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); }
    }

    @keyframes shake {
        0%, 100% { transform: translateX(0); }
        25% { transform: translateX(-10px); }
        75% { transform: translateX(10px); }
    }

    /* Player Screen Styles */
    .buzz-button {
        width: 100%;
        height: 200px;
        font-size: 2.5em;
        background: linear-gradient(135deg, #ff6b35 0%, #f7931e 50%, #ff6b35 100%);
        color: white;
        border: none;
        border-radius: 25px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s;
        box-shadow: 0 15px 40px rgba(255, 107, 53, 0.5);
        border: 4px solid #ffd700;
        position: relative;
        overflow: hidden;
    }

    .buzz-button::before {
        content: 'ğŸ””';
        position: absolute;
        font-size: 3em;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        opacity: 0.3;
    }

    .buzz-button:active:not(:disabled) {
        transform: scale(0.95);
        box-shadow: 0 10px 30px rgba(255, 107, 53, 0.7);
    }

    .buzz-button:disabled {
        background: linear-gradient(135deg, #555 0%, #333 100%);
        cursor: not-allowed;
        box-shadow: none;
        border-color: #555;
    }

    .answer-options {
        display: grid;
        grid-template-columns: 1fr;
        gap: 15px;
        margin-top: 20px;
    }

    .answer-btn {
        padding: 25px;
        background: rgba(255, 255, 255, 0.95);
        border: 3px solid #d4af37;
        border-radius: 15px;
        font-size: 1.1em;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s;
        color: #2d1b4e;
    }

    .answer-btn:hover:not(:disabled) {
        background: linear-gradient(135deg, #ffd700 0%, #d4af37 100%);
        color: #1a0b2e;
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(212, 175, 55, 0.6);
    }

    .answer-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }

    .status-message {
        text-align: center;
        padding: 20px;
        margin: 20px 0;
        border-radius: 15px;
        font-size: 1.2em;
        font-weight: bold;
        border: 2px solid;
    }

    .status-message.info {
        background: linear-gradient(135deg, rgba(52, 152, 219, 0.2) 0%, rgba(41, 128, 185, 0.2) 100%);
        color: #5dade2;
        border-color: #3498db;
    }

    .status-message.success {
        background: linear-gradient(135deg, rgba(0, 168, 107, 0.2) 0%, rgba(0, 140, 89, 0.2) 100%);
        color: #52c997;
        border-color: #00a86b;
    }

    .status-message.error {
        background: linear-gradient(135deg, rgba(231, 76, 60, 0.2) 0%, rgba(192, 57, 43, 0.2) 100%);
        color: #ec7063;
        border-color: #e74c3c;
    }

    .status-message.warning {
        background: linear-gradient(135deg, rgba(243, 156, 18, 0.2) 0%, rgba(230, 126, 34, 0.2) 100%);
        color: #f5b041;
        border-color: #f39c12;
    }

    .player-choice-buttons {
        display: grid;
        grid-template-columns: 1fr;
        gap: 15px;
        margin-top: 20px;
    }

    .choice-btn {
        padding: 20px;
        border: none;
        border-radius: 15px;
        font-size: 1.2em;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s;
        border: 3px solid;
    }

    .choice-btn.sit {
        background: linear-gradient(135deg, #00a86b 0%, #008c59 100%);
        color: white;
        border-color: #00a86b;
    }

    .choice-btn.steal {
        background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        color: white;
        border-color: #c0392b;
    }

    .choice-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
    }

    .victory-screen {
        text-align: center;
        padding: 50px;
    }

    .victory-screen h2 {
        font-size: 3em;
        background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 30px;
        animation: glow 1s ease-in-out infinite;
    }

    .confetti {
        font-size: 5em;
        margin-bottom: 20px;
        animation: bounce 1s ease-in-out infinite;
    }

    @keyframes bounce {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-20px); }
    }

    .buzzer-indicator {
        text-align: center;
        padding: 15px;
        margin: 15px 0;
        background: linear-gradient(135deg, rgba(255, 107, 53, 0.3) 0%, rgba(247, 147, 30, 0.3) 100%);
        border-radius: 15px;
        border: 2px solid #ff6b35;
        color: #ffd700;
        font-weight: bold;
        font-size: 1.1em;
    }

    @media (max-width: 768px) {
        .container {
            padding: 20px;
        }

        h1 {
            font-size: 1.8em;
        }

        .code {
            font-size: 2em;
            letter-spacing: 5px;
        }

        .question-text {
            font-size: 1.3em;
        }

        .timer-display {
            font-size: 3em;
        }

        .options-display {
            grid-template-columns: 1fr;
        }

        .score-display {
            grid-template-columns: 1fr;
        }

        .center-couch {
            min-width: auto;
        }

        .buzz-button {
            height: 150px;
            font-size: 1.8em;
        }
    }
</style>
```

</head>
<body>
    <div class="container" id="mainContainer">
        <!-- Welcome Screen -->
        <div class="screen active" id="welcomeScreen">
            <h1>ğŸ›‹ï¸ Ù„Ø¹Ø¨Ø© Ø§Ù„ÙƒÙ†Ø¨Ø© ğŸŒ™</h1>
            <div style="text-align: center; color: #ffd700; margin-bottom: 30px; font-size: 1.1em;">
                âœ¨ Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ… âœ¨
            </div>
            <div class="input-group">
                <button class="btn" onclick="showCreateRoom()">Ø¥Ù†Ø´Ø§Ø¡ ØºØ±ÙØ© Ø¬Ø¯ÙŠØ¯Ø© ğŸ®</button>
            </div>
            <div class="input-group">
                <button class="btn secondary" onclick="showJoinRoom()">Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ù„ØºØ±ÙØ© ğŸšª</button>
            </div>
        </div>

```
    <!-- Create Room Screen -->
    <div class="screen" id="createRoomScreen">
        <h1>Ø¥Ù†Ø´Ø§Ø¡ ØºØ±ÙØ© Ø¬Ø¯ÙŠØ¯Ø© ğŸŒ™</h1>
        <div class="input-group">
            <label>Ø§Ø³Ù…Ùƒ:</label>
            <input type="text" id="hostName" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ">
        </div>
        <div class="input-group">
            <label>Ø§Ø³Ù… Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£ÙˆÙ„:</label>
            <input type="text" id="team1NameInput" placeholder="Ù…Ø«Ø§Ù„: Ø§Ù„Ø£Ø¨Ø·Ø§Ù„" value="Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø­Ù…Ø±">
        </div>
        <div class="input-group">
            <label>Ø§Ø³Ù… Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø«Ø§Ù†ÙŠ:</label>
            <input type="text" id="team2NameInput" placeholder="Ù…Ø«Ø§Ù„: Ø§Ù„Ù†Ø¬ÙˆÙ…" value="Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø²Ø±Ù‚">
        </div>
        <div class="input-group">
            <label>Ø¹Ø¯Ø¯ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† ÙÙŠ ÙƒÙ„ ÙØ±ÙŠÙ‚:</label>
            <select id="teamSizeInput">
                <option value="2">2 Ù„Ø§Ø¹Ø¨ÙŠÙ†</option>
                <option value="3">3 Ù„Ø§Ø¹Ø¨ÙŠÙ†</option>
                <option value="4">4 Ù„Ø§Ø¹Ø¨ÙŠÙ†</option>
                <option value="5">5 Ù„Ø§Ø¹Ø¨ÙŠÙ†</option>
            </select>
        </div>
        <button class="btn" onclick="createRoom()">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØºØ±ÙØ©</button>
        <button class="btn secondary" onclick="showWelcome()">Ø±Ø¬ÙˆØ¹</button>
    </div>

    <!-- Join Room Screen -->
    <div class="screen" id="joinRoomScreen">
        <h1>Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ù„ØºØ±ÙØ© ğŸŒ™</h1>
        <div class="input-group">
            <label>Ø§Ø³Ù…Ùƒ:</label>
            <input type="text" id="playerName" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ">
        </div>
        <div class="input-group">
            <label>ÙƒÙˆØ¯ Ø§Ù„ØºØ±ÙØ©:</label>
            <input type="text" id="roomCode" placeholder="0000" maxlength="4" pattern="[0-9]*">
        </div>
        <button class="btn" onclick="joinRoom()">Ø§Ù†Ø¶Ù…</button>
        <button class="btn secondary" onclick="showWelcome()">Ø±Ø¬ÙˆØ¹</button>
    </div>

    <!-- Lobby Screen (for Host) -->
    <div class="screen" id="lobbyScreen">
        <h1>ØºØ±ÙØ© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± ğŸŒ™</h1>
        <div class="room-code">
            <h2>ÙƒÙˆØ¯ Ø§Ù„ØºØ±ÙØ©:</h2>
            <div class="code" id="displayRoomCode">0000</div>
            <p style="margin-top: 10px; color: #ffd700;">Ø´Ø§Ø±Ùƒ Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ù…Ø¹ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†</p>
        </div>

        <div class="status-message info" style="margin-bottom: 20px;">
            <p><strong>Ø§Ø®ØªØ± ÙØ±ÙŠÙ‚Ùƒ Ù„Ù„Ø¹Ø¨:</strong></p>
        </div>

        <div id="hostTeamButtons" style="margin-bottom: 20px;"></div>

        <div class="players-list">
            <h3>Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† (<span id="playerCount">0</span>)</h3>
            <div id="playersListContainer"></div>
        </div>

        <button class="btn success" onclick="startGame()" id="startGameBtn" disabled>Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø© â–¶ï¸</button>
    </div>

    <!-- Team Selection Screen (for Players) -->
    <div class="screen" id="teamSelectionScreen">
        <h1>Ø§Ø®ØªØ± ÙØ±ÙŠÙ‚Ùƒ ğŸŒ™</h1>
        <div class="status-message info">
            <p>Ù…Ø±Ø­Ø¨Ø§Ù‹ <strong><span id="welcomePlayerName"></span></strong></p>
            <p>Ø§Ø®ØªØ± Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ø¥Ù„ÙŠÙ‡</p>
        </div>
        <div id="teamButtons"></div>
    </div>

    <!-- Waiting Screen (for Players) -->
    <div class="screen" id="waitingScreen">
        <h1>ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø¨Ø¯Ø¡... ğŸŒ™</h1>
        <div class="status-message info">
            <p>Ø£Ù†Øª ÙÙŠ <strong><span id="playerTeamName"></span></strong></p>
            <p>Ø§Ù†ØªØ¸Ø± Ø­ØªÙ‰ ÙŠØ¨Ø¯Ø£ Ø§Ù„Ù…Ø¶ÙŠÙ Ø§Ù„Ù„Ø¹Ø¨Ø©</p>
        </div>
        <div class="players-list">
            <h3>Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† ÙÙŠ Ø§Ù„ØºØ±ÙØ©:</h3>
            <div id="waitingPlayersListContainer"></div>
        </div>
    </div>

    <!-- Player Game Screen -->
    <div class="screen" id="playerGameScreen">
        <h1>ğŸ›‹ï¸ Ù„Ø¹Ø¨Ø© Ø§Ù„ÙƒÙ†Ø¨Ø© ğŸŒ™</h1>
        
        <div class="question-display" id="playerQuestionDisplay" style="display: none;">
            <div class="question-text" id="playerQuestionText"></div>
        </div>

        <div class="timer-display" id="playerTimer" style="display: none;">--</div>

        <div id="buzzerIndicator"></div>

        <div class="status-message info" id="playerStatus">
            Ø§Ù†ØªØ¸Ø± Ø§Ù„Ø³Ø¤Ø§Ù„...
        </div>

        <div class="player-controls">
            <button class="buzz-button" id="buzzButton" onclick="buzzIn()" disabled>
                Ø§Ø¶ØºØ· Ø§Ù„Ø¬Ø±Ø³! ğŸ””
            </button>
        </div>

        <div class="answer-options" id="playerAnswerOptions"></div>

        <div class="player-choice-buttons" id="playerChoiceButtons"></div>
    </div>
</div>

<!-- Host Game Screen -->
<div class="container host-container" id="hostGameContainer" style="display: none;">
    <h1>ğŸ›‹ï¸ Ù„Ø¹Ø¨Ø© Ø§Ù„ÙƒÙ†Ø¨Ø© ğŸŒ™</h1>
    
    <div class="score-display">
        <div class="team-score">
            <h3 id="displayTeam1Name">Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£ÙˆÙ„</h3>
            <div class="score" id="team1Score">0</div>
        </div>

        <!-- Center Couch Display -->
        <div class="center-couch">
            <h3>ğŸ›‹ï¸ ÙƒÙ†Ø¨Ø© Ø§Ù„ÙÙˆØ² ğŸ›‹ï¸</h3>
            <div class="couch-seats-display">
                <div class="couch-team-section">
                    <h4 id="couchTeam1Name">Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£ÙˆÙ„</h4>
                    <div id="team1CouchDisplay"></div>
                </div>
                <div class="couch-team-section">
                    <h4 id="couchTeam2Name">Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø«Ø§Ù†ÙŠ</h4>
                    <div id="team2CouchDisplay"></div>
                </div>
            </div>
        </div>

        <div class="team-score">
            <h3 id="displayTeam2Name">Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø«Ø§Ù†ÙŠ</h3>
            <div class="score" id="team2Score">0</div>
        </div>
    </div>

    <div class="question-display" id="questionDisplay">
        <div class="question-text">Ø§Ø¶ØºØ· "Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ" Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©</div>
    </div>

    <div class="timer-display" id="timerDisplay">--</div>

    <div id="hostBuzzerIndicator"></div>

    <div class="options-display" id="optionsDisplay"></div>

    <div class="status-message info" id="hostStatus">
        Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¨Ø¯Ø¡! ğŸŒ™
    </div>

    <button class="btn" onclick="nextQuestion()" id="nextQuestionBtn">Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ â–¶ï¸</button>

    <!-- Victory Screen -->
    <div class="victory-screen" id="victoryScreen" style="display: none;">
        <div class="confetti">ğŸ‰ğŸŒ™ğŸŠâœ¨ğŸ†</div>
        <h2 id="victoryMessage">ÙØ§Ø² Ø§Ù„ÙØ±ÙŠÙ‚!</h2>
        <div class="confetti">ğŸ†âœ¨ğŸŠğŸŒ™ğŸ‰</div>
        <button class="btn" onclick="location.reload()">Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰</button>
    </div>
</div>

<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
<script>
    const firebaseConfig = {
        apiKey: "AIzaSyBUXlgxP463b18dg9_Og_8EcMDLfLIr76o",
        authDomain: "team-cc63c.firebaseapp.com",
        databaseURL: "https://team-cc63c-default-rtdb.europe-west1.firebasedatabase.app/",
        projectId: "team-cc63c",
        storageBucket: "team-cc63c.firebasestorage.app",
        messagingSenderId: "511582595742",
        appId: "1:511582595742:web:3e21273dcf49bf26d7298f",
        measurementId: "G-PSDJ9N34PH"
    };

    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // Questions Database
    const questions = [
        {category: "Ø¯ÙŠÙ†ÙŠØ©", question: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø³ÙˆØ± Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…ØŸ", options: ["114 Ø³ÙˆØ±Ø©", "110 Ø³ÙˆØ±Ø©", "120 Ø³ÙˆØ±Ø©", "100 Ø³ÙˆØ±Ø©"], correct: 0},
        {category: "Ø¯ÙŠÙ†ÙŠØ©", question: "Ù…Ø§ Ù‡ÙŠ Ø£Ø·ÙˆÙ„ Ø³ÙˆØ±Ø© ÙÙŠ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…ØŸ", options: ["Ø³ÙˆØ±Ø© Ø§Ù„Ø¨Ù‚Ø±Ø©", "Ø³ÙˆØ±Ø© Ø¢Ù„ Ø¹Ù…Ø±Ø§Ù†", "Ø³ÙˆØ±Ø© Ø§Ù„Ù†Ø³Ø§Ø¡", "Ø³ÙˆØ±Ø© Ø§Ù„Ø£Ø¹Ø±Ø§Ù"], correct: 0},
        {category: "Ø¯ÙŠÙ†ÙŠØ©", question: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ØŸ", options: ["5 Ø£Ø±ÙƒØ§Ù†", "4 Ø£Ø±ÙƒØ§Ù†", "6 Ø£Ø±ÙƒØ§Ù†", "7 Ø£Ø±ÙƒØ§Ù†"], correct: 0},
        {category: "Ø¯ÙŠÙ†ÙŠØ©", question: "Ù…Ù† Ù‡Ùˆ Ø®Ø§ØªÙ… Ø§Ù„Ø£Ù†Ø¨ÙŠØ§Ø¡ØŸ", options: ["Ù…Ø­Ù…Ø¯ ï·º", "Ø¹ÙŠØ³Ù‰ Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø³Ù„Ø§Ù…", "Ù…ÙˆØ³Ù‰ Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø³Ù„Ø§Ù…", "Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø³Ù„Ø§Ù…"], correct: 0},
        {category: "Ø¯ÙŠÙ†ÙŠØ©", question: "ÙÙŠ Ø£ÙŠ Ø´Ù‡Ø± ÙØ±Ø¶ Ø§Ù„ØµÙŠØ§Ù…ØŸ", options: ["Ø±Ù…Ø¶Ø§Ù†", "Ø´Ø¹Ø¨Ø§Ù†", "Ø±Ø¬Ø¨", "Ø°Ùˆ Ø§Ù„Ù‚Ø¹Ø¯Ø©"], correct: 0},
        {category: "Ø¯ÙŠÙ†ÙŠØ©", question: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø§Ù„ØµÙ„ÙˆØ§Øª Ø§Ù„Ù…ÙØ±ÙˆØ¶Ø© ÙÙŠ Ø§Ù„ÙŠÙˆÙ…ØŸ", options: ["5 ØµÙ„ÙˆØ§Øª", "3 ØµÙ„ÙˆØ§Øª", "7 ØµÙ„ÙˆØ§Øª", "4 ØµÙ„ÙˆØ§Øª"], correct: 0},
        {category: "Ø¯ÙŠÙ†ÙŠØ©", question: "Ù…Ø§ Ù‡ÙŠ Ø£ÙˆÙ„ Ø³ÙˆØ±Ø© Ù†Ø²Ù„Øª ÙÙŠ Ø§Ù„Ù‚Ø±Ø¢Ù†ØŸ", options: ["Ø³ÙˆØ±Ø© Ø§Ù„Ø¹Ù„Ù‚", "Ø³ÙˆØ±Ø© Ø§Ù„ÙØ§ØªØ­Ø©", "Ø³ÙˆØ±Ø© Ø§Ù„Ø¨Ù‚Ø±Ø©", "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ø¯Ø«Ø±"], correct: 0},
        {category: "Ø¯ÙŠÙ†ÙŠØ©", question: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†ØŸ", options: ["6 Ø£Ø±ÙƒØ§Ù†", "5 Ø£Ø±ÙƒØ§Ù†", "7 Ø£Ø±ÙƒØ§Ù†", "4 Ø£Ø±ÙƒØ§Ù†"], correct: 0},
        {category: "Ø¯ÙŠÙ†ÙŠØ©", question: "ÙÙŠ Ø£ÙŠ Ø¹Ø§Ù… Ù‡Ø§Ø¬Ø± Ø§Ù„Ø±Ø³ÙˆÙ„ ï·º Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©ØŸ", options: ["622 Ù…ÙŠÙ„Ø§Ø¯ÙŠ", "610 Ù…ÙŠÙ„Ø§Ø¯ÙŠ", "630 Ù…ÙŠÙ„Ø§Ø¯ÙŠ", "615 Ù…ÙŠÙ„Ø§Ø¯ÙŠ"], correct: 0},
        {category: "Ø¯ÙŠÙ†ÙŠØ©", question: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø¢ÙŠØ§Øª Ø³ÙˆØ±Ø© Ø§Ù„ÙØ§ØªØ­Ø©ØŸ", options: ["7 Ø¢ÙŠØ§Øª", "5 Ø¢ÙŠØ§Øª", "9 Ø¢ÙŠØ§Øª", "6 Ø¢ÙŠØ§Øª"], correct: 0},
        
        {category: "Ø«Ù‚Ø§ÙÙŠØ©", question: "Ù…Ù† Ù‡Ùˆ Ù…Ø¤Ù„Ù Ø±ÙˆØ§ÙŠØ© 'Ù…Ø¦Ø© Ø¹Ø§Ù… Ù…Ù† Ø§Ù„Ø¹Ø²Ù„Ø©'ØŸ", options: ["ØºØ§Ø¨Ø±ÙŠÙŠÙ„ ØºØ§Ø±Ø³ÙŠØ§ Ù…Ø§Ø±ÙƒÙŠØ²", "Ø¨Ø§Ø¨Ù„Ùˆ Ù†ÙŠØ±ÙˆØ¯Ø§", "Ø®ÙˆØ±Ø®ÙŠ Ù„ÙˆÙŠØ³ Ø¨ÙˆØ±Ø®ÙŠØ³", "Ø¥ÙŠØ²Ø§Ø¨ÙŠÙ„ Ø§Ù„Ù„ÙŠÙ†Ø¯ÙŠ"], correct: 0},
        {category: "Ø«Ù‚Ø§ÙÙŠØ©", question: "Ù…Ù† Ù‡Ùˆ Ø§Ù„Ø´Ø§Ø¹Ø± Ø§Ù„Ù…Ù„Ù‚Ø¨ Ø¨Ø£Ù…ÙŠØ± Ø§Ù„Ø´Ø¹Ø±Ø§Ø¡ØŸ", options: ["Ø£Ø­Ù…Ø¯ Ø´ÙˆÙ‚ÙŠ", "Ø­Ø§ÙØ¸ Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…", "Ù…Ø­Ù…ÙˆØ¯ Ø¯Ø±ÙˆÙŠØ´", "Ù†Ø²Ø§Ø± Ù‚Ø¨Ø§Ù†ÙŠ"], correct: 0},
        {category: "Ø«Ù‚Ø§ÙÙŠØ©", question: "Ù…Ù† Ù‡Ùˆ Ù…Ø®ØªØ±Ø¹ Ø§Ù„Ù…ØµØ¨Ø§Ø­ Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØŸ", options: ["ØªÙˆÙ…Ø§Ø³ Ø¥Ø¯ÙŠØ³ÙˆÙ†", "Ù†ÙŠÙƒÙˆÙ„Ø§ ØªØ³Ù„Ø§", "Ø£Ù„ÙƒØ³Ù†Ø¯Ø± Ø¨ÙŠÙ„", "Ø¨Ù†Ø¬Ø§Ù…ÙŠÙ† ÙØ±Ø§Ù†ÙƒÙ„ÙŠÙ†"], correct: 0},
        {category: "Ø«Ù‚Ø§ÙÙŠØ©", question: "ÙÙŠ Ø£ÙŠ Ø¹Ø§Ù… Ø³Ù‚Ø·Øª Ø§Ù„Ø¯ÙˆÙ„Ø© Ø§Ù„Ø¹Ø«Ù…Ø§Ù†ÙŠØ©ØŸ", options: ["1924", "1918", "1920", "1930"], correct: 0},
        {category: "Ø«Ù‚Ø§ÙÙŠØ©", question: "Ù…Ù† Ù‡Ùˆ Ù…Ø¤Ø³Ø³ Ø¹Ù„Ù… Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ Ø§Ù„Ø­Ø¯ÙŠØ«ØŸ", options: ["Ø§Ø¨Ù† Ø®Ù„Ø¯ÙˆÙ†", "Ø£Ø±Ø³Ø·Ùˆ", "Ø£ÙÙ„Ø§Ø·ÙˆÙ†", "Ø³Ù‚Ø±Ø§Ø·"], correct: 0},
        
        {category: "Ø¬ØºØ±Ø§ÙÙŠØ©", question: "Ù…Ø§ Ù‡ÙŠ Ø¹Ø§ØµÙ…Ø© Ø§Ù„ÙŠØ§Ø¨Ø§Ù†ØŸ", options: ["Ø·ÙˆÙƒÙŠÙˆ", "ÙƒÙŠÙˆØªÙˆ", "Ø£ÙˆØ³Ø§ÙƒØ§", "ÙŠÙˆÙƒÙˆÙ‡Ø§Ù…Ø§"], correct: 0},
        {category: "Ø¬ØºØ±Ø§ÙÙŠØ©", question: "Ù…Ø§ Ù‡ÙŠ Ø£ÙƒØ¨Ø± Ù‚Ø§Ø±Ø© ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù…ØŸ", options: ["Ø¢Ø³ÙŠØ§", "Ø£ÙØ±ÙŠÙ‚ÙŠØ§", "Ø£Ù…Ø±ÙŠÙƒØ§ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©", "Ø£ÙˆØ±ÙˆØ¨Ø§"], correct: 0},
        {category: "Ø¬ØºØ±Ø§ÙÙŠØ©", question: "Ù…Ø§ Ù‡Ùˆ Ø£Ø·ÙˆÙ„ Ù†Ù‡Ø± ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù…ØŸ", options: ["Ù†Ù‡Ø± Ø§Ù„Ù†ÙŠÙ„", "Ù†Ù‡Ø± Ø§Ù„Ø£Ù…Ø§Ø²ÙˆÙ†", "Ù†Ù‡Ø± Ø§Ù„ÙŠØ§Ù†ØºØªØ³ÙŠ", "Ù†Ù‡Ø± Ø§Ù„Ù…Ø³ÙŠØ³ÙŠØ¨ÙŠ"], correct: 0},
        {category: "Ø¬ØºØ±Ø§ÙÙŠØ©", question: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø¯ÙˆÙ„ Ø§Ù„Ø¹Ø§Ù„Ù… ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹ØŸ", options: ["195 Ø¯ÙˆÙ„Ø©", "180 Ø¯ÙˆÙ„Ø©", "210 Ø¯ÙˆÙ„Ø©", "150 Ø¯ÙˆÙ„Ø©"], correct: 0},
        {category: "Ø¬ØºØ±Ø§ÙÙŠØ©", question: "Ù…Ø§ Ù‡ÙŠ Ø£ØµØºØ± Ø¯ÙˆÙ„Ø© ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù…ØŸ", options: ["Ø§Ù„ÙØ§ØªÙŠÙƒØ§Ù†", "Ù…ÙˆÙ†Ø§ÙƒÙˆ", "Ø³Ø§Ù† Ù…Ø§Ø±ÙŠÙ†Ùˆ", "Ù„ÙŠØ®ØªÙ†Ø´ØªØ§ÙŠÙ†"], correct: 0},
        {category: "Ø¬ØºØ±Ø§ÙÙŠØ©", question: "ÙÙŠ Ø£ÙŠ Ù‚Ø§Ø±Ø© ØªÙ‚Ø¹ ØµØ­Ø±Ø§Ø¡ Ø§Ù„ØµØ­Ø±Ø§Ø¡ Ø§Ù„ÙƒØ¨Ø±Ù‰ØŸ", options: ["Ø£ÙØ±ÙŠÙ‚ÙŠØ§", "Ø¢Ø³ÙŠØ§", "Ø£Ù…Ø±ÙŠÙƒØ§ Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ©", "Ø£Ø³ØªØ±Ø§Ù„ÙŠØ§"], correct: 0},
        
        {category: "Ø±ÙŠØ§Ø¶ÙŠØ©", question: "ÙƒÙ… Ø¹Ø¯Ø¯ Ù„Ø§Ø¹Ø¨ÙŠ ÙƒØ±Ø© Ø§Ù„Ù‚Ø¯Ù… ÙÙŠ Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„ÙˆØ§Ø­Ø¯ØŸ", options: ["11 Ù„Ø§Ø¹Ø¨Ø§Ù‹", "10 Ù„Ø§Ø¹Ø¨ÙŠÙ†", "12 Ù„Ø§Ø¹Ø¨Ø§Ù‹", "9 Ù„Ø§Ø¹Ø¨ÙŠÙ†"], correct: 0},
        {category: "Ø±ÙŠØ§Ø¶ÙŠØ©", question: "Ù…Ù† Ù‡Ùˆ Ø§Ù„Ù…Ù„Ù‚Ø¨ Ø¨Ù€'Ø§Ù„Ø¯ÙˆÙ†'ØŸ", options: ["Ø¯ÙŠÙŠØºÙˆ Ù…Ø§Ø±Ø§Ø¯ÙˆÙ†Ø§", "Ø¨ÙŠÙ„ÙŠÙ‡", "ÙƒØ±ÙŠØ³ØªÙŠØ§Ù†Ùˆ Ø±ÙˆÙ†Ø§Ù„Ø¯Ùˆ", "Ù„ÙŠÙˆÙ†ÙŠÙ„ Ù…ÙŠØ³ÙŠ"], correct: 0},
        {category: "Ø±ÙŠØ§Ø¶ÙŠØ©", question: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø­Ù„Ù‚Ø§Øª Ø´Ø¹Ø§Ø± Ø§Ù„Ø£ÙˆÙ„Ù…Ø¨ÙŠØ§Ø¯ØŸ", options: ["5 Ø­Ù„Ù‚Ø§Øª", "4 Ø­Ù„Ù‚Ø§Øª", "6 Ø­Ù„Ù‚Ø§Øª", "7 Ø­Ù„Ù‚Ø§Øª"], correct: 0},
        {category: "Ø±ÙŠØ§Ø¶ÙŠØ©", question: "ÙÙŠ Ø£ÙŠ Ø¨Ù„Ø¯ Ù†Ø´Ø£Øª Ø±ÙŠØ§Ø¶Ø© Ø§Ù„ÙƒØ§Ø±Ø§ØªÙŠÙ‡ØŸ", options: ["Ø§Ù„ÙŠØ§Ø¨Ø§Ù†", "Ø§Ù„ØµÙŠÙ†", "ÙƒÙˆØ±ÙŠØ§", "ØªØ§ÙŠÙ„Ø§Ù†Ø¯"], correct: 0},
        {category: "Ø±ÙŠØ§Ø¶ÙŠØ©", question: "ÙƒÙ… ÙŠØ³ØªØºØ±Ù‚ Ø´ÙˆØ· ÙƒØ±Ø© Ø§Ù„Ù‚Ø¯Ù…ØŸ", options: ["45 Ø¯Ù‚ÙŠÙ‚Ø©", "40 Ø¯Ù‚ÙŠÙ‚Ø©", "50 Ø¯Ù‚ÙŠÙ‚Ø©", "60 Ø¯Ù‚ÙŠÙ‚Ø©"], correct: 0},
        
        {category: "Ø£ÙÙ„Ø§Ù…", question: "Ù…Ù† Ù‡Ùˆ Ø¨Ø·Ù„ ÙÙŠÙ„Ù… 'ØªØ§ÙŠØªØ§Ù†ÙŠÙƒ'ØŸ", options: ["Ù„ÙŠÙˆÙ†Ø§Ø±Ø¯Ùˆ Ø¯ÙŠ ÙƒØ§Ø¨Ø±ÙŠÙˆ", "Ø¨Ø±Ø§Ø¯ Ø¨ÙŠØª", "ØªÙˆÙ… ÙƒØ±ÙˆØ²", "Ø¬ÙˆÙ†ÙŠ Ø¯ÙŠØ¨"], correct: 0},
        {category: "Ø£ÙÙ„Ø§Ù…", question: "Ù…Ø§ Ù‡Ùˆ Ø£Ø¹Ù„Ù‰ ÙÙŠÙ„Ù… Ø¥ÙŠØ±Ø§Ø¯Ø§Ù‹ ÙÙŠ Ø§Ù„ØªØ§Ø±ÙŠØ®ØŸ", options: ["Ø£ÙØ§ØªØ§Ø±", "Ø£ÙÙ†Ø¬Ø±Ø² Ø¥Ù†Ø¯ ØºÙŠÙ…", "ØªØ§ÙŠØªØ§Ù†ÙŠÙƒ", "Ø­Ø±Ø¨ Ø§Ù„Ù†Ø¬ÙˆÙ…"], correct: 0},
        {category: "Ø£ÙÙ„Ø§Ù…", question: "Ù…Ù† Ø£Ø®Ø±Ø¬ ÙÙŠÙ„Ù… 'Ø§Ù„Ø¹Ø±Ø§Ø¨'ØŸ", options: ["ÙØ±Ø§Ù†Ø³ÙŠØ³ ÙÙˆØ±Ø¯ ÙƒÙˆØ¨ÙˆÙ„Ø§", "Ù…Ø§Ø±ØªÙ† Ø³ÙƒÙˆØ±Ø³ÙŠØ²ÙŠ", "Ø³ØªÙŠÙÙ† Ø³Ø¨ÙŠÙ„Ø¨Ø±Øº", "ÙƒÙˆÙŠÙ†ØªÙ† ØªØ§Ø±Ø§Ù†ØªÙŠÙ†Ùˆ"], correct: 0},
        
        {category: "Ø¹Ù„Ù…ÙŠØ©", question: "ÙƒÙ… Ø¹Ø¯Ø¯ ÙƒÙˆØ§ÙƒØ¨ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø´Ù…Ø³ÙŠØ©ØŸ", options: ["8 ÙƒÙˆØ§ÙƒØ¨", "9 ÙƒÙˆØ§ÙƒØ¨", "7 ÙƒÙˆØ§ÙƒØ¨", "10 ÙƒÙˆØ§ÙƒØ¨"], correct: 0},
        {category: "Ø¹Ù„Ù…ÙŠØ©", question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø±Ù…Ø² Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠ Ù„Ù„Ø°Ù‡Ø¨ØŸ", options: ["Au", "Ag", "Fe", "Cu"], correct: 0},
        {category: "Ø¹Ù„Ù…ÙŠØ©", question: "Ù…Ø§ Ù‡ÙŠ Ø³Ø±Ø¹Ø© Ø§Ù„Ø¶ÙˆØ¡ØŸ", options: ["300,000 ÙƒÙ…/Ø«", "200,000 ÙƒÙ…/Ø«", "400,000 ÙƒÙ…/Ø«", "250,000 ÙƒÙ…/Ø«"], correct: 0},
        {category: "Ø¹Ù„Ù…ÙŠØ©", question: "Ù…Ù† Ù‡Ùˆ Ù…ÙƒØªØ´Ù Ù†Ø¸Ø±ÙŠØ© Ø§Ù„Ù†Ø³Ø¨ÙŠØ©ØŸ", options: ["Ø£Ù„Ø¨Ø±Øª Ø£ÙŠÙ†Ø´ØªØ§ÙŠÙ†", "Ø¥Ø³Ø­Ø§Ù‚ Ù†ÙŠÙˆØªÙ†", "ØºØ§Ù„ÙŠÙ„ÙŠÙˆ ØºØ§Ù„ÙŠÙ„ÙŠ", "Ø³ØªÙŠÙÙ† Ù‡ÙˆÙƒÙŠÙ†Øº"], correct: 0},
        
        {category: "Ø¹Ø§Ù…Ø©", question: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø£Ù„ÙˆØ§Ù† Ù‚ÙˆØ³ Ù‚Ø²Ø­ØŸ", options: ["7 Ø£Ù„ÙˆØ§Ù†", "6 Ø£Ù„ÙˆØ§Ù†", "8 Ø£Ù„ÙˆØ§Ù†", "5 Ø£Ù„ÙˆØ§Ù†"], correct: 0},
        {category: "Ø¹Ø§Ù…Ø©", question: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø£ÙŠØ§Ù… Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠØ©ØŸ", options: ["365 ÙŠÙˆÙ…", "360 ÙŠÙˆÙ…", "366 ÙŠÙˆÙ…", "364 ÙŠÙˆÙ…"], correct: 0},
        {category: "Ø¹Ø§Ù…Ø©", question: "Ù…Ø§ Ù‡Ùˆ Ø£ÙƒØ¨Ø± Ø­ÙŠÙˆØ§Ù† ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù…ØŸ", options: ["Ø§Ù„Ø­ÙˆØª Ø§Ù„Ø£Ø²Ø±Ù‚", "Ø§Ù„ÙÙŠÙ„ Ø§Ù„Ø£ÙØ±ÙŠÙ‚ÙŠ", "Ø§Ù„Ø²Ø±Ø§ÙØ©", "Ø§Ù„Ø¯Ø¨ Ø§Ù„Ù‚Ø·Ø¨ÙŠ"], correct: 0},
        {category: "Ø¹Ø§Ù…Ø©", question: "ÙƒÙ… Ø¹Ø¯Ø¯ Ù‚Ù„ÙˆØ¨ Ø§Ù„Ø£Ø®Ø·Ø¨ÙˆØ·ØŸ", options: ["3 Ù‚Ù„ÙˆØ¨", "2 Ù‚Ù„Ø¨Ø§Ù†", "4 Ù‚Ù„ÙˆØ¨", "1 Ù‚Ù„Ø¨"], correct: 0},
        {category: "Ø¹Ø§Ù…Ø©", question: "Ù…Ø§ Ù‡ÙŠ Ø£ÙƒØ¨Ø± Ø¯ÙˆÙ„Ø© ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù… Ù…Ù† Ø­ÙŠØ« Ø§Ù„Ù…Ø³Ø§Ø­Ø©ØŸ", options: ["Ø±ÙˆØ³ÙŠØ§", "ÙƒÙ†Ø¯Ø§", "Ø§Ù„ØµÙŠÙ†", "Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª Ø§Ù„Ù…ØªØ­Ø¯Ø©"], correct: 0},
        {category: "Ø¹Ø§Ù…Ø©", question: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø£Ø³Ù†Ø§Ù† Ø§Ù„Ø¥Ù†Ø³Ø§Ù† Ø§Ù„Ø¨Ø§Ù„ØºØŸ", options: ["32 Ø³Ù†", "28 Ø³Ù†", "30 Ø³Ù†", "34 Ø³Ù†"], correct: 0},
        {category: "Ø¹Ø§Ù…Ø©", question: "Ù…Ø§ Ù‡ÙŠ Ø¹Ù…Ù„Ø© Ø§Ù„ÙŠØ§Ø¨Ø§Ù†ØŸ", options: ["Ø§Ù„ÙŠÙ†", "Ø§Ù„ÙŠÙˆØ§Ù†", "Ø§Ù„ÙˆÙˆÙ†", "Ø§Ù„Ø±ÙˆØ¨ÙŠØ©"], correct: 0}
    ];

    let currentRoomCode = null;
    let currentPlayerId = null;
    let currentPlayerName = null;
    let isHost = false;
    let currentTeam = null;
    let timerInterval = null;
    let roomData = null;

    function showWelcome() {
        hideAllScreens();
        document.getElementById('welcomeScreen').classList.add('active');
    }

    function showCreateRoom() {
        hideAllScreens();
        document.getElementById('createRoomScreen').classList.add('active');
    }

    function showJoinRoom() {
        hideAllScreens();
        document.getElementById('joinRoomScreen').classList.add('active');
    }

    function hideAllScreens() {
        document.querySelectorAll('.screen').forEach(screen => {
            screen.classList.remove('active');
        });
    }

    function generateRoomCode() {
        return Math.floor(1000 + Math.random() * 9000).toString();
    }

    function createRoom() {
        const hostName = document.getElementById('hostName').value.trim();
        const team1Name = document.getElementById('team1NameInput').value.trim() || 'Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø­Ù…Ø±';
        const team2Name = document.getElementById('team2NameInput').value.trim() || 'Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø²Ø±Ù‚';
        const teamSize = parseInt(document.getElementById('teamSizeInput').value);

        if (!hostName) {
            alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…Ùƒ');
            return;
        }

        currentRoomCode = generateRoomCode();
        currentPlayerId = 'host-' + Date.now();
        currentPlayerName = hostName;
        isHost = true;

        const roomRef = database.ref('rooms/' + currentRoomCode);
        roomRef.set({
            code: currentRoomCode,
            host: currentPlayerId,
            team1Name: team1Name,
            team2Name: team2Name,
            teamSize: teamSize,
            players: {
                [currentPlayerId]: {
                    name: hostName,
                    isHost: true,
                    team: null
                }
            },
            gameState: 'lobby',
            currentQuestion: null,
            usedQuestions: [],
            team1Couch: [],
            team2Couch: [],
            team1Score: 0,
            team2Score: 0,
            buzzedPlayer: null,
            showOptions: false,
            waitingForAnswer: false,
            bannedTeam: null,
            correctAnswer: null,
            waitingForChoice: false,
            choicePlayer: null
        });

        listenToRoom();
        showLobby();
    }

    function joinRoom() {
        const playerName = document.getElementById('playerName').value.trim();
        const roomCode = document.getElementById('roomCode').value.trim();

        if (!playerName) {
            alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…Ùƒ');
            return;
        }

        if (!roomCode || roomCode.length !== 4) {
            alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙˆØ¯ Ø§Ù„ØºØ±ÙØ© (4 Ø£Ø±Ù‚Ø§Ù…)');
            return;
        }

        const roomRef = database.ref('rooms/' + roomCode);
        roomRef.once('value', (snapshot) => {
            if (!snapshot.exists()) {
                alert('Ø§Ù„ØºØ±ÙØ© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©');
                return;
            }

            currentRoomCode = roomCode;
            currentPlayerId = 'player-' + Date.now();
            currentPlayerName = playerName;
            isHost = false;

            const playerRef = database.ref('rooms/' + currentRoomCode + '/players/' + currentPlayerId);
            playerRef.set({
                name: playerName,
                isHost: false,
                team: null
            });

            listenToRoom();
            showTeamSelection();
        });
    }

    function listenToRoom() {
        const roomRef = database.ref('rooms/' + currentRoomCode);
        roomRef.on('value', (snapshot) => {
            if (snapshot.exists()) {
                roomData = snapshot.val();
                updateUI();
            }
        });
    }

    function updateUI() {
        if (!roomData) return;

        if (isHost) {
            if (roomData.gameState === 'lobby') {
                updateLobby();
            } else if (roomData.gameState === 'playing') {
                if (!currentTeam) {
                    showTeamSelection();
                } else {
                    updateHostGameScreen();
                }
            }
        } else {
            if (roomData.gameState === 'lobby' && !currentTeam) {
                updateTeamSelection();
            } else if (roomData.gameState === 'lobby' && currentTeam) {
                updateWaitingScreen();
            } else if (roomData.gameState === 'playing') {
                updatePlayerGameScreen();
            }
        }
    }

    function showLobby() {
        hideAllScreens();
        document.getElementById('lobbyScreen').classList.add('active');
        document.getElementById('displayRoomCode').textContent = currentRoomCode;
        
        // Add host team selection buttons
        const hostTeamButtons = document.getElementById('hostTeamButtons');
        hostTeamButtons.innerHTML = '';

        const team1Btn = document.createElement('button');
        team1Btn.className = 'btn';
        team1Btn.textContent = 'ğŸ”´ ' + roomData.team1Name;
        team1Btn.id = 'hostTeam1Btn';
        team1Btn.onclick = () => selectHostTeam('team1');
        hostTeamButtons.appendChild(team1Btn);

        const team2Btn = document.createElement('button');
        team2Btn.className = 'btn secondary';
        team2Btn.textContent = 'ğŸ”µ ' + roomData.team2Name;
        team2Btn.id = 'hostTeam2Btn';
        team2Btn.onclick = () => selectHostTeam('team2');
        hostTeamButtons.appendChild(team2Btn);
    }

    function updateLobby() {
        const players = roomData.players || {};
        const playerCount = Object.keys(players).length;
        const teamSize = roomData.teamSize || 2;
        const requiredPlayers = (teamSize * 2) + 1;

        document.getElementById('playerCount').textContent = playerCount;

        const playersListContainer = document.getElementById('playersListContainer');
        playersListContainer.innerHTML = '';

        Object.entries(players).forEach(([id, player]) => {
            const div = document.createElement('div');
            div.className = 'player-item';
            
            const nameSpan = document.createElement('span');
            nameSpan.className = 'player-name';
            nameSpan.textContent = player.name;
            
            const badgeContainer = document.createElement('div');
            
            if (player.isHost) {
                const hostBadge = document.createElement('span');
                hostBadge.className = 'host-badge';
                hostBadge.textContent = 'ğŸ‘‘ Ù…Ø¶ÙŠÙ';
                badgeContainer.appendChild(hostBadge);
            }
            
            if (player.team) {
                const teamBadge = document.createElement('span');
                teamBadge.className = 'team-badge ' + player.team;
                teamBadge.textContent = player.team === 'team1' ? roomData.team1Name : roomData.team2Name;
                badgeContainer.appendChild(teamBadge);
            }
            
            div.appendChild(nameSpan);
            div.appendChild(badgeContainer);
            playersListContainer.appendChild(div);
        });

        // Update host team button selection
        if (currentTeam) {
            const team1Btn = document.getElementById('hostTeam1Btn');
            const team2Btn = document.getElementById('hostTeam2Btn');
            
            if (team1Btn && team2Btn) {
                if (currentTeam === 'team1') {
                    team1Btn.style.opacity = '1';
                    team1Btn.style.transform = 'scale(1.05)';
                    team2Btn.style.opacity = '0.6';
                    team2Btn.style.transform = 'scale(1)';
                } else {
                    team2Btn.style.opacity = '1';
                    team2Btn.style.transform = 'scale(1.05)';
                    team1Btn.style.opacity = '0.6';
                    team1Btn.style.transform = 'scale(1)';
                }
            }
        }

        const startBtn = document.getElementById('startGameBtn');
        // Host must select team to start
        if (playerCount >= requiredPlayers && currentTeam) {
            startBtn.disabled = false;
            startBtn.textContent = 'Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø© â–¶ï¸';
        } else if (!currentTeam) {
            startBtn.disabled = true;
            startBtn.textContent = 'Ø§Ø®ØªØ± ÙØ±ÙŠÙ‚Ùƒ Ø£ÙˆÙ„Ø§Ù‹';
        } else {
            startBtn.disabled = true;
            startBtn.textContent = `Ø¨Ø­Ø§Ø¬Ø© Ø¥Ù„Ù‰ ${requiredPlayers - playerCount} Ù„Ø§Ø¹Ø¨ÙŠÙ†`;
        }
    }

    function showTeamSelection() {
        hideAllScreens();
        document.getElementById('teamSelectionScreen').classList.add('active');
        document.getElementById('welcomePlayerName').textContent = currentPlayerName;
    }

    function updateTeamSelection() {
        const teamButtons = document.getElementById('teamButtons');
        teamButtons.innerHTML = '';

        const team1Btn = document.createElement('button');
        team1Btn.className = 'btn';
        team1Btn.textContent = 'ğŸ”´ ' + roomData.team1Name;
        team1Btn.onclick = () => selectTeam('team1');
        teamButtons.appendChild(team1Btn);

        const team2Btn = document.createElement('button');
        team2Btn.className = 'btn secondary';
        team2Btn.textContent = 'ğŸ”µ ' + roomData.team2Name;
        team2Btn.onclick = () => selectTeam('team2');
        teamButtons.appendChild(team2Btn);
    }

    function selectTeam(team) {
        currentTeam = team;
        const playerRef = database.ref('rooms/' + currentRoomCode + '/players/' + currentPlayerId);
        playerRef.update({ team: team });
        
        if (roomData.gameState === 'playing') {
            if (isHost) {
                showHostGameScreen();
            } else {
                showPlayerGameScreen();
            }
        } else {
            showWaitingScreen();
        }
    }

    function selectHostTeam(team) {
        currentTeam = team;
        const playerRef = database.ref('rooms/' + currentRoomCode + '/players/' + currentPlayerId);
        playerRef.update({ team: team });

        // Update button styles
        const team1Btn = document.getElementById('hostTeam1Btn');
        const team2Btn = document.getElementById('hostTeam2Btn');
        
        if (team === 'team1') {
            team1Btn.style.opacity = '1';
            team1Btn.style.transform = 'scale(1.05)';
            team2Btn.style.opacity = '0.6';
            team2Btn.style.transform = 'scale(1)';
        } else {
            team2Btn.style.opacity = '1';
            team2Btn.style.transform = 'scale(1.05)';
            team1Btn.style.opacity = '0.6';
            team1Btn.style.transform = 'scale(1)';
        }
    }

    function showWaitingScreen() {
        hideAllScreens();
        document.getElementById('waitingScreen').classList.add('active');
        const teamName = currentTeam === 'team1' ? roomData.team1Name : roomData.team2Name;
        document.getElementById('playerTeamName').textContent = teamName;
    }

    function updateWaitingScreen() {
        const players = roomData.players || {};
        const waitingPlayersListContainer = document.getElementById('waitingPlayersListContainer');
        waitingPlayersListContainer.innerHTML = '';

        Object.entries(players).forEach(([id, player]) => {
            const div = document.createElement('div');
            div.className = 'player-item';
            
            const nameSpan = document.createElement('span');
            nameSpan.className = 'player-name';
            nameSpan.textContent = player.name;
            
            const badgeContainer = document.createElement('div');
            
            if (player.isHost) {
                const hostBadge = document.createElement('span');
                hostBadge.className = 'host-badge';
                hostBadge.textContent = 'ğŸ‘‘';
                badgeContainer.appendChild(hostBadge);
            }
            
            if (player.team) {
                const teamBadge = document.createElement('span');
                teamBadge.className = 'team-badge ' + player.team;
                teamBadge.textContent = player.team === 'team1' ? roomData.team1Name : roomData.team2Name;
                badgeContainer.appendChild(teamBadge);
            }
            
            div.appendChild(nameSpan);
            div.appendChild(badgeContainer);
            waitingPlayersListContainer.appendChild(div);
        });
    }

    function startGame() {
        if (!currentTeam) {
            alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ÙØ±ÙŠÙ‚Ùƒ Ø£ÙˆÙ„Ø§Ù‹');
            return;
        }

        const roomRef = database.ref('rooms/' + currentRoomCode);
        roomRef.update({
            gameState: 'playing'
        });

        showHostGameScreen();
    }

    function showHostGameScreen() {
        document.getElementById('mainContainer').style.display = 'none';
        document.getElementById('hostGameContainer').style.display = 'block';
        
        document.getElementById('displayTeam1Name').textContent = roomData.team1Name;
        document.getElementById('displayTeam2Name').textContent = roomData.team2Name;
        document.getElementById('couchTeam1Name').textContent = roomData.team1Name;
        document.getElementById('couchTeam2Name').textContent = roomData.team2Name;
    }

    function updateHostGameScreen() {
        if (document.getElementById('hostGameContainer').style.display === 'none') {
            showHostGameScreen();
        }

        document.getElementById('team1Score').textContent = roomData.team1Score || 0;
        document.getElementById('team2Score').textContent = roomData.team2Score || 0;

        updateCouchDisplays();

        if (roomData.currentQuestion) {
            document.getElementById('questionDisplay').innerHTML = 
                `<div class="question-text">${roomData.currentQuestion.question}</div>`;
            
            if (roomData.showOptions) {
                const optionsDisplay = document.getElementById('optionsDisplay');
                optionsDisplay.innerHTML = '';
                
                roomData.currentQuestion.options.forEach((option, index) => {
                    const div = document.createElement('div');
                    div.className = 'option-box';
                    div.textContent = option;
                    
                    if (roomData.correctAnswer !== null) {
                        if (index === roomData.currentQuestion.correct) {
                            div.classList.add('correct');
                        } else if (roomData.selectedAnswer === index && roomData.correctAnswer === false) {
                            div.classList.add('incorrect');
                        }
                    }
                    
                    optionsDisplay.appendChild(div);
                });
            } else {
                document.getElementById('optionsDisplay').innerHTML = '';
            }
        }

        if (roomData.buzzedPlayer) {
            const player = roomData.players[roomData.buzzedPlayer];
            const team = player.team === 'team1' ? roomData.team1Name : roomData.team2Name;
            document.getElementById('hostBuzzerIndicator').innerHTML = 
                `<div class="buzzer-indicator">ğŸ”” ${player.name} Ù…Ù† ${team} Ø¶ØºØ· Ø§Ù„Ø¬Ø±Ø³!</div>`;
        } else {
            document.getElementById('hostBuzzerIndicator').innerHTML = '';
        }

        checkVictory();
    }

    function updateCouchDisplays() {
        const team1Display = document.getElementById('team1CouchDisplay');
        const team2Display = document.getElementById('team2CouchDisplay');
        
        team1Display.innerHTML = '';
        team2Display.innerHTML = '';

        if (roomData.team1Couch && roomData.team1Couch.length > 0) {
            roomData.team1Couch.forEach(playerId => {
                const player = roomData.players[playerId];
                if (player) {
                    const div = document.createElement('div');
                    div.className = 'couch-player';
                    div.textContent = 'ğŸ† ' + player.name;
                    team1Display.appendChild(div);
                }
            });
        } else {
            team1Display.innerHTML = '<div class="couch-empty">ÙØ§Ø±ØºØ©</div>';
        }

        if (roomData.team2Couch && roomData.team2Couch.length > 0) {
            roomData.team2Couch.forEach(playerId => {
                const player = roomData.players[playerId];
                if (player) {
                    const div = document.createElement('div');
                    div.className = 'couch-player';
                    div.textContent = 'ğŸ† ' + player.name;
                    team2Display.appendChild(div);
                }
            });
        } else {
            team2Display.innerHTML = '<div class="couch-empty">ÙØ§Ø±ØºØ©</div>';
        }
    }

    function nextQuestion() {
        clearInterval(timerInterval);

        const usedQuestions = roomData.usedQuestions || [];
        let availableQuestions = questions.filter(q => !usedQuestions.includes(q.question));
        
        if (availableQuestions.length === 0) {
            availableQuestions = questions;
            usedQuestions.length = 0;
        }

        const randomQuestion = availableQuestions[Math.floor(Math.random() * availableQuestions.length)];
        usedQuestions.push(randomQuestion.question);

        const roomRef = database.ref('rooms/' + currentRoomCode);
        roomRef.update({
            currentQuestion: randomQuestion,
            usedQuestions: usedQuestions,
            buzzedPlayer: null,
            showOptions: false,
            waitingForAnswer: false,
            bannedTeam: null,
            correctAnswer: null,
            selectedAnswer: null,
            waitingForChoice: false,
            choicePlayer: null,
            questionStartTime: Date.now()
        });

        document.getElementById('nextQuestionBtn').disabled = true;
        document.getElementById('hostStatus').textContent = 'Ø§Ù†ØªØ¸Ø± 10 Ø«ÙˆØ§Ù†ÙŠ Ø£Ùˆ Ø­ØªÙ‰ ÙŠØ¶ØºØ· Ø£Ø­Ø¯Ù‡Ù… Ø§Ù„Ø¬Ø±Ø³...';
        document.getElementById('hostStatus').className = 'status-message info';

        startTimer(10);
    }

    function startTimer(seconds) {
        clearInterval(timerInterval);
        let timeLeft = seconds;
        
        const timerElement = document.getElementById('timerDisplay');
        timerElement.textContent = timeLeft;
        timerElement.classList.remove('warning');

        timerInterval = setInterval(() => {
            timeLeft--;
            timerElement.textContent = timeLeft;

            if (timeLeft <= 3) {
                timerElement.classList.add('warning');
            } else {
                timerElement.classList.remove('warning');
            }

            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                
                if (!roomData.buzzedPlayer && !roomData.showOptions) {
                    const roomRef = database.ref('rooms/' + currentRoomCode);
                    roomRef.update({ showOptions: true });
                    
                    document.getElementById('hostStatus').textContent = 'Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª! Ù„Ù… ÙŠØ¶ØºØ· Ø£Ø­Ø¯ Ø§Ù„Ø¬Ø±Ø³';
                    document.getElementById('hostStatus').className = 'status-message warning';
                    
                    setTimeout(() => {
                        document.getElementById('nextQuestionBtn').disabled = false;
                    }, 3000);
                }
            }
        }, 1000);
    }

    function showPlayerGameScreen() {
        hideAllScreens();
        document.getElementById('playerGameScreen').classList.add('active');
    }

    function updatePlayerGameScreen() {
        if (document.getElementById('playerGameScreen').classList.contains('active') === false) {
            showPlayerGameScreen();
        }

        const buzzButton = document.getElementById('buzzButton');
        const playerAnswerOptions = document.getElementById('playerAnswerOptions');
        const playerChoiceButtons = document.getElementById('playerChoiceButtons');
        const playerStatus = document.getElementById('playerStatus');
        const playerQuestionDisplay = document.getElementById('playerQuestionDisplay');
        const playerQuestionText = document.getElementById('playerQuestionText');
        const playerTimer = document.getElementById('playerTimer');
        const buzzerIndicator = document.getElementById('buzzerIndicator');

        const isOnCouch = (currentTeam === 'team1' && roomData.team1Couch?.includes(currentPlayerId)) ||
                         (currentTeam === 'team2' && roomData.team2Couch?.includes(currentPlayerId));

        if (isOnCouch) {
            playerStatus.textContent = 'ğŸ† Ø£Ù†Øª Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙ†Ø¨Ø©! Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ù„Ø¹Ø¨ Ø¥Ù„Ø§ Ø¥Ø°Ø§ ØªÙ… Ø³Ø­Ø¨Ùƒ';
            playerStatus.className = 'status-message success';
            buzzButton.disabled = true;
            playerAnswerOptions.innerHTML = '';
            playerChoiceButtons.innerHTML = '';
            playerQuestionDisplay.style.display = 'none';
            playerTimer.style.display = 'none';
            buzzerIndicator.innerHTML = '';
            return;
        }

        if (roomData.currentQuestion) {
            playerQuestionDisplay.style.display = 'block';
            playerQuestionText.textContent = roomData.currentQuestion.question;
            
            if (roomData.questionStartTime && !roomData.showOptions) {
                const elapsed = Math.floor((Date.now() - roomData.questionStartTime) / 1000);
                const timeLeft = Math.max(0, (roomData.buzzedPlayer ? 5 : 10) - elapsed);
                playerTimer.style.display = 'block';
                playerTimer.textContent = timeLeft;
                
                if (timeLeft <= 3) {
                    playerTimer.classList.add('warning');
                } else {
                    playerTimer.classList.remove('warning');
                }
            } else {
                playerTimer.style.display = 'none';
            }
        } else {
            playerQuestionDisplay.style.display = 'none';
            playerTimer.style.display = 'none';
        }

        if (roomData.buzzedPlayer) {
            const player = roomData.players[roomData.buzzedPlayer];
            const team = player.team === 'team1' ? roomData.team1Name : roomData.team2Name;
            buzzerIndicator.innerHTML = `<div class="buzzer-indicator">ğŸ”” ${player.name} Ù…Ù† ${team} Ø¶ØºØ· Ø§Ù„Ø¬Ø±Ø³!</div>`;
        } else {
            buzzerIndicator.innerHTML = '';
        }

        if (roomData.waitingForChoice && roomData.choicePlayer === currentPlayerId) {
            playerStatus.textContent = 'Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! Ø§Ø®ØªØ±:';
            playerStatus.className = 'status-message success';
            buzzButton.disabled = true;
            playerAnswerOptions.innerHTML = '';
            
            const otherTeam = currentTeam === 'team1' ? 'team2' : 'team1';
            const hasOtherCouch = roomData[otherTeam + 'Couch']?.length > 0;
            
            playerChoiceButtons.innerHTML = '';
            
            const sitBtn = document.createElement('button');
            sitBtn.className = 'choice-btn sit';
            sitBtn.textContent = 'ğŸ›‹ï¸ Ø§Ø¬Ù„Ø³ Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙ†Ø¨Ø©';
            sitBtn.onclick = () => makeChoice('sit');
            playerChoiceButtons.appendChild(sitBtn);
            
            if (hasOtherCouch) {
                const stealBtn = document.createElement('button');
                stealBtn.className = 'choice-btn steal';
                stealBtn.textContent = 'ğŸ¯ Ø§Ø³Ø­Ø¨ Ù„Ø§Ø¹Ø¨ Ù…Ù† Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø¢Ø®Ø±';
                stealBtn.onclick = () => makeChoice('steal');
                playerChoiceButtons.appendChild(stealBtn);
            }
            
            return;
        } else {
            playerChoiceButtons.innerHTML = '';
        }

        const playerTeam = roomData.players[currentPlayerId]?.team;
        if (roomData.bannedTeam === playerTeam) {
            playerStatus.textContent = 'ÙØ±ÙŠÙ‚Ùƒ Ù…Ù…Ù†ÙˆØ¹ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©!';
            playerStatus.className = 'status-message error';
            buzzButton.disabled = true;
            playerAnswerOptions.innerHTML = '';
            return;
        }

        if (roomData.showOptions && roomData.buzzedPlayer === currentPlayerId && !roomData.correctAnswer) {
            playerStatus.textContent = 'Ø§Ø®ØªØ± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©!';
            playerStatus.className = 'status-message info';
            buzzButton.disabled = true;
            
            playerAnswerOptions.innerHTML = '';
            roomData.currentQuestion.options.forEach((option, index) => {
                const btn = document.createElement('button');
                btn.className = 'answer-btn';
                btn.textContent = option;
                btn.onclick = () => selectAnswer(index);
                playerAnswerOptions.appendChild(btn);
            });
            return;
        }

        if (roomData.correctAnswer !== null && roomData.buzzedPlayer === currentPlayerId) {
            playerAnswerOptions.innerHTML = '';
            buzzButton.disabled = true;
            
            if (roomData.correctAnswer) {
                playerStatus.textContent = 'âœ… Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©!';
                playerStatus.className = 'status-message success';
            } else {
                playerStatus.textContent = 'âŒ Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©!';
                playerStatus.className = 'status-message error';
            }
            return;
        }

        if (roomData.currentQuestion && !roomData.buzzedPlayer && !roomData.showOptions) {
            playerStatus.textContent = 'Ø§Ø¶ØºØ· Ø§Ù„Ø¬Ø±Ø³ Ù„Ù„Ø¥Ø¬Ø§Ø¨Ø©!';
            playerStatus.className = 'status-message info';
            buzzButton.disabled = false;
            playerAnswerOptions.innerHTML = '';
        } else if (roomData.buzzedPlayer && roomData.buzzedPlayer !== currentPlayerId) {
            const buzzedPlayerData = roomData.players[roomData.buzzedPlayer];
            playerStatus.textContent = `${buzzedPlayerData.name} ÙŠØ¬ÙŠØ¨ Ø§Ù„Ø¢Ù†...`;
            playerStatus.className = 'status-message warning';
            buzzButton.disabled = true;
            playerAnswerOptions.innerHTML = '';
        } else if (roomData.showOptions && !roomData.buzzedPlayer) {
            playerStatus.textContent = 'Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª! Ø§Ù†ØªØ¸Ø± Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ';
            playerStatus.className = 'status-message error';
            buzzButton.disabled = true;
            playerAnswerOptions.innerHTML = '';
        } else if (!roomData.currentQuestion) {
            playerStatus.textContent = 'Ø§Ù†ØªØ¸Ø± Ø§Ù„Ø³Ø¤Ø§Ù„...';
            playerStatus.className = 'status-message info';
            buzzButton.disabled = true;
            playerAnswerOptions.innerHTML = '';
        }
    }

    function buzzIn() {
        if (!roomData.currentQuestion || roomData.buzzedPlayer || roomData.showOptions) return;

        const roomRef = database.ref('rooms/' + currentRoomCode);
        roomRef.update({
            buzzedPlayer: currentPlayerId,
            questionStartTime: Date.now()
        });

        clearInterval(timerInterval);
        startTimer(5);
        
        setTimeout(() => {
            if (roomData.buzzedPlayer === currentPlayerId && !roomData.correctAnswer) {
                roomRef.update({ showOptions: true });
            }
        }, 5000);
    }

    function selectAnswer(answerIndex) {
        const roomRef = database.ref('rooms/' + currentRoomCode);
        const isCorrect = answerIndex === roomData.currentQuestion.correct;

        roomRef.update({
            selectedAnswer: answerIndex,
            correctAnswer: isCorrect
        });

        clearInterval(timerInterval);

        if (isCorrect) {
            const otherTeam = currentTeam === 'team1' ? 'team2' : 'team1';
            const hasOtherCouch = roomData[otherTeam + 'Couch']?.length > 0;
            
            if (hasOtherCouch) {
                roomRef.update({
                    waitingForChoice: true,
                    choicePlayer: currentPlayerId
                });
            } else {
                addToCouch();
            }
        } else {
            roomRef.update({
                bannedTeam: currentTeam,
                buzzedPlayer: null,
                showOptions: true
            });
        }
    }

    function makeChoice(choice) {
        if (choice === 'sit') {
            addToCouch();
        } else if (choice === 'steal') {
            stealFromCouch();
        }
    }

    function addToCouch() {
        const couchKey = currentTeam + 'Couch';
        const scoreKey = currentTeam + 'Score';
        
        const newCouch = [...(roomData[couchKey] || []), currentPlayerId];
        const newScore = (roomData[scoreKey] || 0) + 1;

        const roomRef = database.ref('rooms/' + currentRoomCode);
        roomRef.update({
            [couchKey]: newCouch,
            [scoreKey]: newScore,
            waitingForChoice: false,
            choicePlayer: null
        });

        setTimeout(() => {
            const nextBtn = document.getElementById('nextQuestionBtn');
            if (nextBtn) nextBtn.disabled = false;
        }, 2000);
    }

    function stealFromCouch() {
        const otherTeam = currentTeam === 'team1' ? 'team2' : 'team1';
        const otherCouchKey = otherTeam + 'Couch';
        const couchKey = currentTeam + 'Couch';
        const scoreKey = currentTeam + 'Score';
        const otherScoreKey = otherTeam + 'Score';
        
        const otherCouch = [...(roomData[otherCouchKey] || [])];
        const stolenPlayer = otherCouch.pop();
        
        const newCouch = [...(roomData[couchKey] || []), currentPlayerId];
        const newScore = (roomData[scoreKey] || 0) + 1;
        const otherNewScore = Math.max(0, (roomData[otherScoreKey] || 0) - 1);

        const roomRef = database.ref('rooms/' + currentRoomCode);
        roomRef.update({
            [couchKey]: newCouch,
            [otherCouchKey]: otherCouch,
            [scoreKey]: newScore,
            [otherScoreKey]: otherNewScore,
            waitingForChoice: false,
            choicePlayer: null
        });

        setTimeout(() => {
            const nextBtn = document.getElementById('nextQuestionBtn');
            if (nextBtn) nextBtn.disabled = false;
        }, 2000);
    }

    function checkVictory() {
        const teamSize = roomData.teamSize || 2;
        
        if (roomData.team1Couch?.length >= teamSize) {
            showVictory(roomData.team1Name);
        } else if (roomData.team2Couch?.length >= teamSize) {
            showVictory(roomData.team2Name);
        }
    }

    function showVictory(teamName) {
        clearInterval(timerInterval);
        document.getElementById('victoryScreen').style.display = 'block';
        document.getElementById('victoryMessage').textContent = `ğŸ‰ ${teamName} ÙØ§Ø² Ø¨Ø§Ù„Ù„Ø¹Ø¨Ø©! ğŸ‰`;
        document.getElementById('nextQuestionBtn').style.display = 'none';
    }

    document.getElementById('roomCode')?.addEventListener('input', function(e) {
        this.value = this.value.replace(/[^0-9]/g, '');
    });
</script>
```

</body>
</html>
