<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>ูุนุจุฉ ุงูููุจุฉ</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800;900&display=swap" rel="stylesheet">
<style>
:root{--bg:#0a1a3a;--card:rgba(12,28,60,0.85);--card2:rgba(15,35,70,0.8);--bdr:rgba(212,175,55,0.25);--gold:#d4af37;--goldL:rgba(212,175,55,0.15);--red:#C0392B;--redL:rgba(192,57,43,0.15);--blue:#4a9fd4;--blueL:rgba(74,159,212,0.15);--grn:#2ecc71;--grnL:rgba(46,204,113,0.15);--txt:#e8e0d4;--txtM:#b8c5d6;--txtD:#8fa3c0;--org:#d4af37;--orgL:rgba(212,175,55,0.15);--sh:0 2px 10px rgba(0,0,0,.2);--R:14px;--r:10px}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Tajawal',sans-serif;background:var(--bg);color:var(--txt);min-height:100dvh;display:flex;justify-content:center;align-items:center;padding:10px;position:relative;margin:0}
.app{width:100%;max-width:460px;display:flex;flex-direction:column;margin:0 auto}
.scr{display:none;flex-direction:column;flex:1}.scr.on{display:flex}
.hdr{text-align:center;padding:14px 0 10px}.hdr h1{font-size:1.5em;font-weight:900}.hdr .sub{font-size:.8em;color:var(--txtD);margin-top:2px}
.card{background:var(--card);border:1px solid var(--bdr);border-radius:var(--R);padding:16px;margin-bottom:10px;box-shadow:var(--sh)}
.fld{margin-bottom:12px}.fld label{display:block;font-size:.85em;font-weight:700;margin-bottom:5px;color:#d4af37}
.fld input,.fld select{width:100%;padding:11px 14px;background:rgba(10,26,58,0.5);border:1.5px solid var(--bdr);border-radius:var(--r);color:var(--txt);font-family:inherit;font-size:.95em;font-weight:500;outline:none}
.fld input:focus,.fld select:focus{border-color:var(--gold);box-shadow:0 0 0 3px rgba(212,175,55,.2)}
.fld input::placeholder{color:var(--txtD)}.fld select option{background:#0a1a3a;color:#fff}
.btn{width:100%;padding:13px;border:none;border-radius:var(--r);font-family:inherit;font-size:1em;font-weight:700;cursor:pointer;transition:all .15s;margin-top:6px}
.btn:active:not(:disabled){transform:scale(.97)}.btn:disabled{opacity:.4;cursor:not-allowed}
.bp{background:linear-gradient(135deg,#d4af37,#b8941e);color:#0a1a3a;font-weight:800;box-shadow:0 3px 12px rgba(212,175,55,.25)}
.bo{background:rgba(10,26,58,0.5);border:1.5px solid var(--bdr);color:var(--txtM)}
.bg{background:var(--grn);color:#fff}.br{background:var(--red);color:#fff}
.rcb{text-align:center;padding:14px;background:linear-gradient(135deg,#d4af37,#f5e6a3);border:1.5px solid #d4af37;border-radius:var(--R);margin-bottom:12px;box-shadow:var(--sh)}
.rcb .lb{font-size:.78em;color:#0a1a3a;font-weight:700}.rcb .code{font-size:2.4em;font-weight:900;color:#0a1a3a;letter-spacing:10px}
.chip{display:inline-flex;align-items:center;gap:5px;padding:5px 10px;background:rgba(10,26,58,0.5);border:1px solid var(--bdr);border-radius:20px;font-size:.82em;font-weight:600;margin:3px}
.dot{width:8px;height:8px;border-radius:50%}.dr{background:var(--red)}.db{background:var(--blue)}.dg{background:var(--gold)}
.tsg{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin:8px 0}
.tsb{padding:14px 8px;border-radius:var(--R);font-family:inherit;font-size:.95em;font-weight:700;cursor:pointer;border:2px solid transparent;transition:all .2s;text-align:center}
.tsb.rt{background:rgba(192,57,43,0.2);color:#e74c3c;border-color:rgba(192,57,43,.3)}
.tsb.bt{background:rgba(74,159,212,0.2);color:#4a9fd4;border-color:rgba(74,159,212,.3)}
.tsb.sel{border-color:var(--gold)!important;box-shadow:0 0 0 3px rgba(196,127,23,.15)}
.tsb:active{transform:scale(.96)}
.gtb{display:grid;grid-template-columns:1fr auto 1fr;align-items:center;gap:6px;margin-bottom:8px}
.tsc{padding:8px;border-radius:var(--r);text-align:center;box-shadow:var(--sh)}
.tsc.r{background:rgba(192,57,43,0.15);border:1.5px solid rgba(192,57,43,.3)}
.tsc.b{background:rgba(74,159,212,0.15);border:1.5px solid rgba(74,159,212,.3)}
.tsc .tn{font-size:.7em;font-weight:700;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.tsc.r .tn{color:#e74c3c}.tsc.b .tn{color:#4a9fd4}
.tsc .tv{font-size:1.4em;font-weight:900;line-height:1}.tsc.r .tv{color:#e74c3c}.tsc.b .tv{color:#4a9fd4}
.vb{font-size:.75em;font-weight:900;color:var(--txtD);padding:4px 8px;border-radius:20px;border:1px solid var(--bdr);background:var(--card)}
.mpl{display:flex;flex-wrap:wrap;gap:3px;justify-content:center;margin-top:3px}
.mp{font-size:.63em;padding:2px 5px;border-radius:8px;font-weight:600;background:rgba(255,255,255,.05);color:var(--txtD)}.mp.oc{opacity:.5;background:rgba(212,175,55,0.15);color:var(--gold)}
.couch{background:rgba(212,175,55,0.1);border:1.5px solid rgba(212,175,55,0.3);border-radius:var(--R);padding:12px;margin-bottom:8px;box-shadow:var(--sh)}
.couch .clb{text-align:center;font-size:.78em;font-weight:800;color:var(--gold);letter-spacing:2px;margin-bottom:8px}
.cseats{display:flex;justify-content:center;gap:8px;flex-wrap:wrap}
.cseat{display:inline-flex;align-items:center;justify-content:center;gap:4px;padding:5px 12px;border-radius:20px;font-size:.78em;font-weight:700}
.cseat.fr{background:var(--red);color:#fff}.cseat.fb{background:var(--blue);color:#fff}
.cseat.empty{width:36px;height:36px;border-radius:50%;border:2px dashed rgba(212,175,55,0.3);color:rgba(212,175,55,0.4);font-size:.7em;padding:0}
.cseat.me{box-shadow:0 0 0 3px rgba(196,127,23,.4)}
.qcard{background:var(--card);border:1.5px solid var(--bdr);border-radius:var(--R);padding:16px;margin-bottom:8px;text-align:center;box-shadow:var(--sh)}
.qcat{font-size:.72em;font-weight:700;color:var(--gold);letter-spacing:1px;margin-bottom:6px}
.tbar{text-align:center;margin-bottom:8px}
.tc{display:inline-flex;align-items:center;justify-content:center;width:56px;height:56px;border-radius:50%;border:3px solid var(--gold);font-size:1.5em;font-weight:900;color:var(--gold);background:var(--card);box-shadow:var(--sh);transition:all .3s}
.tc.dng{border-color:var(--red);color:var(--red);animation:tp .5s infinite}
.tc.sm{width:44px;height:44px;font-size:1.2em;border-color:var(--org);color:var(--org)}
.tc.sm.dng{border-color:var(--red);color:var(--red)}
@keyframes tp{0%,100%{transform:scale(1)}50%{transform:scale(1.08)}}
.buzzb{width:100%;padding:20px;border:none;border-radius:var(--R);font-family:inherit;font-size:1.25em;font-weight:800;cursor:pointer;background:linear-gradient(135deg,#d4af37,#b8941e);color:#0a1a3a;box-shadow:0 4px 18px rgba(212,175,55,.3);transition:all .15s;margin-bottom:8px}
.buzzb:active:not(:disabled){transform:scale(.96)}
.buzzb:disabled{background:rgba(15,30,65,0.5);color:var(--txtD);box-shadow:none;cursor:not-allowed}
.sts{padding:8px 12px;border-radius:var(--r);font-size:.85em;font-weight:700;text-align:center;margin-bottom:8px}
.sts.i{background:rgba(74,159,212,0.15);color:#4a9fd4}.sts.s{background:rgba(46,204,113,0.15);color:#2ecc71}
.sts.e{background:rgba(192,57,43,0.15);color:#e74c3c}.sts.w{background:rgba(212,175,55,0.15);color:#d4af37}
.opts{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:8px}
.ob{padding:12px 8px;background:var(--card);border:1.5px solid var(--bdr);border-radius:var(--r);font-family:inherit;font-size:.9em;font-weight:700;color:var(--txt);cursor:pointer;transition:all .2s;text-align:center;min-height:50px;display:flex;align-items:center;justify-content:center;box-shadow:var(--sh)}
.ob:hover:not(:disabled){border-color:var(--gold);background:rgba(212,175,55,0.15)}
.ob:active:not(:disabled){transform:scale(.96)}.ob:disabled{opacity:.35;cursor:not-allowed}
.aia{margin-bottom:8px}
.aia input{width:100%;padding:12px;background:rgba(10,26,58,0.5);border:2px solid var(--gold);border-radius:var(--r);color:var(--txt);font-family:inherit;font-size:1em;font-weight:700;text-align:center;outline:none;margin-bottom:6px}
.aia input::placeholder{color:var(--txtD)}
.chg{display:grid;gap:8px;margin-bottom:8px}
.chb{padding:14px;border:none;border-radius:var(--r);font-family:inherit;font-size:.95em;font-weight:700;cursor:pointer;transition:all .2s}
.chb:active{transform:scale(.97)}.chb.sit{background:var(--grn);color:#fff}.chb.pull{background:var(--red);color:#fff}
.bzi{padding:6px 12px;border-radius:var(--r);background:rgba(212,175,55,0.1);text-align:center;font-size:.82em;font-weight:700;color:#d4af37;margin-bottom:8px}
.vic{display:none;text-align:center;padding:40px 16px;flex:1;justify-content:center;align-items:center;flex-direction:column}
.vic.on{display:flex}
.vic .tr{font-size:4em;margin-bottom:12px;animation:bnc 1.5s infinite}
@keyframes bnc{0%,100%{transform:translateY(0)}50%{transform:translateY(-12px)}}
.vic h2{font-size:1.6em;font-weight:900;color:var(--gold);margin-bottom:20px}
.spc{flex:1}.hid{display:none!important}
@keyframes blink{0%,100%{opacity:1}50%{opacity:0}}
.qtxt{font-size:1.08em;font-weight:700;line-height:1.5;min-height:1.5em}
/* Replay team select overlay */
.rto{display:none;position:fixed;inset:0;background:rgba(0,0,0,.4);z-index:100;justify-content:center;align-items:center}
.rto.on{display:flex}
.rto .inner{background:rgba(12,28,60,0.95);border:1.5px solid rgba(212,175,55,0.3);border-radius:var(--R);padding:24px;width:90%;max-width:380px;box-shadow:0 8px 30px rgba(0,0,0,.3)}
</style>
<!-- Code Protection -->
<script>
(function(){document.addEventListener('contextmenu',function(e){e.preventDefault();return false;});document.addEventListener('keydown',function(e){if(e.key==='F12')return e.preventDefault(),false;if(e.ctrlKey&&e.shiftKey&&['I','i','J','j','C','c'].includes(e.key))return e.preventDefault(),false;if(e.ctrlKey&&['u','U','s','S'].includes(e.key))return e.preventDefault(),false;});(function(){setInterval(function(){(function(){return false;})['constructor']('debugger')();},50);})();Object.defineProperty(window,'console',{get:function(){return{log:function(){},warn:function(){},error:function(){},info:function(){},debug:function(){},clear:function(){},dir:function(){},table:function(){},trace:function(){},assert:function(){},count:function(){},group:function(){},groupEnd:function(){},time:function(){},timeEnd:function(){}}}});document.addEventListener('dragstart',function(e){e.preventDefault();});document.addEventListener('copy',function(e){e.preventDefault();});document.addEventListener('cut',function(e){e.preventDefault();});})();
</script>
<style>*:not(input):not(textarea):not(button){-webkit-user-select:none!important;-moz-user-select:none!important;user-select:none!important;}</style>
</head>
<body>
<div id="teamStars" style="position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:0;"></div>
<div class="app" style="position:relative;z-index:1;">

<!-- WELCOME -->
<div id="scrWelcome" class="scr on">
            <div class="header">
                <p style="color:#d4af37;font-size:0.9em;margin-bottom:8px;">โช ุฑูุถุงู ูุฑูู โช</p>
                <h1>ูุนุจุฉ ุงูููุจุฉ๐๏ธ</h1>
            </div>
            <div class="card">
                <div style="background:rgba(0,0,0,0.3);padding:15px;border-radius:10px;margin-bottom:20px;border-right:4px solid #d4af37;">
                    <p style="text-align:right;font-size:0.85em;line-height:1.8;color:#fff;">
                        <strong style="color:#d4af37;">๐ ููู ุชูุนุจ:</strong><br><br>
                        ูุฑูููู ูุชุณุงุจููู ุจุงูุงุฌุงุจุฉ ุนูู ุงูุฃุณุฆูุฉ ูุงููุงุนุจ ุงููู ูุฌุงูุจ ุงูู ูุฌูุณ ุนูู ุงูููุจุฉ ููุงููููู ุงููุดุงุฑูุฉ ุงูุง ุงุฐุง ูุฑุฑ ุงูุฎุตู ุจุนุฏ ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ ุงููู ูุณุญุจููู ูู ุงูููุจุฉ.<br><br>
                        ุงููุฑูู ุงููู ูุฌูุณ ูุงูู ุนูู ุงูููุจุฉ ูููุฒ.<br><br>
                        <strong style="color:#e74c3c;">โ๏ธ ุชูุจูู:</strong> ูู ูุถุบุท ุงูุฌุฑุณ ุฃููุง ูุฏูู 7 ุซูุงูู ููุชุงุจุฉ ุงูุฅุฌุงุจุฉ ุงุฐุง ุงุฎุทุฃ ูุชููู ุงูุณุคุงู ูุชุธูุฑ ุงูุฎูุงุฑุงุช ูููุฑูู ุงูุงุฎุฑ
                    </p>
                </div>
<button class="btn bp" onclick="showScr('scrCreate')">ุฅูุดุงุก ุบุฑูุฉ ุฌุฏูุฏุฉ</button>
<button class="btn bo" onclick="showScr('scrJoin')">ุงูุงูุถูุงู ูุบุฑูุฉ (ุจุงูููุฏ)</button>
<div style="text-align:center;margin:6px 0;color:#d4af37;font-size:0.8em;">โโ ุฃู โโ</div>
<button class="btn bp" onclick="showScr('scrPublic');loadPublicRoomsTeam()" style="background:linear-gradient(135deg,#27ae60,#2ecc71);color:#fff;">๐ ุฑููุงุช ุนุงูุฉ</button>
<button class="btn bp" onclick="quickJoinTeam()" id="quickJoinBtnTeam" style="background:linear-gradient(135deg,#2ecc71,#27ae60);color:#fff;">โก ุงูุถูุงู ุณุฑูุน</button>
<button class="btn bo" onclick="goBack()">ุฑุฌูุน</button>
</div></div>

<!-- PUBLIC ROOMS -->
<div class="scr" id="scrPublic">
<div class="hdr"><h1>๐ ุฑููุงุช ุนุงูุฉ</h1></div>
<div class="card">
<div class="fld"><label>ุงุณูู</label><input id="publicNameTeam" placeholder="ุฃุฏุฎู ุงุณูู"></div>
<div id="publicRoomsListTeam" style="margin:10px 0;"><p style="text-align:center;color:#aaa;">โณ ุฌุงุฑู ุงูุจุญุซ...</p></div>
<div id="noPublicRoomsTeam" class="hidden" style="text-align:center;color:#aaa;padding:15px;">๐ ูุง ุชูุฌุฏ ุฑููุงุช ุนุงูุฉ ุญุงููุงู</div>
<button class="btn bo" onclick="loadPublicRoomsTeam()">๐ ุชุญุฏูุซ</button>
<button class="btn bo" onclick="showScr('scrWelcome')">๐ ุฑุฌูุน</button>
</div></div>

<!-- CREATE -->
<div class="scr" id="scrCreate">
<div class="hdr"><h1>ุฅูุดุงุก ุบุฑูุฉ</h1></div>
<div class="card">
<div class="fld"><label>ุงุณูู</label><input id="hostName" placeholder="ุฃุฏุฎู ุงุณูู"></div>
<div style="display:flex;gap:5px;margin:8px 0;">
<button id="teamRoomPublic" onclick="teamIsPublic=true;this.style.opacity='1';document.getElementById('teamRoomPrivate').style.opacity='0.5'" class="btn bp" style="flex:1;opacity:0.5;background:#27ae60;color:#fff;">๐ ุนุงูุฉ</button>
<button id="teamRoomPrivate" onclick="teamIsPublic=false;this.style.opacity='1';document.getElementById('teamRoomPublic').style.opacity='0.5'" class="btn bo" style="flex:1;">๐ ุฎุงุตุฉ</button>
</div>
<div class="fld"><label>ุงุณู ุงููุฑูู ุงูุฃูู</label><input id="t1n" value="ุงููุฑูู ุงูุฃุญูุฑ"></div>
<div class="fld"><label>ุงุณู ุงููุฑูู ุงูุซุงูู</label><input id="t2n" value="ุงููุฑูู ุงูุฃุฒุฑู"></div>
<div class="fld"><label>ุนุฏุฏ ูุงุนุจู ูู ูุฑูู (= ุญุฌู ุงูููุจุฉ)</label><select id="tsz"><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option></select></div>
<button class="btn bp" onclick="createRoom()">ุฅูุดุงุก ุงูุบุฑูุฉ</button>
<button class="btn bo" onclick="showScr('scrWelcome')">ุฑุฌูุน</button>
</div></div>

<!-- JOIN -->
<div class="scr" id="scrJoin">
<div class="hdr"><h1>ุงูุงูุถูุงู ูุบุฑูุฉ</h1></div>
<div class="card">
<div class="fld"><label>ุงุณูู</label><input id="pName" placeholder="ุฃุฏุฎู ุงุณูู"></div>
<div class="fld"><label>ููุฏ ุงูุบุฑูุฉ</label><input id="pCode" placeholder="0000" maxlength="4" inputmode="numeric"></div>
<button class="btn bp" onclick="joinRoom()">ุงูุถู</button>
<button class="btn bo" onclick="showScr('scrWelcome')">ุฑุฌูุน</button>
</div></div>

<!-- TEAM SELECT -->
<div class="scr" id="scrTeam">
<div class="hdr"><h1>ุงุฎุชุฑ ูุฑููู</h1><div class="sub">ูุฑุญุจุงู <span id="wpn"></span></div></div>
<div class="card"><div class="tsg" id="tsBtns"></div></div></div>

<!-- LOBBY -->
<div class="scr" id="scrLobby">
<div class="hdr"><h1>ุบุฑูุฉ ุงูุงูุชุธุงุฑ</h1></div>
<div class="rcb"><div class="lb">ููุฏ ุงูุบุฑูุฉ</div><div class="code" id="drc"></div></div>
<div class="card"><div style="font-size:.8em;font-weight:700;color:var(--txtD);margin-bottom:8px">ุงุฎุชุฑ ูุฑููู</div><div class="tsg" id="htBtns"></div></div>
<div class="card"><div style="font-size:.8em;font-weight:700;color:var(--txtD);margin-bottom:8px">ุงููุงุนุจูู (<span id="pc">0</span>)</div><div id="lpl" style="display:flex;flex-wrap:wrap;gap:4px"></div></div>
<div class="spc"></div>
<button class="btn bp" onclick="startGame()" id="sgBtn" disabled>ุงุจุฏุฃ ุงููุนุจุฉ</button>
</div>

<!-- WAITING -->
<div class="scr" id="scrWait">
<div class="hdr"><h1>ูู ุงูุชุธุงุฑ ุงูุจุฏุก</h1><div class="sub">ุฃูุช ูู <span id="wtn" style="color:var(--gold);font-weight:700"></span></div></div>
<div class="card"><div style="font-size:.8em;font-weight:700;color:var(--txtD);margin-bottom:8px">ุงููุงุนุจูู</div><div id="wpl" style="display:flex;flex-wrap:wrap;gap:4px"></div></div></div>

<!-- GAME -->
<div class="scr" id="scrGame">
<div id="gTop" class="gtb">
<div class="tsc r"><div class="tn" id="gt1n"></div><div class="tv" id="gt1s">0</div><div class="mpl" id="gt1p"></div></div>
<div class="vb">VS</div>
<div class="tsc b"><div class="tn" id="gt2n"></div><div class="tv" id="gt2s">0</div><div class="mpl" id="gt2p"></div></div>
</div>
<div class="couch" id="couchSec"><div class="clb">๐๏ธ ููุจุฉ ุงูููุฒ (<span id="couchCnt">0</span>/<span id="couchMax">2</span>)</div><div class="cseats" id="couchSeats"></div></div>
<div id="gContent">
<div class="qcard hid" id="qCard"><div class="qcat" id="qCat"></div><div class="qtxt" id="qTxt"></div></div>
<div class="tbar hid" id="tBar"><div class="tc" id="tCirc">30</div></div>
<div class="bzi hid" id="bzInd"></div>
<div class="sts i" id="gSts">ุงูุชุธุฑ ุงูุณุคุงู...</div>
<button class="buzzb hid" id="bzBtn" onclick="buzzIn()" disabled>๐ ุงุถุบุท ุงูุฌุฑุณ!</button>
<div class="aia hid" id="aiArea"><div class="tbar"><div class="tc sm" id="atCirc">7</div></div><input id="tAns" placeholder="ุงูุชุจ ุฅุฌุงุจุชู..." autocomplete="off"><button class="btn bg" onclick="submitAns()">ุฅุฑุณุงู</button></div>
<div class="opts hid" id="optsG"></div>
<div class="chg hid" id="chG"></div>
</div>
<div class="vic" id="vicOv"><div class="tr">๐</div><h2 id="vicMsg"></h2>
<button class="btn bp" onclick="askReplay()">ุฅุนุงุฏุฉ ุงููุนุจ ๐</button>
<button class="btn bo" onclick="window.location.href='index.html'">ุงูุฎุฑูุฌ โฉ๏ธ</button>
</div>
<div class="spc"></div>
<div class="hid" id="hNext"><button class="btn bp" onclick="nextQ()">ุงูุณุคุงู ุงูุชุงูู โถ๏ธ</button></div>
</div>

<!-- REPLAY TEAM SELECT OVERLAY -->
<div class="rto" id="replayOv">
<div class="inner">
<div class="hdr"><h1>ุงุฎุชุฑ ูุฑููู</h1><div class="sub">ููููู ุชุบููุฑ ูุฑููู ูุจู ุจุฏุงูุฉ ุงูุฌููุฉ ุงูุฌุฏูุฏุฉ</div></div>
<div class="tsg" id="rpBtns"></div>
<button class="btn bp" id="rpStart" onclick="confirmReplay()" style="margin-top:10px">ุชุฃููุฏ ูุจุฏุก ุงููุนุจุฉ โถ๏ธ</button>
<div style="text-align:center;margin-top:8px;font-size:.75em;color:var(--txtD)" id="rpWait" class="hid">ูู ุงูุชุธุงุฑ ุงููุถูู...</div>
</div></div>

</div>

<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
<script>
firebase.initializeApp({
  apiKey:"AIzaSyBUXlgxP463b18dg9_Og_8EcMDLfLIr76o",
  authDomain:"team-cc63c.firebaseapp.com",
  databaseURL:"https://team-cc63c-default-rtdb.europe-west1.firebasedatabase.app/",
  projectId:"team-cc63c",
  storageBucket:"team-cc63c.firebasestorage.app",
  messagingSenderId:"511582595742",
  appId:"1:511582595742:web:3e21273dcf49bf26d7298f"
});
const db = firebase.database();

/* โโโโโโโ QUESTIONS โโโโโโโ */
const ALL_Q = [
  {cat:"ุฏูููุฉ",q:"ูู ุนุฏุฏ ุณูุฑ ุงููุฑุขู ุงููุฑููุ",opts:["114 ุณูุฑุฉ","110 ุณูุฑุฉ","120 ุณูุฑุฉ","100 ุณูุฑุฉ"],c:0},
  {cat:"ุฏูููุฉ",q:"ูุง ูู ุฃุทูู ุณูุฑุฉ ูู ุงููุฑุขู ุงููุฑููุ",opts:["ุณูุฑุฉ ุงูุจูุฑุฉ","ุณูุฑุฉ ุขู ุนูุฑุงู","ุณูุฑุฉ ุงููุณุงุก","ุณูุฑุฉ ุงูุฃุนุฑุงู"],c:0},
  {cat:"ุฏูููุฉ",q:"ูู ุนุฏุฏ ุฃุฑูุงู ุงูุฅุณูุงูุ",opts:["5","4","6","7"],c:0},
  {cat:"ุฏูููุฉ",q:"ูู ูู ุฎุงุชู ุงูุฃูุจูุงุกุ",opts:["ูุญูุฏ ๏ทบ","ุนูุณู ุนููู ุงูุณูุงู","ููุณู ุนููู ุงูุณูุงู","ุฅุจุฑุงููู ุนููู ุงูุณูุงู"],c:0},
  {cat:"ุฏูููุฉ",q:"ูู ุฃู ุดูุฑ ููุฑุถ ุงูุตูุงูุ",opts:["ุฑูุถุงู","ุดุนุจุงู","ุฑุฌุจ","ุฐู ุงููุนุฏุฉ"],c:0},
  {cat:"ุฏูููุฉ",q:"ูู ุนุฏุฏ ุฃุฑูุงู ุงูุฅููุงูุ",opts:["6","5","7","4"],c:0},
  {cat:"ุฏูููุฉ",q:"ูุง ุฃูู ูุง ูุฒู ูู ุงููุฑุขู ุงููุฑููุ",opts:["ุงูุฑุฃ","ุงููุงุชุญุฉ","ุงููุฏุซุฑ","ุงูุจุณููุฉ"],c:0},
  {cat:"ุฏูููุฉ",q:"ูู ุนุฏุฏ ุงูุฃูุจูุงุก ุงููุฐููุฑูู ูู ุงููุฑุขูุ",opts:["25","24","26","30"],c:0},
  {cat:"ุฏูููุฉ",q:"ูุง ูู ุงูุณูุฑุฉ ุงูุชู ุชุนุฏู ุซูุซ ุงููุฑุขูุ",opts:["ุงูุฅุฎูุงุต","ุงููุงุชุญุฉ","ุงูุจูุฑุฉ","ูุณ"],c:0},
  {cat:"ุซูุงููุฉ",q:"ูู ูู ูุฎุชุฑุน ุงููุตุจุงุญ ุงูููุฑุจุงุฆูุ",opts:["ุชููุงุณ ุฅุฏูุณูู","ูููููุง ุชุณูุง","ุจูุฌุงููู ูุฑุงููููู","ุฃููุณูุฏุฑ ุจูู"],c:0},
  {cat:"ุซูุงููุฉ",q:"ูุง ูู ุฃูุจุฑ ุฏููุฉ ุนุฑุจูุฉ ูุณุงุญุฉุ",opts:["ุงูุฌุฒุงุฆุฑ","ุงูุณุนูุฏูุฉ","ุงูุณูุฏุงู","ููุจูุง"],c:0},
  {cat:"ุซูุงููุฉ",q:"ูู ุนุฏุฏ ูุงุฑุงุช ุงูุนุงููุ",opts:["7","6","5","8"],c:0},
  {cat:"ุซูุงููุฉ",q:"ูุง ูู ุงููุบุฉ ุงูุฃูุซุฑ ุชุญุฏุซุงู ูู ุงูุนุงููุ",opts:["ุงูุตูููุฉ","ุงูุฅูุฌููุฒูุฉ","ุงูุฅุณุจุงููุฉ","ุงูุนุฑุจูุฉ"],c:0},
  {cat:"ุฌุบุฑุงููุฉ",q:"ูุง ูู ุนุงุตูุฉ ุงููุงุจุงูุ",opts:["ุทูููู","ูููุชู","ุฃูุณุงูุง","ูููููุงูุง"],c:0},
  {cat:"ุฌุบุฑุงููุฉ",q:"ูุง ูู ุฃุทูู ููุฑ ูู ุงูุนุงููุ",opts:["ููุฑ ุงูููู","ููุฑ ุงูุฃูุงุฒูู","ููุฑ ุงููุณูุณูุจู","ููุฑ ุงููุงูุบุชุณู"],c:0},
  {cat:"ุฌุบุฑุงููุฉ",q:"ูู ุนุฏุฏ ุฏูู ูุฌูุณ ุงูุชุนุงูู ุงูุฎููุฌูุ",opts:["6","5","7","8"],c:0},
  {cat:"ุฌุบุฑุงููุฉ",q:"ูุง ูู ุฃูุจุฑ ุตุญุฑุงุก ูู ุงูุนุงููุ",opts:["ุงูุตุญุฑุงุก ุงููุจุฑู","ุงูุฑุจุน ุงูุฎุงูู","ุบูุจู","ูุงูุงูุงุฑู"],c:0},
  {cat:"ุฌุบุฑุงููุฉ",q:"ูุง ูู ุฃุตุบุฑ ุฏููุฉ ูู ุงูุนุงููุ",opts:["ุงููุงุชููุงู","ูููุงูู","ุณุงู ูุงุฑููู","ููุฎุชูุดุชุงูู"],c:0},
  {cat:"ุฑูุงุถูุฉ",q:"ูู ุนุฏุฏ ูุงุนุจู ูุฑุฉ ุงููุฏู ูู ุงููุฑููุ",opts:["11","10","12","9"],c:0},
  {cat:"ุฑูุงุถูุฉ",q:"ูู ุฃู ุนุงู ุฃูููุช ุฃูู ุจุทููุฉ ูุฃุณ ุนุงููุ",opts:["1930","1928","1934","1926"],c:0},
  {cat:"ุฑูุงุถูุฉ",q:"ูู ูุฏุฉ ุงูุดูุท ุงููุงุญุฏ ูู ูุฑุฉ ุงููุฏูุ",opts:["45 ุฏูููุฉ","40 ุฏูููุฉ","50 ุฏูููุฉ","30 ุฏูููุฉ"],c:0},
  {cat:"ุนูููุฉ",q:"ูู ุนุฏุฏ ููุงูุจ ุงููุฌููุนุฉ ุงูุดูุณูุฉุ",opts:["8","9","7","10"],c:0},
  {cat:"ุนูููุฉ",q:"ูุง ูู ุงูุนูุตุฑ ุงูุฃูุซุฑ ููุฑุฉ ูู ุงููููุ",opts:["ุงูููุฏุฑูุฌูู","ุงูุฃูุณุฌูู","ุงููุฑุจูู","ุงููููููู"],c:0},
  {cat:"ุนูููุฉ",q:"ูู ุนุฏุฏ ุนุธุงู ุฌุณู ุงูุฅูุณุงู ุงูุจุงูุบุ",opts:["206","205","208","200"],c:0},
  {cat:"ุนูููุฉ",q:"ูุง ูู ุฃุตูุจ ูุนุฏู ุนูู ูุฌู ุงูุฃุฑุถุ",opts:["ุงูุฃููุงุณ","ุงูุญุฏูุฏ","ุงูุชูุชุงูููู","ุงูุฐูุจ"],c:0},
  {cat:"ุนุงูุฉ",q:"ูู ุนุฏุฏ ุฃููุงู ููุณ ูุฒุญุ",opts:["7","6","8","5"],c:0},
  {cat:"ุนุงูุฉ",q:"ูุง ูู ุงูุนููุฉ ุงูุฑุณููุฉ ูููุงุจุงูุ",opts:["ุงููู","ุงูููู","ุงูููุงู","ุงูุฏููุงุฑ"],c:0},
  {cat:"ุนุงูุฉ",q:"ูู ุนุฏุฏ ุญุฑูู ุงููุบุฉ ุงูุนุฑุจูุฉุ",opts:["28","26","30","27"],c:0},
  {cat:"ุนุงูุฉ",q:"ูุง ูู ุงูุญููุงู ุงูุฃุณุฑุน ูู ุงูุนุงููุ",opts:["ุงูููุฏ","ุงูุฃุณุฏ","ุงูุญุตุงู","ุงููุณุฑ"],c:0},
  {cat:"ุนุงูุฉ",q:"ูู ุนุฏุฏ ุฃูุงู ุงูุณูุฉ ุงููุจูุณุฉุ",opts:["366","365","364","367"],c:0},
  // ===== ุฑูุงุถูุฉ =====
{cat:"ุฑูุงุถูุฉ",q:"ูู ุนุฏุฏ ุชุจุฏููุงุช ุงููุฑูู ุงููุณููุญุฉ ุนุงุฏุฉู ูู ูุจุงุฑูุงุช ูุฑุฉ ุงููุฏู (ุจุนุฏ ุชุญุฏูุซุงุช ุงููููุง)ุ",opts:["5","3","6","4"],c:0},
{cat:"ุฑูุงุถูุฉ",q:"ูู ุนุฏุฏ ุฃุดูุงุท ูุจุงุฑุงุฉ ูุฑุฉ ุงูุณูุฉ ุงูุฑุณููุฉุ",opts:["4","2","3","5"],c:0},
{cat:"ุฑูุงุถูุฉ",q:"ูู ุทูู ุณุจุงู ุงููุงุฑุงุซูู ุงูุฑุณููุ",opts:["42.195 ูู","40 ูู","21.097 ูู","50 ูู"],c:0},
{cat:"ุฑูุงุถูุฉ",q:"ูู ุฃู ุฏููุฉ ุฃููููุช ุฃูููุจูุงุฏ 2016ุ",opts:["ุงูุจุฑุงุฒูู","ุงูุตูู","ุงููููุงู","ุจุฑูุทุงููุง"],c:0},
{cat:"ุฑูุงุถูุฉ",q:"ูู ููุทุฉ ุชูุญุชุณุจ ุงูุฑููุฉ ุงูุซูุงุซูุฉ ูู ูุฑุฉ ุงูุณูุฉุ",opts:["3","2","1","4"],c:0},
{cat:"ุฑูุงุถูุฉ",q:"ูู ุนุฏุฏ ุงููุงุนุจูู ุฏุงุฎู ุงูููุนุจ ููู ูุฑูู ูู ูุฑุฉ ุงูุทุงุฆุฑุฉุ",opts:["6","5","7","8"],c:0},
{cat:"ุฑูุงุถูุฉ",q:"ูู ุนุฏุฏ ุงูุฌููุงุช ูู ุงููุฒุงู ุงูุงุญุชุฑุงูู ููููุงููุฉ ุนุงุฏุฉูุ",opts:["12","10","8","15"],c:0},
{cat:"ุฑูุงุถูุฉ",q:"ูุง ุงุณู ุงูุจุทููุฉ ุงูุฃููู ููุฃูุฏูุฉ ูู ุฃูุฑูุจุงุ",opts:["ุฏูุฑู ุฃุจุทุงู ุฃูุฑูุจุง","ุงูุฏูุฑู ุงูุฃูุฑูุจู","ูุฃุณ ุงูุนุงูู ููุฃูุฏูุฉ","ูุฃุณ ุงูุณูุจุฑ ุงูุฃูุฑูุจู"],c:0},
{cat:"ุฑูุงุถูุฉ",q:"ูู ุนุฏุฏ ุฃุดูุงุท ูุจุงุฑุงุฉ ุงูุชูุณ ููุฑุฌุงู ูู ุงูุจุทููุงุช ุงูุฃุฑุจุน ุงููุจุฑูุ",opts:["5","3","4","2"],c:0},
{cat:"ุฑูุงุถูุฉ",q:"ุฃู ุฑูุงุถุฉ ุชูุนุฑู ุจู(ุงูุฑูุงุถุฉ ุงูุจูุถุงุก)ุ",opts:["ุงูุชูุณ","ุงูุณุจุงุญุฉ","ุงูุฌูุฏู","ุงููุฑุฉ ุงูุทุงุฆุฑุฉ"],c:0},

// ===== ุชุงุฑูุฎูุฉ =====
{cat:"ุชุงุฑูุฎูุฉ",q:"ูู ุฃู ุนุงู ุงูุชูุช ุงูุญุฑุจ ุงูุนุงูููุฉ ุงูุซุงููุฉุ",opts:["1945","1944","1946","1939"],c:0},
{cat:"ุชุงุฑูุฎูุฉ",q:"ูุง ุงุณู ุงูุญุถุงุฑุฉ ุงูุชู ุจูููุช ุญูู ููุฑ ุงูููู ูุฏููุงูุ",opts:["ุงููุตุฑูุฉ ุงููุฏููุฉ","ุงูุฑููุงููุฉ","ุงูุฅุบุฑูููุฉ","ุงูููููููุฉ"],c:0},
{cat:"ุชุงุฑูุฎูุฉ",q:"ูู ูู ุงููุงุฆุฏ ุงูููุฏููู ุงูุฐู ูุชุญ ุจูุงุฏุงู ูุงุณุนุฉ ุญุชู ุงูููุฏุ",opts:["ุงูุฅุณููุฏุฑ ุงูุฃูุจุฑ","ูููููุณ ููุตุฑ","ุญูุจุนู","ููุฑูู"],c:0},
{cat:"ุชุงุฑูุฎูุฉ",q:"ูุง ุงุณู ุงูุณูููุฉ ุงูุดููุฑุฉ ุงูุชู ุบุฑูุช ุนุงู 1912ุ",opts:["ุชุงูุชุงููู","ุจุฑูุชุงูู","ูููู ูุงุฑู","ุณุงูุชุง ูุงุฑูุง"],c:0},
{cat:"ุชุงุฑูุฎูุฉ",q:"ูุง ุงุณู ุงูุฌุฏุงุฑ ุงูุฏูุงุนู ุงูุดููุฑ ูู ุงูุตููุ",opts:["ุณูุฑ ุงูุตูู ุงูุนุธูู","ุฌุฏุงุฑ ุจุฑููู","ุงูุณูุฑ ุงููุงุฏุฑูุงูู","ุณูุฑ ุงููุฏุณ"],c:0},
{cat:"ุชุงุฑูุฎูุฉ",q:"ุฃู ุฅูุจุฑุงุทูุฑูุฉ ูุงูุช ุนุงุตูุชูุง ุฑููุงุ",opts:["ุงูุฅูุจุฑุงุทูุฑูุฉ ุงูุฑููุงููุฉ","ุงูุจูุฒูุทูุฉ","ุงููุฑุนูููุฉ","ุงูุนุจุงุณูุฉ"],c:0},
{cat:"ุชุงุฑูุฎูุฉ",q:"ูู ุฃู ูุงุฑุฉ ูุงูุช ุญุถุงุฑุฉ ุงูุฅููุงุ",opts:["ุฃูุฑููุง ุงูุฌููุจูุฉ","ุฃูุฑููุง ุงูุดูุงููุฉ","ุฃูุฑูุจุง","ุขุณูุง"],c:0},
{cat:"ุชุงุฑูุฎูุฉ",q:"ูุง ุงุณู ุงูุญุฏุซ ุงูุฐู ุฃุฏู ูุงููุณุงู ุฃููุงููุง ุฅูู ุดุฑููุฉ ูุบุฑุจูุฉ ุจุนุฏ ุงูุญุฑุจ ุงูุนุงูููุฉ ุงูุซุงููุฉุ",opts:["ุงูุญุฑุจ ุงูุจุงุฑุฏุฉ","ุญุฑุจ ุงููุฑู","ุญุฑุจ ููุชูุงู","ุญุฑุจ ุงูุฎููุฌ"],c:0},
{cat:"ุชุงุฑูุฎูุฉ",q:"ูู ูู ุงููุณุชูุดู ุงูุฐู ุงุฑุชุจุท ุงุณูู ุจุงูุชุดุงู ุงูุฃูุฑููุชูู ุนุงู 1492ุ",opts:["ูุฑูุณุชููุฑ ูููููุจูุณ","ูุงุณูู ุฏุง ุบุงูุง","ูุงุฌูุงู","ุฌููุณ ููู"],c:0},
{cat:"ุชุงุฑูุฎูุฉ",q:"ูุง ุงุณู ุงูุนุตุฑ ุงูุฐู ุชููุฒ ุจุงูุงุนุชูุงุฏ ุนูู ุงูุญุฌุฑ ูุตูุงุนุฉ ุงูุฃุฏูุงุชุ",opts:["ุงูุนุตุฑ ุงูุญุฌุฑู","ุงูุนุตุฑ ุงูุจุฑููุฒู","ุงูุนุตุฑ ุงูุญุฏูุฏู","ุงูุนุตุฑ ุงูุตูุงุนู"],c:0},

// ===== ูุณูุณูุงุช =====
{cat:"ูุณูุณูุงุช",q:"ูุง ุงุณู ุงููุณูุณู ุงูุฐู ุชุฏูุฑ ุฃุญุฏุงุซู ุญูู ุตูุงุนุฉ ุงููุฎุฏุฑุงุช ูุดุฎุตูุฉ ูุงูุชุฑ ูุงูุชุ",opts:["Breaking Bad","The Office","Friends","Sherlock"],c:0},
{cat:"ูุณูุณูุงุช",q:"ูุง ุงุณู ุงููุณูุณู ุงูููุฑู ุงูุฐู ูุนุชูุฏ ุนูู ุฃูุนุงุจ ูุงุชูุฉ ููููุฒ ุจุฌุงุฆุฒุฉุ",opts:["ูุนุจุฉ ุงูุญุจุงุฑ","ุฏุงุฑู","ูุงุฑููุณ","ุจููู ุจูุงููุฏุฑุฒ"],c:0},
{cat:"ูุณูุณูุงุช",q:"ูุง ุงุณู ุงููุณูุณู ุงูุฅุณุจุงูู ุนู ุณุฑูุฉ ูุทุจุนุฉ ุงููููุฏ ุจููุงุฏุฉ (ุงูุจุฑูููุณูุฑ)ุ",opts:["La Casa de Papel","Vikings","Stranger Things","Narcos"],c:0},
{cat:"ูุณูุณูุงุช",q:"ูุง ุงุณู ุงููุณูุณู ุงูููููุฏู ุงูุดููุฑ ุงูุฐู ุชุฏูุฑ ุฃุญุฏุงุซู ุญูู 6 ุฃุตุฏูุงุก ูู ูููููุฑูุ",opts:["Friends","How I Met Your Mother","The Big Bang Theory","Modern Family"],c:0},
{cat:"ูุณูุณูุงุช",q:"ุฃู ูุณูุณู ุชุฏูุฑ ุฃุญุฏุงุซู ุญูู ูุญูู ุนุจูุฑู ุงุณูู ุดูุฑููู ููููุฒุ",opts:["Sherlock","House","Dark","Suits"],c:0},
{cat:"ูุณูุณูุงุช",q:"ูุง ุงุณู ูุณูุณู ุงููุงูุชุงุฒูุง ุงูุฐู ุงุดุชูุฑ ุจุตุฑุงุน ุงูุนุฑูุดุ",opts:["Game of Thrones","The Witcher","The Crown","Lost"],c:0},
{cat:"ูุณูุณูุงุช",q:"ูุง ุงุณู ุงููุณูุณู ุงูุฐู ูุชูุงูู ุนุตุงุจุฉ ูู ุจุฑููุบูุงู ูุฒุนูููุง ุชููุงุณ ุดููุจูุ",opts:["Peaky Blinders","Narcos","Vikings","Suits"],c:0},
{cat:"ูุณูุณูุงุช",q:"ูุง ุงุณู ุงููุณูุณู ุงูุฐู ุชุฏูุฑ ุฃุญุฏุงุซู ุญูู ูุจุงุก ุงูุฒููุจู ูุจูุงุก ุงููุงุฌููุ",opts:["The Walking Dead","Dark","Prison Break","Lost"],c:0},
{cat:"ูุณูุณูุงุช",q:"ูุง ุงุณู ุงููุณูุณู ุงููุงูููู ุงูุฐู ุจุทููู ูุญุงูู ุงุณูู ูุงุฑูู ุณุจููุชุฑุ",opts:["Suits","House","The Office","Dexter"],c:0},
{cat:"ูุณูุณูุงุช",q:"ูุง ุงุณู ุงููุณูุณู ุงูุฐู ุจุทููู ูุงููู ุณูููููุฏ ูููุฑุจ ูู ุงูุณุฌูุ",opts:["Prison Break","Lost","Dexter","Narcos"],c:0},

// ===== ุฃููุงู =====
{cat:"ุฃููุงู",q:"ูุง ุงุณู ูููู ุงูุฑุณูู ุงููุชุญุฑูุฉ ุงูุฐู ุชุฏูุฑ ูุตุชู ุญูู ุฃูุนุงุจ ุชุชุญุฑู ุนูุฏูุง ูุง ูุฑุงูุง ุงูุจุดุฑุ",opts:["Toy Story","Shrek","Frozen","Cars"],c:0},
{cat:"ุฃููุงู",q:"ูุง ุงุณู ุงููููู ุงูุฐู ุชุฏูุฑ ูุตุชู ุญูู ุณูููุฉ ุบุฑูุช ูู ุงููุญูุท ููุตุฉ ุญุจุ",opts:["Titanic","Inception","Gladiator","Avatar"],c:0},
{cat:"ุฃููุงู",q:"ูุง ุงุณู ุงููููู ุงูุฐู ูุฏูุฑ ุญูู ุฏุฎูู ุงูุฃุญูุงู ูุฒุฑุงุนุฉ ุงูุฃููุงุฑุ",opts:["Inception","Interstellar","The Matrix","Memento"],c:0},
{cat:"ุฃููุงู",q:"ูุง ุงุณู ุงููููู ุงูุฐู ูุชุญุฏุซ ุนู ูููุจ ุจุงูุฏูุฑุง ููุงุฆูุงุช ุฒุฑูุงุกุ",opts:["Avatar","Dune","Star Wars","Joker"],c:0},
{cat:"ุฃููุงู",q:"ูุง ุงุณู ูููู ุงูุฃุจุทุงู ุงูุฎุงุฑููู ุงูุฐู ูุฌูุน ุดุฎุตูุงุช ูุงุฑูู ุถุฏ ุชูุฏูุฏ ูุจูุฑุ",opts:["Avengers","Batman","Superman","X-Men"],c:0},
{cat:"ุฃููุงู",q:"ูุง ุงุณู ุงููููู ุงูุฐู ุชุฏูุฑ ุฃุญุฏุงุซู ูู ูุฏุฑุณุฉ ุณุญุฑูุฉ ูุจุทูู ูุงุฑูุ",opts:["Harry Potter","The Hobbit","Narnia","Fantastic Beasts"],c:0},
{cat:"ุฃููุงู",q:"ูุง ุงุณู ุงููููู ุงูุฐู ุจุทููู ูุญุงุฑุจ ุฑููุงูู ูุนูุฏ ููุงูุชูุงู ูู ุงูุณุงุญุฉุ",opts:["Gladiator","Braveheart","Troy","300"],c:0},
{cat:"ุฃููุงู",q:"ูุง ุงุณู ุงููููู ุงูุฐู ุจุทููู ููุฑุฌ ููุณุชุนุฑุถ ุชุญููู ุงูููุณู ูู ุฌูุซุงูุ",opts:["Joker","The Dark Knight","Venom","Logan"],c:0},
{cat:"ุฃููุงู",q:"ูุง ุงุณู ุงููููู ุงูุฐู ูุฏูุฑ ุญูู ุฑุญูุฉ ูุถุงุฆูุฉ ูุฅููุงุฐ ุงูุจุดุฑูุฉ ุนุจุฑ ุซูุจ ุฏูุฏูุ",opts:["Interstellar","Gravity","The Martian","Arrival"],c:0},
{cat:"ุฃููุงู",q:"ูุง ุงุณู ุงููููู ุงูุดููุฑ ุนู ุฏููุงุตูุฑุงุช ุชุนูุฏ ููุญูุงุฉ ุฏุงุฎู ุญุฏููุฉุ",opts:["Jurassic Park","King Kong","Godzilla","Jumanji"],c:0},
            // ===== ุงูุชุตุงุฏ =====
{cat:"ุงูุชุตุงุฏ",q:"ูุง ุงูุนููุฉ ุงูุฑุณููุฉ ููููููุฉ ุงูุนุฑุจูุฉ ุงูุณุนูุฏูุฉุ",opts:["ุงูุฑูุงู","ุงูุฏููุงุฑ","ุงูุฏุฑูู","ุงูุฌููู"],c:0},
{cat:"ุงูุชุตุงุฏ",q:"ูุง ูุนูู GDPุ",opts:["ุงููุงุชุฌ ุงููุญูู ุงูุฅุฌูุงูู","ุงูุฏุฎู ุงููุฑุฏู","ุงูููุฒุงููุฉ ุงูุนุงูุฉ","ูููุฉ ุงูุตุงุฏุฑุงุช"],c:0},
{cat:"ุงูุชุตุงุฏ",q:"ูู ูุชุญูู ุจุงูุณูุงุณุฉ ุงูููุฏูุฉ ููุฏููุฉุ",opts:["ุงูุจูู ุงููุฑูุฒู","ูุฒุงุฑุฉ ุงูุชุนููู","ุงูุจูุฏูุฉ","ุงูุดุฑูุงุช"],c:0},
{cat:"ุงูุชุตุงุฏ",q:"ุงุฑุชูุงุน ุงูุฃุณุนุงุฑ ูุณููุ",opts:["ุงูุชุถุฎู","ุงููุณุงุฏ","ุงูุงูููุงุด","ุงูุงุญุชูุงุฑ"],c:0},
{cat:"ุงูุชุตุงุฏ",q:"ุดุฑุงุก ุงูุฃุณูู ูุนููุ",opts:["ุงูุชูุงู ุฌุฒุก ูู ุดุฑูุฉ","ุฅูุฑุงุถ ุจูู","ุดุฑุงุก ุฃุฑุถ","ูุชุญ ุญุณุงุจ"],c:0},

// ===== ุนููู =====
{cat:"ุนูููุฉ",q:"ูุง ุงูุบุงุฒ ุงูุฐู ูุชููุณูุ",opts:["ุงูุฃูุณุฌูู","ุงูููุฏุฑูุฌูู","ุงูููุชุฑูุฌูู","ุซุงูู ุฃูุณูุฏ ุงููุฑุจูู"],c:0},
{cat:"ุนูููุฉ",q:"ุฏุฑุฌุฉ ุบููุงู ุงููุงุกุ",opts:["100ยฐ","90ยฐ","80ยฐ","120ยฐ"],c:0},
{cat:"ุนูููุฉ",q:"ุฃููู ุญุงุณุฉ ูุฏู ุงูุฅูุณุงูุ",opts:["ุงูุจุตุฑ","ุงูุดู","ุงูุณูุน","ุงูููุณ"],c:0},
{cat:"ุนูููุฉ",q:"ูุฑูุฒ ุงูุฌูุงุฒ ุงูุนุตุจูุ",opts:["ุงูุฏูุงุบ","ุงูููุจ","ุงูุฑุฆุฉ","ุงููุนุฏุฉ"],c:0},
{cat:"ุนูููุฉ",q:"ูู ุนุฏุฏ ูุฑูููุณููุงุช ุงูุฅูุณุงูุ",opts:["46","44","48","50"],c:0},

// ===== ุฃูุนุงุจ =====
{cat:"ุฃูุนุงุจ",q:"ุดุฑูุฉ ุจูุงูุณุชูุดู ุชุชุจุนุ",opts:["ุณููู","ูุงููุฑูุณููุช","ูููุชูุฏู","ุณูุบุง"],c:0},
{cat:"ุฃูุนุงุจ",q:"ูุนุจุฉ ูุงูููุฑุงูุช ุชุนุชูุฏ ุนููุ",opts:["ุงูุจูุงุก ูุงูุงุณุชูุดุงู","ุงูุณุจุงู","ุงูุฑูุงุถุฉ","ุงูุฑูุงูุฉ ููุท"],c:0},
{cat:"ุฃูุนุงุจ",q:"ุฃุดูุฑ ูุนุจุฉ ุจุงุชู ุฑููุงูุ",opts:["Fortnite","FIFA","GTA","Need for Speed"],c:0},
{cat:"ุฃูุนุงุจ",q:"ุฌูุงุฒ Xbox ุชุงุจุน ูุดุฑูุฉุ",opts:["ูุงููุฑูุณููุช","ุณููู","ุฌูุฌู","ุฃุจู"],c:0},
{cat:"ุฃูุนุงุจ",q:"ูุนุจุฉ GTA ุชุตููุ",opts:["ุนุงูู ููุชูุญ","ุณุจุงู","ุฃูุบุงุฒ","ุฑูุงุถุฉ"],c:0},

// ===== ุฌุณู ุงูุฅูุณุงู =====
{cat:"ุฌุณู",q:"ุฃูุจุฑ ุนุถู ูู ุฌุณู ุงูุฅูุณุงูุ",opts:["ุงูุฌูุฏ","ุงูููุจ","ุงููุจุฏ","ุงูุฑุฆุฉ"],c:0},
{cat:"ุฌุณู",q:"ุนุฏุฏ ุฃุณูุงู ุงูุฅูุณุงู ุงูุจุงูุบุ",opts:["32","28","30","36"],c:0},
{cat:"ุฌุณู",q:"ุงูุนุถู ุงููุณุคูู ุนู ุถุฎ ุงูุฏูุ",opts:["ุงูููุจ","ุงูุฑุฆุฉ","ุงูุฏูุงุบ","ุงููุจุฏ"],c:0},
{cat:"ุฌุณู",q:"ุฃููู ุนุถูุฉ ูุณุจุฉ ูุญุฌููุงุ",opts:["ุงููุณุงู","ุงูุฐุฑุงุน","ุงูุณุงู","ุงูุธูุฑ"],c:0},
{cat:"ุฌุณู",q:"ุงูุนุธุงู ุชุญููุ",opts:["ุงูุฃุนุถุงุก ุงูุฏุงุฎููุฉ","ุงูุฌูุฏ","ุงูุฏู","ุงูุฃุนุตุงุจ"],c:0},

// ===== ุฐูุงุก ุณุฑูุน =====
{cat:"ุฃูุบุงุฒ",q:"ุดูุก ูููุง ูุดู ููุฏ ุฌุฒุกุงู ูููุ",opts:["ุงูุดูุนุฉ","ุงูููู","ุงููุชุงุจ","ุงูุธู"],c:0},
{cat:"ุฃูุบุงุฒ",q:"ูู ุฑูุจุฉ ุจูุง ุฑุฃุณุ",opts:["ุงูุฒุฌุงุฌุฉ","ุงูุฅูุณุงู","ุงูุญุตุงู","ุงูุดุฌุฑุฉ"],c:0},
{cat:"ุฃูุบุงุฒ",q:"ูุฐูุจ ููุง ูุนูุฏุ",opts:["ุงูููุช","ุงููุทุฑ","ุงูููุฑ","ุงูุตูุช"],c:0},
{cat:"ุฃูุบุงุฒ",q:"ุจูุช ุจูุง ุฃุจูุงุจ ููุง ููุงูุฐุ",opts:["ุงูุจูุถุฉ","ุงูุฎููุฉ","ุงููุตุฑ","ุงูููู"],c:0},
{cat:"ุฃูุบุงุฒ",q:"ููุดู ูููู ูููุณ ูู ุฃุฑุฌูุ",opts:["ุงูุณุงุนุฉ","ุงูุณูุงุฑุฉ","ุงูููู","ุงูููุฑ"],c:0},

// ===== ุฏูู =====
{cat:"ุฏูู",q:"ุนุงุตูุฉ ูุฑูุณุงุ",opts:["ุจุงุฑูุณ","ุฑููุง","ูุฏุฑูุฏ","ุจุฑููู"],c:0},
{cat:"ุฏูู",q:"ุฃูุจุฑ ุฏููุฉ ูู ุงูุนุงููุ",opts:["ุฑูุณูุง","ุงูุตูู","ุฃูุฑููุง","ููุฏุง"],c:0},
{cat:"ุฏูู",q:"ุนุงุตูุฉ ูุตุฑุ",opts:["ุงููุงูุฑุฉ","ุงูุฅุณููุฏุฑูุฉ","ุงูุฌูุฒุฉ","ุงูุฃูุตุฑ"],c:0},
{cat:"ุฏูู",q:"ุนุงุตูุฉ ุชุฑููุงุ",opts:["ุฃููุฑุฉ","ุฅุณุทูุจูู","ุฅุฒููุฑ","ุจูุฑุตุฉ"],c:0},
{cat:"ุฏูู",q:"ุนุงุตูุฉ ููุฏุงุ",opts:["ุฃูุชุงูุง","ุชูุฑูุชู","ูุงููููุฑ","ูููุชุฑูุงู"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุฅูุทุงููุงุ",opts:["ุฑููุง","ูููุงู","ูุงุจููู","ูููุฑูุณุง"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุฃููุงููุงุ",opts:["ุจุฑููู","ููููุฎ","ูุฑุงููููุฑุช","ูุงูุจูุฑุบ"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุฅุณุจุงููุงุ",opts:["ูุฏุฑูุฏ","ุจุฑุดูููุฉ","ูุงููุณูุง","ุฅุดุจูููุฉ"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุฃุณุชุฑุงููุงุ",opts:["ูุงูุจุฑุง","ุณูุฏูู","ููุจูุฑู","ุจูุฑุซ"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุงูุจุฑุงุฒููุ",opts:["ุจุฑุงุฒูููุง","ุฑูู ุฏู ุฌุงููุฑู","ุณุงู ุจุงููู","ุณููุงุฏูุฑ"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุงูููุฏุ",opts:["ูููุฏููู","ูููุจุงู","ูุงูููุชุง","ุชุดููุงู"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุงูุตููุ",opts:["ุจููู","ุดูุบูุงู","ูููุบ ูููุบ","ููุงูุบุชุดู"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุฑูุณูุงุ",opts:["ููุณูู","ุณุงูุช ุจุทุฑุณุจุฑุบ","ุณูุชุดู","ูุงุฒุงู"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุงููููุงูุ",opts:["ุฃุซููุง","ุณุงููููู","ุจุงุชุฑุงุณ","ูุฑูุช"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุงูุณููุฏุ",opts:["ุณุชูููููู","ูุงููู","ุฃูุจุณุงูุง","ุบูุชูุจุฑุบ"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุงููุฑููุฌุ",opts:["ุฃูุณูู","ุจูุฑุบู","ุชุฑููุฏูุงูู","ุณุชุงููุบุฑ"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุงูุฏููุงุฑูุ",opts:["ููุจููุงุบู","ุขุฑููุณ","ุฃูุฏูุณู","ุฃูุจูุฑุบ"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ููููุฏุงุ",opts:["ููุณููู","ุชุงูุจูุฑู","ุชูุฑูู","ุฃููู"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ููููุฏุงุ",opts:["ุฃูุณุชุฑุฏุงู","ุฑูุชุฑุฏุงู","ูุงูุงู","ุฃูุชุฑุฎุช"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุจูุฌููุงุ",opts:["ุจุฑููุณู","ุฃูุชููุฑุจ","ุจุฑูุฌ","ุบูุช"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุณููุณุฑุงุ",opts:["ุจุฑู","ุฒููุฑุฎ","ุฌููู","ููุฒุงู"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุงูููุณุงุ",opts:["ููููุง","ุณุงูุฒุจูุฑุบ","ุบุฑุงุชุณ","ูููุฒ"],c:0},

{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุงูููุณููุ",opts:["ููุณููู ุณูุชู","ูุงูููู","ุบูุงุฏุงูุงุฎุงุฑุง","ูููุชูุฑู"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุงูุฃุฑุฌูุชููุ",opts:["ุจูููุณ ุขูุฑุณ","ูุฑุทุจุฉ","ููุฏูุฒุง","ุฑูุฒุงุฑูู"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุชุดูููุ",opts:["ุณุงูุชูุงุบู","ูุงูุจุงุฑุงูุณู","ูููุซุจุซููู","ูุงูุงููุฑุง"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุฌููุจ ุฃูุฑูููุงุ",opts:["ุจุฑูุชูุฑูุง","ููุจ ุชุงูู","ุฌููุงูุณุจุฑุบ","ุฏูุฑุจุงู"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ููุฌูุฑูุงุ",opts:["ุฃุจูุฌุง","ูุงุบูุณ","ูุงูู","ุฅูุจุงุฏุงู"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุงููุบุฑุจุ",opts:["ุงูุฑุจุงุท","ุงูุฏุงุฑ ุงูุจูุถุงุก","ูุฑุงูุด","ุทูุฌุฉ"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุงูุฌุฒุงุฆุฑุ",opts:["ุงูุฌุฒุงุฆุฑ","ููุฑุงู","ูุณูุทููุฉ","ุนูุงุจุฉ"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุชููุณุ",opts:["ุชููุณ","ุตูุงูุณ","ุณูุณุฉ","ุจูุฒุฑุช"],c:0},

// ===== ูุชููุนุฉ =====
{cat:"ุนุงูุฉ",q:"ูู ุนุฏุฏ ุฃูุงู ุงูุฃุณุจูุนุ",opts:["7","6","5","8"],c:0},
{cat:"ุนุงูุฉ",q:"ููู ุงูุฒูุฑุฏุ",opts:["ุฃุฎุถุฑ","ุฃุญูุฑ","ุฃุฒุฑู","ุฃุตูุฑ"],c:0},
{cat:"ุนุงูุฉ",q:"ุขูุฉ ููุงุณ ุงูุญุฑุงุฑุฉุ",opts:["ุงูุชุฑูููุชุฑ","ุงูุจุงุฑููุชุฑ","ุงูููุฒุงู","ุงููููุงุณ"],c:0},
{cat:"ุนุงูุฉ",q:"ูู ุนุฏุฏ ุณุงุนุงุช ุงููููุ",opts:["24","12","18","30"],c:0},
{cat:"ุนุงูุฉ",q:"ุฃูุจุฑ ูุญูุท ูู ุงูุนุงููุ",opts:["ุงููุงุฏุฆ","ุงูุฃุทูุณู","ุงูููุฏู","ุงููุชุฌูุฏ"],c:0}
            {cat:"ุฏูู",q:"ุนุงุตูุฉ ูุฑูุณุงุ",opts:["ุจุงุฑูุณ","ุฑููุง","ูุฏุฑูุฏ","ุจุฑููู"],c:0},
{cat:"ุฏูู",q:"ุฃูุจุฑ ุฏููุฉ ูู ุงูุนุงููุ",opts:["ุฑูุณูุง","ุงูุตูู","ุฃูุฑููุง","ููุฏุง"],c:0},
{cat:"ุฏูู",q:"ุนุงุตูุฉ ูุตุฑุ",opts:["ุงููุงูุฑุฉ","ุงูุฅุณููุฏุฑูุฉ","ุงูุฌูุฒุฉ","ุงูุฃูุตุฑ"],c:0},
{cat:"ุฏูู",q:"ุนุงุตูุฉ ุชุฑููุงุ",opts:["ุฃููุฑุฉ","ุฅุณุทูุจูู","ุฅุฒููุฑ","ุจูุฑุตุฉ"],c:0},
{cat:"ุฏูู",q:"ุนุงุตูุฉ ููุฏุงุ",opts:["ุฃูุชุงูุง","ุชูุฑูุชู","ูุงููููุฑ","ูููุชุฑูุงู"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุฅูุทุงููุงุ",opts:["ุฑููุง","ูููุงู","ูุงุจููู","ูููุฑูุณุง"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุฃููุงููุงุ",opts:["ุจุฑููู","ููููุฎ","ูุฑุงููููุฑุช","ูุงูุจูุฑุบ"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุฅุณุจุงููุงุ",opts:["ูุฏุฑูุฏ","ุจุฑุดูููุฉ","ูุงููุณูุง","ุฅุดุจูููุฉ"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุฃุณุชุฑุงููุงุ",opts:["ูุงูุจุฑุง","ุณูุฏูู","ููุจูุฑู","ุจูุฑุซ"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุงูุจุฑุงุฒููุ",opts:["ุจุฑุงุฒูููุง","ุฑูู ุฏู ุฌุงููุฑู","ุณุงู ุจุงููู","ุณููุงุฏูุฑ"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุงูููุฏุ",opts:["ูููุฏููู","ูููุจุงู","ูุงูููุชุง","ุชุดููุงู"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุงูุตููุ",opts:["ุจููู","ุดูุบูุงู","ูููุบ ูููุบ","ููุงูุบุชุดู"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุฑูุณูุงุ",opts:["ููุณูู","ุณุงูุช ุจุทุฑุณุจุฑุบ","ุณูุชุดู","ูุงุฒุงู"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุงููููุงูุ",opts:["ุฃุซููุง","ุณุงููููู","ุจุงุชุฑุงุณ","ูุฑูุช"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุงูุณููุฏุ",opts:["ุณุชูููููู","ูุงููู","ุฃูุจุณุงูุง","ุบูุชูุจุฑุบ"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุงููุฑููุฌุ",opts:["ุฃูุณูู","ุจูุฑุบู","ุชุฑููุฏูุงูู","ุณุชุงููุบุฑ"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุงูุฏููุงุฑูุ",opts:["ููุจููุงุบู","ุขุฑููุณ","ุฃูุฏูุณู","ุฃูุจูุฑุบ"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ููููุฏุงุ",opts:["ููุณููู","ุชุงูุจูุฑู","ุชูุฑูู","ุฃููู"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ููููุฏุงุ",opts:["ุฃูุณุชุฑุฏุงู","ุฑูุชุฑุฏุงู","ูุงูุงู","ุฃูุชุฑุฎุช"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุจูุฌููุงุ",opts:["ุจุฑููุณู","ุฃูุชููุฑุจ","ุจุฑูุฌ","ุบูุช"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุณููุณุฑุงุ",opts:["ุจุฑู","ุฒููุฑุฎ","ุฌููู","ููุฒุงู"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุงูููุณุงุ",opts:["ููููุง","ุณุงูุฒุจูุฑุบ","ุบุฑุงุชุณ","ูููุฒ"],c:0},

{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุงูููุณููุ",opts:["ููุณููู ุณูุชู","ูุงูููู","ุบูุงุฏุงูุงุฎุงุฑุง","ูููุชูุฑู"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุงูุฃุฑุฌูุชููุ",opts:["ุจูููุณ ุขูุฑุณ","ูุฑุทุจุฉ","ููุฏูุฒุง","ุฑูุฒุงุฑูู"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุชุดูููุ",opts:["ุณุงูุชูุงุบู","ูุงูุจุงุฑุงูุณู","ูููุซุจุซููู","ูุงูุงููุฑุง"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุฌููุจ ุฃูุฑูููุงุ",opts:["ุจุฑูุชูุฑูุง","ููุจ ุชุงูู","ุฌููุงูุณุจุฑุบ","ุฏูุฑุจุงู"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ููุฌูุฑูุงุ",opts:["ุฃุจูุฌุง","ูุงุบูุณ","ูุงูู","ุฅูุจุงุฏุงู"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุงููุบุฑุจุ",opts:["ุงูุฑุจุงุท","ุงูุฏุงุฑ ุงูุจูุถุงุก","ูุฑุงูุด","ุทูุฌุฉ"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุงูุฌุฒุงุฆุฑุ",opts:["ุงูุฌุฒุงุฆุฑ","ููุฑุงู","ูุณูุทููุฉ","ุนูุงุจุฉ"],c:0},
{cat:"ุฏูู",q:"ูุง ูู ุนุงุตูุฉ ุชููุณุ",opts:["ุชููุณ","ุตูุงูุณ","ุณูุณุฉ","ุจูุฒุฑุช"],c:0},

// ===== ูุชููุนุฉ =====
{cat:"ุนุงูุฉ",q:"ูู ุนุฏุฏ ุฃูุงู ุงูุฃุณุจูุนุ",opts:["7","6","5","8"],c:0},
{cat:"ุนุงูุฉ",q:"ููู ุงูุฒูุฑุฏุ",opts:["ุฃุฎุถุฑ","ุฃุญูุฑ","ุฃุฒุฑู","ุฃุตูุฑ"],c:0},
{cat:"ุนุงูุฉ",q:"ุขูุฉ ููุงุณ ุงูุญุฑุงุฑุฉุ",opts:["ุงูุชุฑูููุชุฑ","ุงูุจุงุฑููุชุฑ","ุงูููุฒุงู","ุงููููุงุณ"],c:0},
{cat:"ุนุงูุฉ",q:"ูู ุนุฏุฏ ุณุงุนุงุช ุงููููุ",opts:["24","12","18","30"],c:0},
{cat:"ุนุงูุฉ",q:"ุฃูุจุฑ ูุญูุท ูู ุงูุนุงููุ",opts:["ุงููุงุฏุฆ","ุงูุฃุทูุณู","ุงูููุฏู","ุงููุชุฌูุฏ"],c:0}
            {cat:"ุฌุบุฑุงููุฉ",q:"ุฃุนูู ุฌุจู ูู ุงูุนุงููุ",opts:["ุฅููุฑุณุช","ูู2","ุงูุฃูุจ","ูููููุฌุงุฑู"],c:0},
{cat:"ุฌุบุฑุงููุฉ",q:"ุฃูุจุฑ ูุญูุท ูู ุงูุนุงููุ",opts:["ุงููุงุฏุฆ","ุงูุฃุทูุณู","ุงูููุฏู","ุงููุชุฌูุฏ"],c:0},
{cat:"ุฌุบุฑุงููุฉ",q:"ูุง ุงูุจุญุฑ ุงูุฐู ููุตู ุขุณูุง ุนู ุฃูุฑูููุงุ",opts:["ุงูุจุญุฑ ุงูุฃุญูุฑ","ุงููุชูุณุท","ุงูุนุฑุจู","ุงูุฃุณูุฏ"],c:0},

{cat:"ุฑูุงุถูุฉ",q:"ูู ุนุฏุฏ ูุงุนุจู ูุฑูู ูุฑุฉ ุงูุณูุฉ ุฏุงุฎู ุงูููุนุจุ",opts:["5","6","7","4"],c:0},
{cat:"ุฑูุงุถูุฉ",q:"ูู ุฒูู ูุจุงุฑุงุฉ ูุฑุฉ ุงูุณูุฉ ุงูุฏูููุฉุ",opts:["40 ุฏูููุฉ","60 ุฏูููุฉ","90 ุฏูููุฉ","30 ุฏูููุฉ"],c:0},
{cat:"ุฑูุงุถูุฉ",q:"ุฑูุงุถุฉ ูุณุชุฎุฏู ูููุง ุงููุถุฑุจ ูุงููุฑุฉ ุงูุตูุฑุงุกุ",opts:["ุงูุชูุณ","ุงูุจูุณุจูู","ุงููุฑูููุช","ุงูุงุณููุงุด"],c:0},
{cat:"ุฑูุงุถูุฉ",q:"ูู ุนุฏุฏ ุญููุงุช ุดุนุงุฑ ุงูุฃูุนุงุจ ุงูุฃูููุจูุฉุ",opts:["5","4","6","7"],c:0},
{cat:"ุฑูุงุถูุฉ",q:"ูู ูุณุฌู ุงููุฏู ูู ูุฑุฉ ุงููุฏูุ",opts:["ุงูููุงุฌู","ุงูุญูู","ุงููุฏุฑุจ","ุงูุฌูููุฑ"],c:0},

{cat:"ุชุงุฑูุฎูุฉ",q:"ูู ุจูู ุงูุฃูุฑุงูุงุชุ",opts:["ุงููุตุฑููู ุงููุฏูุงุก","ุงูุฑููุงู","ุงูุฅุบุฑูู","ุงููุฑุณ"],c:0},
{cat:"ุชุงุฑูุฎูุฉ",q:"ูู ุฃู ูุงุฑุฉ ูุงูุช ุงูุญุถุงุฑุฉ ุงูุฑููุงููุฉุ",opts:["ุฃูุฑูุจุง","ุขุณูุง","ุฃูุฑูููุง","ุฃูุฑููุง"],c:0},
{cat:"ุชุงุฑูุฎูุฉ",q:"ูู ุฃูู ุฑุฆูุณ ููููุงูุงุช ุงููุชุญุฏุฉุ",opts:["ุฌูุฑุฌ ูุงุดูุทู","ููููููู","ููููุฏู","ุฑูุฒููุช"],c:0},
{cat:"ุชุงุฑูุฎูุฉ",q:"ูุง ุงูุญุฑุจ ุงูุชู ุงุณุชูุฑุช 6 ุณููุงุช ุจูู 1939 ู1945ุ",opts:["ุงูุญุฑุจ ุงูุนุงูููุฉ ุงูุซุงููุฉ","ุงูุฃููู","ุงูุจุงุฑุฏุฉ","ุงูุฎููุฌ"],c:0},
{cat:"ุชุงุฑูุฎูุฉ",q:"ูู ุงููุงุฆุฏ ุงููุณูู ุงูุฐู ูุชุญ ุงููุฏุณุ",opts:["ุนูุฑ ุจู ุงูุฎุทุงุจ","ุฎุงูุฏ ุจู ุงููููุฏ","ุตูุงุญ ุงูุฏูู","ุทุงุฑู ุจู ุฒูุงุฏ"],c:0},

{cat:"ุฃููุงู",q:"ูุง ุงููููู ุงูุฐู ูุชุญุฏุซ ุนู ุฏููุงุตูุฑ ูู ุฌุฒูุฑุฉุ",opts:["Jurassic Park","Avatar","Titanic","Joker"],c:0},
{cat:"ุฃููุงู",q:"ูููู ุชุฏูุฑ ุฃุญุฏุงุซู ูู ุงููุถุงุก ูุน ุฑุงุฆุฏ ุถุงุฆุนุ",opts:["The Martian","Gravity","Avatar","Dune"],c:0},
{cat:"ุฃููุงู",q:"ูููู ุจุทููู ุจุงุชูุงูุ",opts:["The Dark Knight","Avengers","Joker","Venom"],c:0},
{cat:"ุฃููุงู",q:"ูููู ูุชุญุฏุซ ุนู ุตูุฏูู ุจุงูุฏูุฑุงุ",opts:["Avatar","Matrix","Inception","Gladiator"],c:0},
{cat:"ุฃููุงู",q:"ูููู ุฃุจุทุงู ูุงุฑูู ูุฌุชูุนููุ",opts:["Avengers","X-Men","Batman","Superman"],c:0}
            {cat:"ุชุงุฑูุฎ ุฅุณูุงูู",q:"ูู ุฃู ุนุงู ุญุฏุซุช ุงููุฌุฑุฉ ุงููุจููุฉุ",opts:["622ู","610ู","630ู","570ู"],c:0},
{cat:"ุชุงุฑูุฎ ุฅุณูุงูู",q:"ูู ูู ุฃูู ุฎูููุฉ ูู ุงูุฅุณูุงูุ",opts:["ุฃุจู ุจูุฑ ุงูุตุฏูู","ุนูุฑ ุจู ุงูุฎุทุงุจ","ุนุซูุงู ุจู ุนูุงู","ุนูู ุจู ุฃุจู ุทุงูุจ"],c:0},
{cat:"ุชุงุฑูุฎ ุฅุณูุงูู",q:"ูู ูู ุซุงูู ุงูุฎููุงุก ุงูุฑุงุดุฏููุ",opts:["ุนูุฑ ุจู ุงูุฎุทุงุจ","ุฃุจู ุจูุฑ ุงูุตุฏูู","ุนุซูุงู ุจู ุนูุงู","ุนูู ุจู ุฃุจู ุทุงูุจ"],c:0},
{cat:"ุชุงุฑูุฎ ุฅุณูุงูู",q:"ูู ุนูุฏ ุฃู ุฎูููุฉ ุฌูููุน ุงููุฑุขู ุงููุฑูู ุฃูู ูุฑุฉุ",opts:["ุฃุจู ุจูุฑ ุงูุตุฏูู","ุนูุฑ ุจู ุงูุฎุทุงุจ","ุนุซูุงู ุจู ุนูุงู","ุนูู ุจู ุฃุจู ุทุงูุจ"],c:0},
{cat:"ุชุงุฑูุฎ ุฅุณูุงูู",q:"ูู ุงูุฎูููุฉ ุงูุฐู ูููุจ ุจุฐู ุงูููุฑููุ",opts:["ุนุซูุงู ุจู ุนูุงู","ุนูู ุจู ุฃุจู ุทุงูุจ","ุนูุฑ ุจู ุงูุฎุทุงุจ","ูุนุงููุฉ ุจู ุฃุจู ุณููุงู"],c:0},
{cat:"ุชุงุฑูุฎ ุฅุณูุงูู",q:"ูู ูู ูุงุฆุฏ ูุนุฑูุฉ ุงููุงุฏุณูุฉุ",opts:["ุณุนุฏ ุจู ุฃุจู ููุงุต","ุฎุงูุฏ ุจู ุงููููุฏ","ุนูุฑู ุจู ุงูุนุงุต","ุฃุจู ุนุจูุฏุฉ ุจู ุงูุฌุฑุงุญ"],c:0},
{cat:"ุชุงุฑูุฎ ุฅุณูุงูู",q:"ูู ูุชุญ ูุตุฑ ูู ุงูุนุตุฑ ุงูุฅุณูุงููุ",opts:["ุนูุฑู ุจู ุงูุนุงุต","ุฎุงูุฏ ุจู ุงููููุฏ","ุทุงุฑู ุจู ุฒูุงุฏ","ุตูุงุญ ุงูุฏูู"],c:0},
{cat:"ุชุงุฑูุฎ ุฅุณูุงูู",q:"ูู ุงููุงุฆุฏ ุงูุฐู ูุชุญ ุงูุฃูุฏูุณุ",opts:["ุทุงุฑู ุจู ุฒูุงุฏ","ููุณู ุจู ูุตูุฑ","ุตูุงุญ ุงูุฏูู","ุฎุงูุฏ ุจู ุงููููุฏ"],c:0},
{cat:"ุชุงุฑูุฎ ุฅุณูุงูู",q:"ูู ุฃู ูุนุฑูุฉ ุงูุชุตุฑ ุงููุณูููู ุฑุบู ููุฉ ุนุฏุฏููุ",opts:["ุจุฏุฑ","ุฃุญุฏ","ุงูุฎูุฏู","ุงููุฑููู"],c:0},
{cat:"ุชุงุฑูุฎ ุฅุณูุงูู",q:"ูู ุฃู ูุนุฑูุฉ ุงุณุชุดูุฏ ุญูุฒุฉ ุจู ุนุจุฏุงููุทูุจุ",opts:["ุฃุญุฏ","ุจุฏุฑ","ุงูุฎูุฏู","ุญููู"],c:0},

{cat:"ุชุงุฑูุฎ ุฅุณูุงูู",q:"ูู ูู ุณูู ุงููู ุงููุณูููุ",opts:["ุฎุงูุฏ ุจู ุงููููุฏ","ุนูู ุจู ุฃุจู ุทุงูุจ","ุงูุฒุจูุฑ ุจู ุงูุนูุงู","ุณุนุฏ ุจู ุฃุจู ููุงุต"],c:0},
{cat:"ุชุงุฑูุฎ ุฅุณูุงูู",q:"ุฃู ุฎูููุฉ ุฃูุดุฃ ุงูุฏูุงููู ููุธู ุงูุฏููุฉุ",opts:["ุนูุฑ ุจู ุงูุฎุทุงุจ","ุฃุจู ุจูุฑ ุงูุตุฏูู","ุนุซูุงู ุจู ุนูุงู","ุนูู ุจู ุฃุจู ุทุงูุจ"],c:0},
{cat:"ุชุงุฑูุฎ ุฅุณูุงูู",q:"ูู ุนูุฏ ูู ููุชุญุช ุงููุฏุณ ุณูููุงูุ",opts:["ุนูุฑ ุจู ุงูุฎุทุงุจ","ุฃุจู ุจูุฑ ุงูุตุฏูู","ุนุซูุงู ุจู ุนูุงู","ูุนุงููุฉ ุจู ุฃุจู ุณููุงู"],c:0},
{cat:"ุชุงุฑูุฎ ุฅุณูุงูู",q:"ูู ูุคุณุณ ุงูุฏููุฉ ุงูุฃูููุฉุ",opts:["ูุนุงููุฉ ุจู ุฃุจู ุณููุงู","ุนุจุฏุงูููู ุจู ูุฑูุงู","ูุฒูุฏ ุจู ูุนุงููุฉ","ูุฑูุงู ุจู ุงูุญูู"],c:0},
{cat:"ุชุงุฑูุฎ ุฅุณูุงูู",q:"ูุง ุนุงุตูุฉ ุงูุฏููุฉ ุงูุฃูููุฉุ",opts:["ุฏูุดู","ุงููุฏููุฉ","ุจุบุฏุงุฏ","ุงููููุฉ"],c:0},
{cat:"ุชุงุฑูุฎ ุฅุณูุงูู",q:"ูู ุงูุฎูููุฉ ุงูุฃููู ุงูุฐู ุนูุฑู ุจุงูุนุฏู ูุงูุฒูุฏุ",opts:["ุนูุฑ ุจู ุนุจุฏุงูุนุฒูุฒ","ุงููููุฏ ุจู ุนุจุฏุงูููู","ูุดุงู ุจู ุนุจุฏุงูููู","ูุนุงููุฉ"],c:0},
{cat:"ุชุงุฑูุฎ ุฅุณูุงูู",q:"ูู ุฃุณุณ ุงูุฏููุฉ ุงูุนุจุงุณูุฉุ",opts:["ุฃุจู ุงูุนุจุงุณ ุงูุณูุงุญ","ูุงุฑูู ุงูุฑุดูุฏ","ุงููุฃููู","ุงููุนุชุตู"],c:0},
{cat:"ุชุงุฑูุฎ ุฅุณูุงูู",q:"ูุง ุนุงุตูุฉ ุงูุฏููุฉ ุงูุนุจุงุณูุฉุ",opts:["ุจุบุฏุงุฏ","ุฏูุดู","ุงููุงูุฑุฉ","ุงููููุฉ"],c:0},
{cat:"ุชุงุฑูุฎ ุฅุณูุงูู",q:"ูู ุฃุดูุฑ ุฎููุงุก ุงูุฏููุฉ ุงูุนุจุงุณูุฉ ูู ุงูุนุตุฑ ุงูุฐูุจูุ",opts:["ูุงุฑูู ุงูุฑุดูุฏ","ุฃุจู ุฌุนูุฑ ุงูููุตูุฑ","ุงููุงุซู","ุงููุชููู"],c:0},
{cat:"ุชุงุฑูุฎ ุฅุณูุงูู",q:"ูู ุฃู ูุฏููุฉ ุจููู ุจูุช ุงูุญููุฉุ",opts:["ุจุบุฏุงุฏ","ุฏูุดู","ุงููุงูุฑุฉ","ูุฑุทุจุฉ"],c:0},

{cat:"ุชุงุฑูุฎ ุฅุณูุงูู",q:"ูู ุงููุงุฆุฏ ุงูุฐู ูุฒู ุงูุตููุจููู ูู ุญุทููุ",opts:["ุตูุงุญ ุงูุฏูู ุงูุฃููุจู","ููุฑ ุงูุฏูู ุฒููู","ูุทุฒ","ุจูุจุฑุณ"],c:0},
{cat:"ุชุงุฑูุฎ ุฅุณูุงูู",q:"ูู ุฃู ุนุงู ุงุณุชุนุงุฏ ุตูุงุญ ุงูุฏูู ุงููุฏุณุ",opts:["1187ู","1099ู","1258ู","1212ู"],c:0},
{cat:"ุชุงุฑูุฎ ุฅุณูุงูู",q:"ูู ุงููุงุฆุฏ ุงูุฐู ูุฒู ุงููุบูู ูู ุนูู ุฌุงููุชุ",opts:["ุณูู ุงูุฏูู ูุทุฒ","ุงูุธุงูุฑ ุจูุจุฑุณ","ุตูุงุญ ุงูุฏูู","ููุฑ ุงูุฏูู"],c:0},
{cat:"ุชุงุฑูุฎ ุฅุณูุงูู",q:"ูู ูุคุณุณ ุงูุฏููุฉ ุงูุนุซูุงููุฉุ",opts:["ุนุซูุงู ุจู ุฃุฑุทุบุฑู","ูุญูุฏ ุงููุงุชุญ","ุณูููุงู ุงููุงูููู","ุจุงูุฒูุฏ"],c:0},
{cat:"ุชุงุฑูุฎ ุฅุณูุงูู",q:"ูู ูุชุญ ุงููุณุทูุทูููุฉุ",opts:["ูุญูุฏ ุงููุงุชุญ","ุณูููุงู ุงููุงูููู","ุนุซูุงู ุงูุฃูู","ูุฑุงุฏ ุงูุซุงูู"],c:0},
{cat:"ุชุงุฑูุฎ ุฅุณูุงูู",q:"ูู ุฃู ุณูุฉ ููุชุญุช ุงููุณุทูุทูููุฉุ",opts:["1453ู","1492ู","1517ู","1402ู"],c:0},
{cat:"ุชุงุฑูุฎ ุฅุณูุงูู",q:"ูู ุงูุณูุทุงู ุงูุนุซูุงูู ุงููููุจ ุจุงููุงููููุ",opts:["ุณูููุงู ุงููุงูููู","ูุญูุฏ ุงููุงุชุญ","ุณููู ุงูุฃูู","ูุฑุงุฏ ุงูุฑุงุจุน"],c:0},
{cat:"ุชุงุฑูุฎ ุฅุณูุงูู",q:"ูุง ุงููุนุฑูุฉ ุงูุชู ุฃููุช ุงูุฏููุฉ ุงูุฃูููุฉุ",opts:["ุงูุฒุงุจ","ุนูู ุฌุงููุช","ุญุทูู","ุงููุงุฏุณูุฉ"],c:0},
{cat:"ุชุงุฑูุฎ ุฅุณูุงูู",q:"ุฃูู ูุงูุช ุงูุฏููุฉ ุงููุงุทููุฉุ",opts:["ูุตุฑ","ุงูุดุงู","ุงูุนุฑุงู","ุงูุฃูุฏูุณ"],c:0},
{cat:"ุชุงุฑูุฎ ุฅุณูุงูู",q:"ูุง ุงููุฏููุฉ ุงูุชู ูุงูุช ุนุงุตูุฉ ุงูุฃูุฏูุณ ุงูุฅุณูุงููุฉุ",opts:["ูุฑุทุจุฉ","ุฅุดุจูููุฉ","ุบุฑูุงุทุฉ","ุทููุทูุฉ"],c:0},
];
];

/* โโโโโโโ STATE โโโโโโโ */
let RC=null, PID=null, PN=null, isH=false, myT=null, RD=null;
let tmrHost=null, tmrDisp=null, tmrAns=null, rl=null;

/* โโโโโโโ UTILS โโโโโโโ */
function showScr(id){document.querySelectorAll('.scr').forEach(s=>s.classList.remove('on'));document.getElementById(id).classList.add('on')}
function goBack(){if(document.referrer&&document.referrer.indexOf(window.location.host)!==-1)window.history.back();else showScr('scrWelcome')}
function clearT(){clearInterval(tmrHost);clearInterval(tmrDisp);clearInterval(tmrAns);tmrHost=tmrDisp=tmrAns=null;
  if(typeof tmrCountdown!=='undefined'){clearInterval(tmrCountdown);tmrCountdown=null}
  if(typeof tmrTypewriter!=='undefined'){clearInterval(tmrTypewriter);tmrTypewriter=null}}
function saveS(){if(RC&&PID)sessionStorage.setItem('gs',JSON.stringify({rc:RC,pid:PID,pn:PN,h:isH,t:myT}))}
function clearS(){sessionStorage.removeItem('gs')}
function restoreS(){
  const s=sessionStorage.getItem('gs');if(!s)return false;
  try{const d=JSON.parse(s);
    db.ref('rooms/'+d.rc).once('value',snap=>{
      if(!snap.exists()||!snap.val().players||!snap.val().players[d.pid]){clearS();showScr('scrWelcome');return}
      RC=d.rc;PID=d.pid;PN=d.pn;isH=d.h;myT=d.t;saveS();listen()});return true}
  catch(e){clearS();return false}
}

/* โโโโโโโ CREATE / JOIN โโโโโโโ */
var teamIsPublic = false;

function createRoom(){
  const n=document.getElementById('hostName').value.trim();if(!n){alert('ุฃุฏุฎู ุงุณูู');return}
  const t1=document.getElementById('t1n').value.trim()||'ุงููุฑูู ุงูุฃุญูุฑ';
  const t2=document.getElementById('t2n').value.trim()||'ุงููุฑูู ุงูุฃุฒุฑู';
  const sz=parseInt(document.getElementById('tsz').value);
  RC=Math.floor(1000+Math.random()*9000).toString();PID='h-'+Date.now();PN=n;isH=true;
  db.ref('rooms/'+RC).set({oneShotOpts:false,code:RC,host:PID,t1Name:t1,t2Name:t2,tSize:sz,
    players:{[PID]:{name:n,isHost:true,team:''}},state:'lobby',
    curQ:'',usedQ:[],qQueue:[],couch:[],buzzP:'',showOpts:false,banTeam:'',
    corAns:'',selAns:'',waitChoice:false,choiceP:'',waitText:false,qStart:'',buzzTime:'',
    countdown:0,typePos:0,typeActive:false,typePaused:false,typeResumed:false});
  if(teamIsPublic){db.ref('publicRooms/team/'+RC).set({hostName:n,t1Name:t1,t2Name:t2,created:Date.now()})}
  saveS();listen();showLobby()}

function joinRoom(){
  const n=document.getElementById('pName').value.trim();const c=document.getElementById('pCode').value.trim();
  if(!n){alert('ุฃุฏุฎู ุงุณูู');return}if(!c||c.length!==4){alert('ุฃุฏุฎู ููุฏ ุงูุบุฑูุฉ (4 ุฃุฑูุงู)');return}
  db.ref('rooms/'+c).once('value',snap=>{
    if(!snap.exists()){alert('ุงูุบุฑูุฉ ุบูุฑ ููุฌูุฏุฉ');return}
    RC=c;PID='p-'+Date.now();PN=n;isH=false;
    db.ref('rooms/'+RC+'/players/'+PID).set({name:n,isHost:false,team:''});
    saveS();listen();showScr('scrTeam');document.getElementById('wpn').textContent=n})}

/* โโโโโโโ PUBLIC ROOMS - TEAM โโโโโโโ */
async function loadPublicRoomsTeam(){
  var el=document.getElementById('publicRoomsListTeam');
  var noEl=document.getElementById('noPublicRoomsTeam');
  el.innerHTML='<p style="text-align:center;color:#aaa;">โณ ุฌุงุฑู ุงูุจุญุซ...</p>';
  noEl.classList.add('hidden');
  try{
    var snap=await db.ref('publicRooms/team').once('value');
    var rooms=snap.val();el.innerHTML='';
    if(!rooms){noEl.classList.remove('hidden');return}
    var found=0;var now=Date.now();
    for(var code in rooms){
      var info=rooms[code];
      if(info.created&&(now-info.created)>3600000){db.ref('publicRooms/team/'+code).remove();continue}
      var rs=await db.ref('rooms/'+code).once('value');
      if(!rs.exists()){db.ref('publicRooms/team/'+code).remove();continue}
      var rd=rs.val();if(rd.state!=='lobby'){db.ref('publicRooms/team/'+code).remove();continue}
      var pc=rd.players?Object.keys(rd.players).length:0;
      var card=document.createElement('div');
      card.style.cssText='background:rgba(255,255,255,0.05);border:1px solid rgba(212,175,55,0.2);border-radius:8px;padding:10px;margin:5px 0;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:all 0.2s;';
      card.innerHTML='<div><span style="color:#d4af37;font-weight:700;">๐ฎ '+(info.hostName||'ูุถูู')+'</span><br><span style="font-size:0.8em;color:#999;">'+(info.t1Name||'')+ ' vs '+(info.t2Name||'')+' ยท '+code+'</span></div><span style="color:#2ecc71;font-weight:700;">๐ฅ '+pc+' โ</span>';
      card.setAttribute('data-code',code);
      card.addEventListener('click',function(){joinPublicTeam(this.getAttribute('data-code'))});
      el.appendChild(card);found++}
    if(found===0)noEl.classList.remove('hidden');
  }catch(e){el.innerHTML='<p style="text-align:center;color:#e74c3c;">โ ุฎุทุฃ</p>'}}

function joinPublicTeam(code){
  var name=document.getElementById('publicNameTeam').value.trim();
  if(!name){alert('ุฃุฏุฎู ุงุณูู ุฃููุงู!');return}
  db.ref('rooms/'+code).once('value',snap=>{
    if(!snap.exists()){alert('ุงูุบุฑูุฉ ูู ุชุนุฏ ููุฌูุฏุฉ!');loadPublicRoomsTeam();return}
    var rd=snap.val();if(rd.state!=='lobby'){alert('ุงููุนุจุฉ ุจุฏุฃุช!');return}
    RC=code;PID='p-'+Date.now();PN=name;isH=false;
    db.ref('rooms/'+RC+'/players/'+PID).set({name:name,isHost:false,team:''});
    saveS();listen();showScr('scrTeam');document.getElementById('wpn').textContent=name})}

async function quickJoinTeam(){
  var btn=document.getElementById('quickJoinBtnTeam');
  btn.disabled=true;btn.textContent='โณ ุฌุงุฑู ุงูุจุญุซ...';
  try{
    var snap=await db.ref('publicRooms/team').once('value');
    var rooms=snap.val();
    if(!rooms){alert('ูุง ุชูุฌุฏ ุฑููุงุช ุนุงูุฉ ุญุงููุงู!');btn.disabled=false;btn.textContent='โก ุงูุถูุงู ุณุฑูุน';return}
    var foundCode=null;
    for(var code in rooms){var rs=await db.ref('rooms/'+code).once('value');
      if(rs.exists()&&rs.val().state==='lobby'){foundCode=code;break}else{db.ref('publicRooms/team/'+code).remove()}}
    if(!foundCode){alert('ูุง ุชูุฌุฏ ุฑููุงุช ูุชุงุญุฉ!');btn.disabled=false;btn.textContent='โก ุงูุถูุงู ุณุฑูุน';return}
    var name=prompt('ุฃุฏุฎู ุงุณูู:');
    if(!name||!name.trim()){btn.disabled=false;btn.textContent='โก ุงูุถูุงู ุณุฑูุน';return}
    RC=foundCode;PID='p-'+Date.now();PN=name.trim();isH=false;
    db.ref('rooms/'+RC+'/players/'+PID).set({name:PN,isHost:false,team:''});
    saveS();listen();showScr('scrTeam');document.getElementById('wpn').textContent=PN;
  }catch(e){alert('ุฎุทุฃ: '+e.message)}
  btn.disabled=false;btn.textContent='โก ุงูุถูุงู ุณุฑูุน'}

/* โโโโโโโ LISTEN โโโโโโโ */
function listen(){
  if(rl)db.ref('rooms/'+RC).off('value',rl);
  rl=db.ref('rooms/'+RC).on('value',snap=>{
    if(!snap.exists()){clearS();showScr('scrWelcome');return}
    RD=snap.val();if(!RD.players||!RD.players[PID])return;
    const me=RD.players[PID];if(me.team&&me.team!=='')myT=me.team;
    updateUI()})}

/* โโโโโโโ LOBBY โโโโโโโ */
function showLobby(){showScr('scrLobby');document.getElementById('drc').textContent=RC}
function pickTeam(t){myT=t;db.ref('rooms/'+RC+'/players/'+PID).update({team:t});saveS()}
function pickTeamJoin(t){myT=t;db.ref('rooms/'+RC+'/players/'+PID).update({team:t});saveS();
  RD&&RD.state==='playing'?showScr('scrGame'):showScr('scrWait')}

function renderPlayers(cid){
  const c=document.getElementById(cid);c.innerHTML='';
  Object.entries(RD.players||{}).forEach(([id,p])=>{
    const d=document.createElement('div');d.className='chip';
    let dc='dg';if(p.team==='team1')dc='dr';if(p.team==='team2')dc='db';
    d.innerHTML=`<span class="dot ${dc}"></span>${p.name}${p.isHost?' ๐':''}`;c.appendChild(d)})}

function updateLobby(){
  const cnt=Object.keys(RD.players||{}).length;
  document.getElementById('pc').textContent=cnt;renderPlayers('lpl');
  if(!RD)return;
  document.getElementById('htBtns').innerHTML=
    `<button class="tsb rt ${myT==='team1'?'sel':''}" onclick="pickTeam('team1')">๐ด ${RD.t1Name}</button>`+
    `<button class="tsb bt ${myT==='team2'?'sel':''}" onclick="pickTeam('team2')">๐ต ${RD.t2Name}</button>`;
  const b=document.getElementById('sgBtn');
  if(!myT||myT===''){b.disabled=true;b.textContent='ุงุฎุชุฑ ูุฑููู ุฃููุงู'}
  else{b.disabled=false;b.textContent='ุงุจุฏุฃ ุงููุนุจุฉ โถ๏ธ'}}

function updateWait(){
  document.getElementById('wtn').textContent=myT==='team1'?RD.t1Name:RD.t2Name;renderPlayers('wpl')}

function startGame(){if(!myT){alert('ุงุฎุชุฑ ูุฑููู');return}db.ref('publicRooms/team/'+RC).remove();db.ref('rooms/'+RC).update({state:'playing'})}

/* โโโโโโโ UPDATE UI โโโโโโโ */
function updateUI(){
  if(!RD)return;
  // Check for replay team-select state
  if(RD.state==='teamSelect'){document.getElementById('replayOv').classList.add('on');renderReplayTeams();return}
  else{document.getElementById('replayOv').classList.remove('on')}

  if(RD.state==='lobby'){
    if(isH){if(!document.getElementById('scrLobby').classList.contains('on'))showLobby();updateLobby()}
    else if(!myT||myT===''){if(!document.getElementById('scrTeam').classList.contains('on')){showScr('scrTeam');document.getElementById('wpn').textContent=PN}
      if(RD){document.getElementById('tsBtns').innerHTML=
        `<button class="tsb rt" onclick="pickTeamJoin('team1')">๐ด ${RD.t1Name}</button>`+
        `<button class="tsb bt" onclick="pickTeamJoin('team2')">๐ต ${RD.t2Name}</button>`}}
    else{if(!document.getElementById('scrWait').classList.contains('on'))showScr('scrWait');updateWait()}
  } else if(RD.state==='playing'){
    if(!myT||myT===''){showScr('scrTeam');document.getElementById('wpn').textContent=PN;
      if(RD){document.getElementById('tsBtns').innerHTML=
        `<button class="tsb rt" onclick="pickTeamJoin('team1')">๐ด ${RD.t1Name}</button>`+
        `<button class="tsb bt" onclick="pickTeamJoin('team2')">๐ต ${RD.t2Name}</button>`}}
    else{if(!document.getElementById('scrGame').classList.contains('on'))showScr('scrGame');updateGame()}
  }
}

/* โโโโโโโ GAME โโโโโโโ */
function updateGame(){
  if(!RD)return;const sz=RD.tSize||2;const couch=RD.couch||[];

  // Victory: couch full AND all same team
  let t1c=0,t2c=0;
  couch.forEach(pid=>{const p=RD.players[pid];if(p){if(p.team==='team1')t1c++;else t2c++}});
  if(couch.length>=sz && (t1c===sz||t2c===sz)){showVic();return}
  document.getElementById('vicOv').classList.remove('on');

  // Top bar
  document.getElementById('gt1n').textContent=RD.t1Name;document.getElementById('gt2n').textContent=RD.t2Name;
  document.getElementById('gt1s').textContent=t1c;document.getElementById('gt2s').textContent=t2c;
  renderTP('gt1p','team1');renderTP('gt2p','team2');

  // Couch
  document.getElementById('couchCnt').textContent=couch.length;document.getElementById('couchMax').textContent=sz;
  const cs=document.getElementById('couchSeats');cs.innerHTML='';
  for(let i=0;i<sz;i++){
    const d=document.createElement('div');
    if(couch[i]){const p=RD.players[couch[i]];
      if(p){d.className='cseat '+(p.team==='team1'?'fr':'fb')+(couch[i]===PID?' me':'');d.textContent='๐ '+p.name}
      else{d.className='cseat empty';d.textContent='โ'}}
    else{d.className='cseat empty';d.textContent='โ'}
    cs.appendChild(d)}

  // ALL players see questions - even on couch
  document.getElementById('gContent').style.display='block';
  renderGC();
  // Show next button ONLY for host AND only when question is done
  const qDone = hasAns() || (!RD.curQ || RD.curQ==='');
  document.getElementById('hNext').classList.toggle('hid', !isH || !qDone);
  document.getElementById('gTop').style.display='';document.getElementById('couchSec').style.display=''}

function renderTP(cid,team){
  const c=document.getElementById(cid);c.innerHTML='';const couch=RD.couch||[];
  Object.entries(RD.players||{}).forEach(([id,p])=>{if(p.team===team){
    const s=document.createElement('span');s.className='mp'+(couch.includes(id)?' oc':'');
    s.textContent=p.name;c.appendChild(s)}})}

/* โโโโโโโ ANSWER MATCHING โโโโโโโ */
function hasAns(){return RD.corAns===true||RD.corAns===false}
function norm(s){return s.toLowerCase().replace(/[\u064B-\u065F\u0670]/g,'').replace(/ุฉ/g,'ู').replace(/ู/g,'ู').replace(/[ุฃุฅุขูฑ]/g,'ุง').replace(/ุค/g,'ู').replace(/ุฆ/g,'ู').replace(/\s+/g,' ').trim()}

const AR_N={'ูุงุญุฏ':1,'ุงุซููู':2,'ุงุซูุงู':2,'ุซูุงุซุฉ':3,'ุซูุงุซ':3,'ุงุฑุจุนุฉ':4,'ุงุฑุจุน':4,'ุฎูุณุฉ':5,'ุฎูุณ':5,
'ุณุชุฉ':6,'ุณุช':6,'ุณุจุนุฉ':7,'ุณุจุน':7,'ุซูุงููุฉ':8,'ุซูุงูู':8,'ุซูุงู':8,'ุชุณุนุฉ':9,'ุชุณุน':9,
'ุนุดุฑุฉ':10,'ุนุดุฑ':10,'ุงุญุฏ ุนุดุฑ':11,'ุงุซูุง ุนุดุฑ':12,'ูุฆุฉ':100,'ูุงุฆุฉ':100,'ูุฆุชูู':200,
'ุซูุงุซูุฆุฉ':300,'ุงุฑุจุนูุฆุฉ':400,'ุฎูุณูุฆุฉ':500,'ุงูู':1000};

function getNums(s){const m=s.match(/\d+/g);const r=m?m.map(Number):[];
const n=norm(s);for(const[w,v]of Object.entries(AR_N))if(n.includes(norm(w)))r.push(v);return[...new Set(r)]}

/* โโโโโโโ PHONETIC TRANSLITERATION SYSTEM โโโโโโโ */
// ุชุญููู ุงููุต ุงูุนุฑุจู ุฅูู ุฃุญุฑู ูุงุชูููุฉ ุตูุชูุฉ
function arToLatin(s){
  s=s.replace(/[\u064B-\u065F\u0670]/g,'');
  const m={'ุง':'a','ุฃ':'a','ุฅ':'a','ุข':'aa','ุจ':'b','ูพ':'p','ุช':'t','ุซ':'th','ุฌ':'j','ุญ':'h','ุฎ':'kh',
    'ุฏ':'d','ุฐ':'dh','ุฑ':'r','ุฒ':'z','ุณ':'s','ุด':'sh','ุต':'s','ุถ':'d','ุท':'t','ุธ':'z',
    'ุน':'a','ุบ':'g','ู':'f','ู':'q','ู':'k','ู':'l','ู':'m','ู':'n','ู':'h','ู':'w',
    'ู':'y','ุฉ':'a','ู':'a','ุฆ':'y','ุค':'w'};
  let r='';
  for(let c of s) r+=(m[c]!==undefined)?m[c]:c;
  return r;
}

// ุชูููุฏ ููุชุงุญ ุตูุชู ููุญุฏ ููููุงุฑูุฉ (ูุนูู ูุน ุนุฑุจู ููุงุชููู)
function phoneticKey(s){
  s=s.toLowerCase().trim();
  // ูู ุนุฑุจู ุญูููู ููุงุชููู ุฃูู
  if(/[\u0600-\u06FF]/.test(s)){
    // ุดูู "ุงู" ุงูุชุนุฑูู
    s=s.replace(/(^|\s)ุงู/g,'$1');
    s=arToLatin(s);
  }
  // ูุธูู ุงูุงูุฌููุฒู
  s=s.replace(/ph/g,'f').replace(/ck/g,'k').replace(/x/g,'ks');
  // ุชุจุณูุท ุงูุญุฑูู ุงูุตุงูุชุฉ ูู ุงูุงูุฌููุฒู
  s=s.replace(/ght/g,'t');     // knightโknit, nightโnit, fightโfit
  s=s.replace(/\bkn/g,'n');    // knightโnit, knowโnow, kneeโnee
  s=s.replace(/\bwr/g,'r');    // writeโrite, wrongโrong
  s=s.replace(/mb\b/g,'m');    // climbโclim, bombโbom
  // ุดูู ุฃุฏูุงุช ุงูุชุนุฑูู ูุงูุฑุจุท
  s=s.replace(/\b(the|of|a|an|de|la|el|le|los|las)\b/g,'');
  // ูุญูุฏ ุงูุฃุตูุงุช ุงููุชุดุงุจูุฉ
  s=s.replace(/[gqj]/g,'k');   // ู ุบ ุฌ ู โ k (ูู ุงูุนุฑุจู ุฌ ุชูุซู g ู j)
  s=s.replace(/c(?=[eiy])/g,'s'); // ce ci cy โ s
  s=s.replace(/c/g,'k');       // c โ k
  s=s.replace(/[sz]/g,'s');    // ุณ ุฒ ุต โ s
  s=s.replace(/[dt]/g,'t');    // ุฏ ุช ุท ุถ โ t
  s=s.replace(/[pb]/g,'b');    // ุจ ูพ โ b
  s=s.replace(/v/g,'f');       // ู ฺค โ f
  // ุดูู ูู ุดู ุบูุฑ ุญุฑูู
  s=s.replace(/[^a-z]/g,'');
  // ุดูู ุงูุชูุฑุงุฑ
  s=s.replace(/(.)\1+/g,'$1');
  return s;
}

// ุชูููุฏ ููุชุงุญ ุงูุญุฑูู ุงูุณุงููุฉ ููุท (ุจุฏูู ุญุฑูุงุช)
function consonantKey(s){
  s=phoneticKey(s);
  // ุดูู ูู ุงูุญุฑูุงุช + ุงูุฃุญุฑู ุงููู ุชูุซู ุญุฑูุงุช ูู ุงูุชุนุฑูุจ (ู=o/u, ู=i/e, ู=ุบุงูุจุงู ุตุงูุชุฉ)
  s=s.replace(/[aeiouhyw]/g,'');
  // ุดูู ุงูุชูุฑุงุฑ ุงูุฌุฏูุฏ ุงููู ุตุงุฑ ุจุนุฏ ุญุฐู ุงูุญุฑูุงุช
  s=s.replace(/(.)\1+/g,'$1');
  return s;
}

// ููุงุฑูุฉ ุตูุชูุฉ ุฐููุฉ
function phoneticMatch(userInput,correctAns){
  // ูู ูุง ููู ุฎูุท ุนุฑุจู/ุงูุฌููุฒู ูุง ุชุณูู ุดู
  const hasAr=/[\u0600-\u06FF]/.test(userInput);
  const hasEn=/[a-zA-Z]/.test(correctAns);
  if(!hasAr && !hasEn) return false;

  const uKey=phoneticKey(userInput);
  const cKey=phoneticKey(correctAns);

  // ูุทุงุจูุฉ ูุงููุฉ
  if(uKey===cKey) return true;
  if(uKey.length>=3 && cKey.length>=3){
    // ูุทุงุจูุฉ ุฌุฒุฆูุฉ (ูู ูุชุจ ุฌุฒุก ูุจูุฑ ูู ุงูุงุณู)
    if(cKey.includes(uKey) && uKey.length>=cKey.length*0.5) return true;
    if(uKey.includes(cKey) && cKey.length>=uKey.length*0.5) return true;
  }

  // ููุงุฑูุฉ ุงูุญุฑูู ุงูุณุงููุฉ
  const uCon=consonantKey(userInput);
  const cCon=consonantKey(correctAns);
  if(uCon.length>=3 && cCon.length>=3){
    if(uCon===cCon) return true;
    if(cCon.includes(uCon) && uCon.length>=cCon.length*0.5) return true;
    if(uCon.includes(cCon) && cCon.length>=uCon.length*0.5) return true;
  }

  // ููุงุฑูุฉ ูููุฉ ุจูููุฉ
  const uWords=userInput.replace(/(^|\s)ุงู/g,'$1').split(/\s+/).filter(w=>w.length>1);
  const cWords=correctAns.toLowerCase().replace(/\b(the|of|a|an|de|la)\b/g,'').split(/\s+/).filter(w=>w.length>1);
  if(cWords.length>0){
    let matched=0;
    for(const cw of cWords){
      const ck=phoneticKey(cw);
      if(ck.length<2) continue;
      for(const uw of uWords){
        const uk=phoneticKey(uw);
        if(uk.length<2) continue;
        if(uk===ck || (ck.length>=3 && uk.length>=3 && (ck.includes(uk)||uk.includes(ck)))) {matched++;break}
        // ููุงุฑูุฉ ุณุงููุฉ
        const ukc=consonantKey(uw), ckc=consonantKey(cw);
        if(ukc.length>=2 && ckc.length>=2 && (ukc===ckc||(ckc.includes(ukc)&&ukc.length>=ckc.length*0.6)||(ukc.includes(ckc)&&ckc.length>=ukc.length*0.6))){matched++;break}
      }
    }
    // ูู ุทุงุจู ุฃุบูุจ ุงููููุงุช ุงููููุฉ
    if(matched>=Math.ceil(cWords.length*0.6) && matched>=1) return true;
  }

  return false;
}

function checkAns(u,c){
  const un=norm(u),cn=norm(c);if(un===cn)return true;
  const uN=getNums(u),cN=getNums(c);
  if(uN.length&&cN.length){for(const a of uN)for(const b of cN)if(a===b)return true}
  if(un.length>=3&&cn.includes(un))return true;if(cn.length>=3&&un.includes(cn))return true;
  const uw=un.split(' ').filter(w=>w.length>2),cw=cn.split(' ').filter(w=>w.length>2);
  for(const a of uw)for(const b of cw){if(a===b)return true;if(a.length>=3&&b.includes(a))return true;if(b.length>=3&&a.includes(b))return true}
  // โ ูุทุงุจูุฉ ุตูุชูุฉ ููุชุนุฑูุจ (ูุซูุงู: ูุงููููู ุฏูุฏ = Walking Dead)
  if(phoneticMatch(u,c)) return true;
  return false}

/* โโโโโโโ RENDER GAME โโโโโโโ */
function renderGC(){
  ['qCard','tBar','bzInd','bzBtn','aiArea','optsG','chG'].forEach(id=>document.getElementById(id).classList.add('hid'));
  document.getElementById('bzBtn').disabled=true;
  const st=document.getElementById('gSts');st.classList.remove('hid');

  // Choice
  if(RD.waitChoice&&RD.choiceP===PID){showQ();st.textContent='โ ุฅุฌุงุจุฉ ุตุญูุญุฉ! ุงุฎุชุฑ:';st.className='sts s';renderChoice();return}
  if(RD.waitChoice){const p=RD.players[RD.choiceP];showQ();st.textContent=(p?.name||'')+' ูุฎุชุงุฑ...';st.className='sts i';return}

  // No Q
  if(!RD.curQ||RD.curQ===''){st.textContent='โณ ุงูุชุธุฑ ุงูุณุคุงู...';st.className='sts i';return}

  // Countdown phase
  const cd=RD.countdown||0;
  if(cd>0){
    document.getElementById('qCard').classList.remove('hid');
    document.getElementById('qCat').textContent=RD.curQ.cat||'';
    document.getElementById('qTxt').textContent='';
    st.textContent='โณ ุงูุณุคุงู ุฎูุงู... '+cd;st.className='sts w';
    st.style.fontSize='1.5em';
    if(isH)startCountdown();
    return}
  st.style.fontSize='';

  // Typewriter active - question still being typed
  if(RD.typeActive && (RD.typePos||0)<(RD.curQ.q||'').length && !RD.typePaused && !RD.buzzP && !RD.showOpts && !hasAns()){
    showQ();showMainTimer();
    const bb=document.getElementById('bzBtn');bb.classList.remove('hid');
    const onCouch=(RD.couch||[]).includes(PID);
    const banned=RD.banTeam&&RD.banTeam===myT;
    if(onCouch){bb.disabled=true;st.textContent='๐๏ธ ุฃูุช ุนูู ุงูููุจุฉ - ุดุงูุฏ ููุท';st.className='sts w'}
    else if(banned){bb.disabled=true;st.textContent='โ ูุฑููู ููููุน - ุงูุชุธุฑ';st.className='sts e'}
    else{bb.disabled=false;st.textContent='๐ ุงูุฑุฃ ูุงุถุบุท ุงูุฌุฑุณ!';st.className='sts i'}
    if(isH)startTypewriter();
    return}

  // Typewriter resumed after wrong answer - question completing for other team
  if(RD.typeResumed && RD.typeActive && (RD.typePos||0)<(RD.curQ.q||'').length && !RD.buzzP && !hasAns()){
    showQ();showMainTimer();
    const banned=RD.banTeam&&RD.banTeam===myT;
    if(banned){st.textContent='โ ุฅุฌุงุจุฉ ุฎุงุทุฆุฉ! ุงูุณุคุงู ูุชููู...';st.className='sts e'}
    else{st.textContent='โณ ุงูุณุคุงู ูุชููู... ุงุณุชุนุฏ ููุฎูุงุฑุงุช';st.className='sts w'}
    if(isH)resumeTypewriter();
    return}

  // Question fully typed out  
  if(RD.typeActive && (RD.typePos||0)>=(RD.curQ.q||'').length && !RD.buzzP && !RD.showOpts && !hasAns()){
    showQ();showMainTimer();
    const bb=document.getElementById('bzBtn');bb.classList.remove('hid');
    const onCouch=(RD.couch||[]).includes(PID);
    const banned=RD.banTeam&&RD.banTeam===myT;
    if(onCouch){bb.disabled=true;st.textContent='๐๏ธ ุฃูุช ุนูู ุงูููุจุฉ - ุดุงูุฏ ููุท';st.className='sts w'}
    else if(banned){bb.disabled=true;st.textContent='โ ูุฑููู ููููุน - ูุฑุตุฉ ุงูุฎุตู';st.className='sts e'}
    else{bb.disabled=false;st.textContent='๐ ุงูุฑุฃ ูุงุถุบุท ุงูุฌุฑุณ!';st.className='sts i'}
    return}

  showQ();

  // I'm typing
  if(RD.waitText&&RD.buzzP===PID&&!hasAns()){
    st.textContent='โจ๏ธ ุงูุชุจ ุฅุฌุงุจุชู!';st.className='sts w';
    document.getElementById('aiArea').classList.remove('hid');showMainTimer();startAnsTimer();return}

  // Someone typing
  if(RD.waitText&&RD.buzzP&&RD.buzzP!==PID&&!hasAns()){
    const p=RD.players[RD.buzzP];const bi=document.getElementById('bzInd');bi.classList.remove('hid');
    bi.textContent=`๐ ${p?.name||''} ููุชุจ ุงูุฅุฌุงุจุฉ...`;st.textContent='ุงูุชุธุฑ...';st.className='sts i';showMainTimer();return}

  // Options
  if(RD.showOpts&&!hasAns()){
    const og=document.getElementById('optsG');og.classList.remove('hid');og.innerHTML='';
    const onCouch=(RD.couch||[]).includes(PID);
    const banned=RD.banTeam&&RD.banTeam===myT;
    var shuffled=RD.curQ.opts.map(function(o,i){return{text:o,origIdx:i}});
    for(var si=shuffled.length-1;si>0;si--){var sj=Math.floor(Math.random()*(si+1));var tmp=shuffled[si];shuffled[si]=shuffled[sj];shuffled[sj]=tmp}
    shuffled.forEach(function(item){var b=document.createElement('button');b.className='ob';b.textContent=item.text;
      if(onCouch||banned)b.disabled=true;else b.onclick=function(){selAns(item.origIdx)};og.appendChild(b)});
    if(onCouch){st.textContent='๐๏ธ ุฃูุช ุนูู ุงูููุจุฉ - ุดุงูุฏ ููุท';st.className='sts w'}
    else if(banned){st.textContent='โ ูุฑููู ููููุน - ูุฑุตุฉ ุงูุฎุตู';st.className='sts e'}
    else if(RD.banTeam){st.textContent='๐ฏ ูุฑุตุชู! ุงุฎุชุฑ ุงูุฅุฌุงุจุฉ';st.className='sts s'}
    else{st.textContent='ุงุฎุชุฑ ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ';st.className='sts i'}
    return}

  // Result
  if(hasAns()){st.textContent=RD.corAns?'โ ุฅุฌุงุจุฉ ุตุญูุญุฉ!':'โ ุฅุฌุงุจุฉ ุฎุงุทุฆุฉ!';st.className=RD.corAns?'sts s':'sts e';return}

  // Active Q - fully typed
  if(!RD.buzzP&&!RD.showOpts){showMainTimer();const bb=document.getElementById('bzBtn');bb.classList.remove('hid');
    const onCouch=(RD.couch||[]).includes(PID);
    if(onCouch){bb.disabled=true;st.textContent='๐๏ธ ุฃูุช ุนูู ุงูููุจุฉ - ุดุงูุฏ ููุท';st.className='sts w'}
    else{bb.disabled=false;st.textContent='๐ ุงูุฑุฃ ูุงุถุบุท ุงูุฌุฑุณ!';st.className='sts i'}
    return}

  // Someone buzzed
  if(RD.buzzP&&RD.buzzP!==PID){const p=RD.players[RD.buzzP];
    st.textContent=(p?.name||'')+' ูุฌูุจ...';st.className='sts w';showMainTimer()}}

function showQ(){if(!RD.curQ||RD.curQ==='')return;document.getElementById('qCard').classList.remove('hid');
  document.getElementById('qCat').textContent=RD.curQ.cat||'';
  // Typewriter: show only up to typePos characters
  const fullQ=RD.curQ.q||'';
  const pos=RD.typePos||0;
  if(pos>0&&pos<fullQ.length){
    document.getElementById('qTxt').textContent=fullQ.substring(0,pos)+'|';
  } else if(pos>=fullQ.length){
    document.getElementById('qTxt').textContent=fullQ;
  } else {
    document.getElementById('qTxt').textContent='';
  }
}

/* โโโโโโโ COUNTDOWN & TYPEWRITER (HOST ONLY) โโโโโโโ */
let tmrCountdown=null, tmrTypewriter=null;

function startCountdown(){
  if(!isH)return; if(tmrCountdown)return;
  tmrCountdown=setInterval(()=>{
    if(!RD||!RD.curQ||RD.curQ===''){clearInterval(tmrCountdown);tmrCountdown=null;return}
    const cd=RD.countdown||0;
    if(cd>1){
      db.ref('rooms/'+RC).update({countdown:cd-1});
    } else if(cd===1){
      clearInterval(tmrCountdown);tmrCountdown=null;
      db.ref('rooms/'+RC).update({countdown:0,typeActive:true,typePos:0,qStart:Date.now()});
    } else {
      clearInterval(tmrCountdown);tmrCountdown=null;
    }
  },1000);
}

function startTypewriter(){
  if(!isH)return; if(tmrTypewriter)return;
  const fullQ=RD.curQ?.q||'';
  tmrTypewriter=setInterval(()=>{
    if(!RD||!RD.curQ||RD.curQ===''){clearInterval(tmrTypewriter);tmrTypewriter=null;return}
    if(RD.typePaused||!RD.typeActive){clearInterval(tmrTypewriter);tmrTypewriter=null;return}
    const pos=RD.typePos||0;
    if(pos<fullQ.length){
      db.ref('rooms/'+RC).update({typePos:pos+1});
    } else {
      clearInterval(tmrTypewriter);tmrTypewriter=null;
      // If resumed after wrong answer, show options for other team
      if(RD.typeResumed&&RD.banTeam){
        db.ref('rooms/'+RC).update({
          showOpts:true,
          oneShotOpts:true,
          typeActive:false,
          typeResumed:false
        });
      }
    }
  },80);
}

function resumeTypewriter(){
  if(!isH)return;
  tmrTypewriter=null;
  startTypewriter();
}

/* โโโโโโโ TIMERS โโโโโโโ */
function showMainTimer(){
  if(!RD.qStart)return;document.getElementById('tBar').classList.remove('hid');updTimerDisp();
  if(!tmrDisp)tmrDisp=setInterval(()=>{if(!RD||!RD.qStart){clearInterval(tmrDisp);tmrDisp=null;return}updTimerDisp()},500);
  if(isH&&!tmrHost)tmrHost=setInterval(()=>{if(!RD||!RD.qStart){clearInterval(tmrHost);tmrHost=null;return}
    const tl=Math.max(0,30-Math.floor((Date.now()-RD.qStart)/1000));
    if(tl<=0){clearInterval(tmrHost);tmrHost=null;
      if(!hasAns()&&!RD.showOpts){
        // If typeResumed (second team's turn) and time runs out, show options
        if(RD.typeResumed||RD.banTeam){
          const u={showOpts:true,waitText:false,typeActive:false,typePaused:false};
          if(RD.banTeam)u.banTeam=RD.banTeam;
          u.oneShotOpts=true;
          // Show full question
          u.typePos=(RD.curQ?.q||'').length;
          db.ref('rooms/'+RC).update(u);
        } else {
          const u={showOpts:true,waitText:false,typeActive:false,typePaused:false};
          if(RD.buzzP)u.banTeam=RD.players[RD.buzzP]?.team||'';
          u.typePos=(RD.curQ?.q||'').length;
          db.ref('rooms/'+RC).update(u);
        }
      }}},500)}

function updTimerDisp(){const tl=Math.max(0,30-Math.floor((Date.now()-RD.qStart)/1000));
  const c=document.getElementById('tCirc');if(c){c.textContent=tl;c.classList.toggle('dng',tl<=5)}}

function startAnsTimer(){if(!RD.buzzTime)return;clearInterval(tmrAns);const ci=document.getElementById('atCirc');
  tmrAns=setInterval(()=>{if(!RD||!RD.buzzTime){clearInterval(tmrAns);tmrAns=null;return}
    const tl=Math.max(0,7-Math.floor((Date.now()-RD.buzzTime)/1000));
    ci.textContent=tl;ci.classList.toggle('dng',tl<=2);
    if(tl<=0 && RD.buzzP===PID && !hasAns()){
      clearInterval(tmrAns);tmrAns=null;
      db.ref('rooms/'+RC).update({
        corAns:'',
        waitText:false,
        showOpts:false,
        banTeam:(RD.players?.[PID]?.team) || "",
        oneShotOpts:false,
        buzzTime:"",
        buzzP:'',
        typeResumed:true,
        typePaused:false,
        typeActive:true,
        qStart:Date.now()
      });
    }},1000)}


/* โโโโโโโ BUZZER โโโโโโโ */
function buzzIn(){if(!RD.curQ||RD.curQ===''||RD.buzzP||RD.showOpts)return;
  if((RD.couch||[]).includes(PID))return;
  // Don't allow banned team to buzz
  if(RD.banTeam&&RD.banTeam===myT)return;
  document.getElementById('tAns').value='';
  db.ref('rooms/'+RC).update({buzzP:PID,waitText:true,buzzTime:Date.now(),typePaused:true,typeResumed:false})}

/* โโโโโโโ SUBMIT TEXT โโโโโโโ */
function submitAns(){const inp=document.getElementById('tAns');const v=inp.value.trim();
  if(!v){alert('ุงูุชุจ ุฅุฌุงุจุฉ!');return}clearInterval(tmrAns);tmrAns=null;
  inp.value='';
  const ok=checkAns(v,RD.curQ.opts[RD.curQ.c]);const ref=db.ref('rooms/'+RC);
  if(ok){ref.update({corAns:true,waitText:false});handleCorrect()}
  else{
  ref.update({
    corAns:'',
    waitText:false,
    showOpts:false,
    banTeam: RD.players[PID]?.team || '',
    oneShotOpts:false,
    buzzTime:'',
    buzzP:'',
    typeResumed:true,
    typePaused:false,
    typeActive:true,
    qStart:Date.now()
  });
}
                    }

/* โโโโโโโ SELECT OPTION โโโโโโโ */
function selAns(i){
  // โ ููููุน ุงููู ุนูู ููุจุฉ ุงูููุฒ ูุฌุงูุจ
  if((RD.couch || []).includes(PID)) return;

  const ok = i === RD.curQ.c;
  clearT();

  const ref = db.ref('rooms/'+RC);
  const myTeam = RD.players[PID]?.team || '';
  const disabled = RD.disabledOpts || [];

  // โ ูุง ุชุณูุญ ุจุงูุถุบุท ุนูู ุฎูุงุฑ ููููู
  if(disabled.includes(i)) return;

  if(ok){
    // โ ุตุญูุญ: ุงููู ุงูุฎูุงุฑุงุช ููููู ููุทู ุงูููุจุฉ
    ref.update({
      selAns: i,
      corAns: true,
      showOpts: false,
      buzzP: RD.buzzP || PID,
      oneShotOpts: false,
      banTeam: '',
      disabledOpts: []
    });
    handleCorrect();
    return;
  }

  // โ ุฎุทุฃ
  if(RD.oneShotOpts){
    // โ ูุฐุง ุณููุงุฑูู "ุจุนุฏ ูุดู ุงูุฌุฑุณ": ุงูุฎุตู ูู ูุญุงููุฉ ูุงุญุฏุฉ ููุท
    // ูู ุบูุท => ุชูุชูู ูุฑุตุฉ ุงููุฑูููู ููุฑุงู ุจุฏูู ูุดู ุงูุฌูุงุจ
    ref.update({
      selAns: i,
      corAns: false,      // ูููู ุงูุณุคุงู ููุทุฑููู
      showOpts: false,    // ูููู ุงูุฎูุงุฑุงุช
      oneShotOpts: false,
      banTeam: '',
      waitText: false,
      buzzTime: ''
    });
    return;
  }

  // โ ูุถุน ุงูุฎูุงุฑุงุช ุงูุทุจูุนู (ุจุนุฏ 30 ุซุงููุฉ):
  // ุงููู ุงูุฎูุงุฑ ุงููู ุงุฎุชุงุฑู + ุงููุน ูุฑููู ูุฎูู ุงููุฑุตุฉ ููุฎุตู
  ref.update({
    selAns: i,
    corAns: '', // ูุง ูููู ุงูุณุคุงู
    showOpts: true,
    banTeam: myTeam, // ูุฑููู ููููุน
    disabledOpts: [...new Set([...disabled, i])],
    waitText: false,
    buzzTime: ''
  });
}


/* โโโโโโโ CORRECT ANSWER โโโโโโโ */
function handleCorrect(){
  const sz=RD.tSize||2;const couch=RD.couch||[];const ref=db.ref('rooms/'+RC);
  const opps=couch.filter(pid=>{const p=RD.players[pid];return p&&p.team!==myT});

  if(couch.length>=sz){
    // Couch FULL โ can only pull (NO auto-sit)
    if(opps.length>0)ref.update({waitChoice:true,choiceP:PID});
  } else {
    // Space available
    if(opps.length>0)ref.update({waitChoice:true,choiceP:PID}); // sit or pull
    else addToCouch(); // just sit
  }}

/* โโโโโโโ CHOICE โโโโโโโ */
function renderChoice(){
  const cg=document.getElementById('chG');cg.classList.remove('hid');cg.innerHTML='';
  const sz=RD.tSize||2;const couch=RD.couch||[];
  const opps=couch.filter(pid=>{const p=RD.players[pid];return p&&p.team!==myT});
  const full=couch.length>=sz;

  if(full){
    // ONLY pull - no auto sit
    if(opps.length>0){const b=document.createElement('button');b.className='chb pull';
      b.textContent='๐ฏ ุงุณุญุจ ูุงุนุจ ุฎุตู ูู ุงูููุจุฉ';b.onclick=()=>doSteal();cg.appendChild(b)}
  } else {
    const sb=document.createElement('button');sb.className='chb sit';
    sb.textContent='๐๏ธ ุงุฌูุณ ุนูู ุงูููุจุฉ';sb.onclick=()=>doSit();cg.appendChild(sb);
    if(opps.length>0){const pb=document.createElement('button');pb.className='chb pull';
      pb.textContent='๐ฏ ุงุณุญุจ ูุงุนุจ ุฎุตู ูู ุงูููุจุฉ';pb.onclick=()=>doSteal();cg.appendChild(pb)}}}

function doSit(){addToCouch()}

function doSteal(){
  const couch=[...(RD.couch||[])];
  let idx=-1;for(let i=couch.length-1;i>=0;i--){const p=RD.players[couch[i]];if(p&&p.team!==myT){idx=i;break}}
  if(idx===-1){db.ref('rooms/'+RC).update({waitChoice:false,choiceP:''});return}
  couch.splice(idx,1);
  // Pull ONLY - do NOT auto-sit. Player needs another correct answer to sit.
  db.ref('rooms/'+RC).update({couch:couch,waitChoice:false,choiceP:''})}

function addToCouch(){
  const couch=[...(RD.couch||[])];const sz=RD.tSize||2;
  if(couch.length>=sz){db.ref('rooms/'+RC).update({waitChoice:false,choiceP:''});return}
  if(!couch.includes(PID))couch.push(PID);
  db.ref('rooms/'+RC).update({couch:couch,waitChoice:false,choiceP:''})}

/* โโโโโโโ NEXT QUESTION โโโโโโโ */
function nextQ(){clearT();
  let queue=RD.qQueue||[];
  const used=RD.usedQ||[];
  
  // If queue is empty, create a new fully shuffled queue from ALL unused questions
  if(!queue.length){
    let pool=[];
    for(let i=0;i<ALL_Q.length;i++){
      if(!used.includes(i))pool.push(i);
    }
    // If all questions used, reset
    if(pool.length===0){
      pool=[];for(let i=0;i<ALL_Q.length;i++)pool.push(i);
      used.length=0;
    }
    // Fisher-Yates shuffle
    for(let i=pool.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[pool[i],pool[j]]=[pool[j],pool[i]]}
    queue=pool;
  }
  
  const idx=queue.shift();
  const q=ALL_Q[idx];
  used.push(idx);
  
  db.ref('rooms/'+RC).update({oneShotOpts:false,curQ:{cat:q.cat,q:q.q,opts:q.opts,c:q.c},
    usedQ:used,qQueue:queue,
    buzzP:'',showOpts:false,banTeam:'',corAns:'',selAns:'',
    waitChoice:false,choiceP:'',qStart:'',waitText:false,buzzTime:'',
    countdown:3,typePos:0,typeActive:false,typePaused:false,typeResumed:false})}

/* โโโโโโโ VICTORY โโโโโโโ */
function showVic(){clearT();const couch=RD.couch||[];
  let t1c=0,t2c=0;couch.forEach(pid=>{const p=RD.players[pid];if(p){if(p.team==='team1')t1c++;else t2c++}});
  const w=t1c>t2c?RD.t1Name:RD.t2Name;
  document.getElementById('vicOv').classList.add('on');document.getElementById('vicMsg').textContent='๐ '+w+' ูุงุฒ! ๐';
  document.getElementById('gContent').style.display='none';
  document.getElementById('hNext').classList.add('hid');
  document.getElementById('gTop').style.display='none';document.getElementById('couchSec').style.display='none'}

/* โโโโโโโ REPLAY WITH TEAM CHANGE โโโโโโโ */
function askReplay(){
  // Go to team selection state so all players can change
  db.ref('rooms/'+RC).update({state:'teamSelect'})}

function renderReplayTeams(){
  if(!RD)return;
  document.getElementById('rpBtns').innerHTML=
    `<button class="tsb rt ${myT==='team1'?'sel':''}" onclick="rpPick('team1')">๐ด ${RD.t1Name}</button>`+
    `<button class="tsb bt ${myT==='team2'?'sel':''}" onclick="rpPick('team2')">๐ต ${RD.t2Name}</button>`;
  // Only host sees start button
  if(isH){document.getElementById('rpStart').classList.remove('hid');document.getElementById('rpWait').classList.add('hid')}
  else{document.getElementById('rpStart').classList.add('hid');document.getElementById('rpWait').classList.remove('hid')}}

function rpPick(t){myT=t;db.ref('rooms/'+RC+'/players/'+PID).update({team:t});saveS();renderReplayTeams()}

function confirmReplay(){
  db.ref('rooms/'+RC).update({state:'playing',curQ:'',usedQ:[],qQueue:[],couch:[],
    buzzP:'',showOpts:false,banTeam:'',corAns:'',selAns:'',
    waitChoice:false,choiceP:'',waitText:false,qStart:'',buzzTime:'',
    countdown:0,typePos:0,typeActive:false,typePaused:false,typeResumed:false});
  document.getElementById('replayOv').classList.remove('on');
  document.getElementById('gTop').style.display='';document.getElementById('couchSec').style.display='';
  document.getElementById('gContent').style.display='';document.getElementById('vicOv').classList.remove('on')}

/* โโโโโโโ INPUT โโโโโโโ */
document.getElementById('pCode')?.addEventListener('input',function(){this.value=this.value.replace(/[^0-9]/g,'')});
document.getElementById('tAns')?.addEventListener('keypress',function(e){if(e.key==='Enter')submitAns()});

/* โโโโโโโ STARS โโโโโโโ */
(function(){var c=document.getElementById('teamStars');for(var i=0;i<60;i++){var s=document.createElement('div');var sz=Math.random()*2.5+1;s.style.cssText='position:absolute;background:white;border-radius:50%;width:'+sz+'px;height:'+sz+'px;left:'+Math.random()*100+'%;top:'+Math.random()*100+'%;animation:starTw '+(Math.random()*3+2)+'s ease-in-out infinite '+(Math.random()*3)+'s';c.appendChild(s)}var st=document.createElement('style');st.textContent='@keyframes starTw{0%,100%{opacity:0.15}50%{opacity:0.8}}';document.head.appendChild(st)})();

/* โโโโโโโ INIT โโโโโโโ */
if(!restoreS())showScr('scrWelcome');
</script>
</body>
</html>
